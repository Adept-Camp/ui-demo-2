(this.webpackJsonpsav3=this.webpackJsonpsav3||[]).push([[0],{1060:function(e,t){},1104:function(e,t){},1282:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),s=n(42),c=n.n(s),i=n(24),o=n(55),u=n(1356),l=n(1327),p=n(83),d=n(20),f=n(1336),b=n(1286),h=n(1338),j=n(1339),v=n(249),x=n.n(v),g=n(250),O=n.n(g),m=n(166),w=n.n(m),y=n(201),k=n.n(y),C=n(203),S=n.n(C),I=n(202),P=n.n(I),F=n(1337),N=n(1358),R=n(251),B=n.n(R),U=n(1340),A=n(43),W=n(200),T=n.n(W),D=function(e){return T()({},M,e)},M=D({Follow:function(){return"Follow"},Unfollow:function(){return"Unfollow"},"Edit profile":function(){return"Edit profile"},"Display name":function(){return"Display name"},Description:function(){return"Description"},"Thumbnail URL":function(){return"Thumbnail URL"},"Banner URL":function(){return"Banner URL"},editProfileWarning:function(){return"Edit profile history cannot be deleted and your IP address is public."},Home:function(){return"Home"},Profile:function(){return"Profile"},Search:function(){return"Search"},"Search user ID":function(){return"Search user ID"},Peers:function(){return"Peers"},"Connected peers posts":function(){return"Connected peers posts"},Stats:function(){return"Stats"},"Connected peers stats":function(){return"Connected peers stats"},"Connecting to peers":function(){return"Connecting to peers"},Following:function(){return"Following"},"Not following anyone":function(){return"Not following anyone"},"Uncensorable content":function(){return"Uncensorable content"},publishPostWarning:function(){return"Posts cannot be deleted and your IP address is public."}}),L=n(253);Object(L.b)("es-MX",(function(e,t,n){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xeda","en 1 d\xeda"],["hace %s d\xedas","en %s d\xedas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xf1o","en 1 a\xf1o"],["hace %s a\xf1os","en %s a\xf1os"]][t]}));var E=D({Follow:function(){return"Seguir"},Unfollow:function(){return"Dejar de seguir"},"Edit profile":function(){return"Editar perfil"},"Display name":function(){return"Nombre para mostrar"},Description:function(){return"Descripci\xf3n"},"Thumbnail URL":function(){return"URL de miniatura"},"Banner URL":function(){return"URL del banner"},editProfileWarning:function(){return"El historial de edici\xf3n del perfil no se puede eliminar y su direcci\xf3n IP es p\xfablica."},Home:function(){return"Casa"},Profile:function(){return"Perfil"},Search:function(){return"Buscar"},"Search user ID":function(){return"Buscar ID de usuario"},Peers:function(){return"Compa\xf1eros"},"Connected peers posts":function(){return"Publicaciones de compa\xf1eros conectados"},Stats:function(){return"Estadisticas"},"Connected peers stats":function(){return"Estad\xedsticas de compa\xf1eros conectados"},"Connecting to peers":function(){return"Conectando con sus compa\xf1eros"},Following:function(){return"Siguiendo"},"Not following anyone":function(){return"No seguir a nadie"},"Uncensorable content":function(){return"Contenido sin censura"},publishPostWarning:function(){return"Las publicaciones no se pueden eliminar y su direcci\xf3n IP es p\xfablica."}}),z={"en-US":M,"es-MX":E};Object.freeze(z);var J=z,_=Object(a.createContext)({languageCode:"en-US",setLanguageCode:null}),q=function(e){var t="en-US",n=window.navigator.language,s=localStorage.getItem("languageCode")||n||t;J[s]||(console.warn("no available translation for '".concat(s,"'")),s=t);var c=Object(a.useState)(s),i=Object(d.a)(c,2),o=i[0],u=i[1],l={languageCode:o,setLanguageCode:function(e){J[e]?(localStorage.setItem("languageCode",e),u(e)):console.warn("no available translation for '".concat(e,"'"))}},p=e.children;return Object(r.jsx)(_.Provider,{value:l,children:p})},H=function(){var e=Object(a.useContext)(_).languageCode;return J[e]},K=n(1),V=n.n(K),G=n(10),Z=n(1360),$=n(44),Q=n(28),X=n(118),Y=n(93),ee=n(240),te=n(254),ne=n(346),re=n.n(ne),ae=n(539),se=n(13),ce=n.n(se),ie=n(167),oe=n(164),ue=n.n(oe),le=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.name,s=r.maxSize;ce()("string"===typeof a,"invalid idb lru cache '".concat(a,"' not a string")),ce()("number"===typeof s,"invalid idb lru maxSize '".concat(s,"' not a number"));var c=!1,i=function(){var r=Object(G.a)(V.a.mark((function r(){var s,i,o,u;return V.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=ie.createInstance({name:a}),i=ie.createInstance({name:"_".concat(a)}),r.next=4,s.length();case 4:return o=r.sent,r.next=7,i.length();case 7:u=r.sent,o>u?(t=s,e=i,n=o):(t=i,e=s,n=u),c=!0;case 10:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();i();var o=function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ue()(10);case 4:return e.next=6,o();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function u(e,t){return l.apply(this,arguments)}function l(){return(l=Object(G.a)(V.a.mark((function r(a,c){var i;return V.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.setItem(a,c);case 2:if(!(++n>=s)){r.next=11;break}return n=0,i=t,t=e,e=i,r.next=11,e.clear();case 11:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return{has:function(){var n=Object(G.a)(V.a.mark((function n(r){var a,s;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.getItem(r);case 4:return a=n.sent,n.next=7,t.getItem(r);case 7:return s=n.sent,n.abrupt("return",null!==a&&void 0!==a||null!==s&&void 0!==s);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),remove:function(){var n=Object(G.a)(V.a.mark((function n(r){return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.removeItem(r);case 4:return n.next=6,t.removeItem(r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),get:function(){var n=Object(G.a)(V.a.mark((function n(r){var a,s,c;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.getItem(r);case 4:return a=n.sent,n.next=7,t.getItem(r);case 7:if(s=n.sent,null===(c=a)||void 0===a){n.next=11;break}return n.abrupt("return",c);case 11:if(null===(c=s)||void 0===(c=s)){n.next=15;break}return n.next=14,u(r,c);case 14:return n.abrupt("return",c);case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),set:function(){var t=Object(G.a)(V.a.mark((function t(n,r){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:return t.next=4,e.getItem(n);case 4:if(null===(a=t.sent)||void 0===a){t.next=10;break}return t.next=8,e.setItem(n,r);case 8:t.next=12;break;case 10:return t.next=12,u(n,r);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),clear:function(){var n=Object(G.a)(V.a.mark((function n(){return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.clear();case 4:return n.next=6,t.clear();case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}};window.IdbLru=le;var pe=le,de=pe({name:"sdpCache",maxSize:2e3}),fe=function(e){return function(){var t=Object(G.a)(V.a.mark((function t(n,r){var a,s;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,r);case 2:return a=t.sent,s=n.getPeerId(),de.set(s,a._pc.remoteDescription.sdp),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},be=function(e){return function(){var t=Object(G.a)(V.a.mark((function t(n){var r,a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n);case 2:return r=t.sent,a=r.remotePeer.toB58String(),de.set(a,n.conn._pc.remoteDescription.sdp),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},he=function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()(t&&"string"===typeof t,"invalid peer id ".concat(t)),e.next=3,de.get(t);case 3:return n=e.sent,ce()(n,"no sdp cache for peer id '".concat(t,"'")),r=ae.parse(n),a={ip:r.media[0].connection.ip,port:r.media[0].port,protocol:r.media[0].protocol},e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je={withWebRtcSdpCache:function(e){var t=e.libp2p.transportManager._transports.get("WebRTCStar")._connect;t=t.bind(e.libp2p.transportManager._transports.get("WebRTCStar")),e.libp2p.transportManager._transports.get("WebRTCStar")._connect=fe(t);var n=e.libp2p.transportManager._transports.get("WebRTCStar")._upgrader.upgradeInbound;return n=n.bind(e.libp2p.transportManager._transports.get("WebRTCStar")._upgrader),e.libp2p.transportManager._transports.get("WebRTCStar")._upgrader.upgradeInbound=be(n),e},sdpCache:de,getWebRtcPeerConnectionInfo:he},ve=n(243),xe=new(n.n(ve).a)({maxSize:1e3}),ge=function(e){return function(t,n,r){if(!1===r){var a=t,s=n.cid.toString();xe.set(a,s)}return e(t,n,r)}},Oe=function(e){var t=e.ipld.bs._bitswap._updateReceiveCounters;return t=t.bind(e.ipld.bs._bitswap),e.ipld.bs._bitswap._updateReceiveCounters=ge(t),e},me=n(26),we=n.n(me),ye=n(540),ke=n(38),Ce=n.n(ke),Se=n(52),Ie=n.n(Se),Pe=n(88),Fe=n.n(Pe),Ne=n(62),Re=["https://i.imgur.com/iKxWt1c.jpg","https://i.imgur.com/iD4bp6Mb.jpg","https://i.imgur.com/65kSbHTb.jpg","https://i.imgur.com/tNsOG3Bb.jpg","https://i.imgur.com/qiQHwHbb.jpg","https://i.imgur.com/txRRZpd.jpeg"],Be=["https://i.imgur.com/ImQWjja.jpeg","https://i.imgur.com/txRRZpd.jpeg","https://i.imgur.com/2LwSsSu.gif","https://i.imgur.com/gpKZaRK.jpeg"],Ue=["https://i.imgur.com/qiQHwHb.mp4","i.imgur.com/ImQWjja.jpeg","http://i.imgur.com/txRRZpd.jpeg","https://i.imgur.com/2LwSsSu.gif","i.imgur.com/gpKZaRK.jpeg"],Ae=["Jimmy Nguyen","Shadders","WallStreet5","Joshua Henslee","John M"],We=["Founder and CEO of XYZ.  Architect of the XYZ Protocol","I like Networks & Social Paradigm Shifts.","Spanish IT Raspberry Pi 4 + Python #BigData #Hacking #Cybersecurity #IoT #IPv6","U mad bro?","Praesentpellentesquetellussitametnuncfaucibus,sitametconvallissemporta.Sedmetudui,luctusavolutpatid,malesuadaadui."],Te=["https://mystartup.com","mystartup.com","https://twitter.com/crypto","https://t.me/sav3org"],De=["Lorem ipsum dolor sit amet, consectetur adipiscing elit.","Duis turpis nibh, feugiat gravida venenatis vitae, eleifend eu enim. Ut in luctus lorem. Vivamus lectus nunc, cursus eget eleifend ut, luctus et nibh.","Suspendisse","Praesent pellentesque tellus sit amet nunc faucibus, sit amet convallis sem porta. Sed metus dui, luctus a volutpat id, malesuada a dui.","Nullam egestas eget augue id dapibus","Praesentpellentesquetellussitametnuncfaucibus,sitametconvallissemporta.Sedmetudui,luctusavolutpatid,malesuadaadui."],Me=0,Le=function(e){var t=Math.floor(Math.random()*e.length);return t+=Me++,e[t%=e.length]},Ee=function(e){window.sav3IpfsTest={},window.sav3IpfsTest.add=Object(G.a)(V.a.mark((function t(){var n,r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={content:"hello world "+Math.random()},t.next=3,e.ipfs.add(n);case 3:r=t.sent,console.log(r);case 5:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.get=function(){var t=Object(G.a)(V.a.mark((function t(n){var r,a,s,c,i,o,u,l,p,d,f,b,h,j,v;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,a=!1,t.prev=2,c=Object(Ne.a)(e.ipfs.get(n));case 4:return t.next=6,c.next();case 6:return i=t.sent,r=i.done,t.next=10,i.value;case 10:if(o=t.sent,r){t.next=54;break}if(u=o,console.log(u.path),u.content){t.next=16;break}return t.abrupt("continue",51);case 16:l=[],p=!0,d=!1,t.prev=19,b=Object(Ne.a)(u.content);case 21:return t.next=23,b.next();case 23:return h=t.sent,p=h.done,t.next=27,h.value;case 27:if(j=t.sent,p){t.next=34;break}v=j,l.push(v);case 31:p=!0,t.next=21;break;case 34:t.next=40;break;case 36:t.prev=36,t.t0=t.catch(19),d=!0,f=t.t0;case 40:if(t.prev=40,t.prev=41,p||null==b.return){t.next=45;break}return t.next=45,b.return();case 45:if(t.prev=45,!d){t.next=48;break}throw f;case 48:return t.finish(45);case 49:return t.finish(40);case 50:console.log(l.toString());case 51:r=!0,t.next=4;break;case 54:t.next=60;break;case 56:t.prev=56,t.t1=t.catch(2),a=!0,s=t.t1;case 60:if(t.prev=60,t.prev=61,r||null==c.return){t.next=65;break}return t.next=65,c.return();case 65:if(t.prev=65,!a){t.next=68;break}throw s;case 68:return t.finish(65);case 69:return t.finish(60);case 70:case"end":return t.stop()}}),t,null,[[2,56,60,70],[19,36,40,50],[41,,45,49],[61,,65,69]])})));return function(e){return t.apply(this,arguments)}}(),window.sav3IpfsTest.addresses=Object(G.a)(V.a.mark((function t(){var n,r,a,s,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ipfs.swarm.addrs();case 2:for(r in n=t.sent){a=Object(Q.a)(n[r].addrs);try{for(a.s();!(s=a.n()).done;)(c=s.value).string=c.toString()}catch(i){a.e(i)}finally{a.f()}}console.log(n);case 5:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.peers=Object(G.a)(V.a.mark((function t(){var n,r,a,s;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ipfs.swarm.peers();case 2:n=t.sent,r=Object(Q.a)(n);try{for(r.s();!(a=r.n()).done;)(s=a.value).addrString=s.addr.toString()}catch(c){r.e(c)}finally{r.f()}console.log(n);case 6:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.editProfile=Object(G.a)(V.a.mark((function t(){var n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Math.random()>.5?Le(Te):"",t.next=3,e.editUserProfile({displayName:Le(Ae),description:"".concat(Le(We).substring(0,100)," ").concat(n),thumbnailUrl:Le(Re),bannerUrl:Le(Be)});case 3:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.publishPosts=Object(G.a)(V.a.mark((function t(){var n,r,a=arguments;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.length>0&&void 0!==a[0]?a[0]:5;case 1:if(!n--){t.next=7;break}return r=Math.random()>.5?Le(Ue):"",t.next=5,e.publishPost({content:"".concat(Le(De).substring(0,100)," ").concat(r)});case 5:t.next=1;break;case 7:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.editProfileAndPublishPosts=function(){var e=Object(G.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.sav3IpfsTest.editProfile();case 2:return e.next=4,window.sav3IpfsTest.publishPosts(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ze=new(function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;return Object(X.a)(this,n),(e=t.call(this)).ipfs=null,e.ipnsClient=null,e._initIpfs().catch(console.log),e}return Object(Y.a)(n,[{key:"_initIpfs",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r=this;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={preload:{enabled:!1},repo:undefined,config:{Bootstrap:[],Addresses:{Delegates:[],Swarm:["/dns4/star.sav3.org/tcp/443/wss/p2p-webrtc-star/"]}}},e.next=4,re.a.create(t);case 4:n=e.sent,this.ipfs=je.withWebRtcSdpCache(n),this.ipfs=Oe(n),this.ipnsClient=Object(ye.a)({ipfs:n}),this.ipnsClient.on("publish",(function(e,t){r.emit("publish",e,t)})),window.ipfs=this.ipfs,this.ipfs.libp2p.on("peer:discovery",(function(e){console.log("discovered",e)})),this.ipfs.libp2p.on("peer:connect",(function(e){console.log("connected",e),r.ipfs.swarm.peers().then((function(e){return console.log("current peers connected: ",e)}))}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPeersStats",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return t=[],e.next=5,this.getPeersCids();case 5:n=e.sent,r=Object(Q.a)(n),e.prev=7,r.s();case 9:if((a=r.n()).done){e.next=18;break}return s=a.value,e.t0=t,e.next=14,this.getPeerStats(s);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t2=e.catch(7),r.e(e.t2);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return console.log("getPeersStats",{peersStats:t}),e.abrupt("return",t);case 28:case"end":return e.stop()}}),e,this,[[7,20,23,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"getPeerStats",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a,s,c,i,o,u,l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return ce()("string"===typeof t,"sav3Ipfs.getPeerStats peerId '".concat(t,"' not a string")),n=this.ipfs.libp2p.metrics,e.prev=4,e.next=7,je.getWebRtcPeerConnectionInfo(t);case 7:c=e.sent,r=c.ip,a=c.port,s=c.protocol,e.next=15;break;case 13:e.prev=13,e.t0=e.catch(4);case 15:return i=n.forPeer(we.a.createFromCID(t)).toJSON(),o=Number(i.dataReceived),u=Number(i.dataSent),l={peerCid:t,ip:r,port:a,protocol:s,dataReceived:o,dataSent:u},e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getPeersCids",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,c,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.ipfs.swarm.peers();case 4:t=e.sent,n=new Set,r=[],a=Object(Q.a)(t),e.prev=8,a.s();case 10:if((s=a.n()).done){e.next=19;break}if(c=s.value,i=c.peer,!n.has(i)){e.next=15;break}return e.abrupt("continue",17);case 15:n.add(i),r.push(i);case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),a.e(e.t0);case 24:return e.prev=24,a.f(),e.finish(24);case 27:return e.abrupt("return",r);case 28:case"end":return e.stop()}}),e,this,[[8,21,24,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"getOwnPeerCid",value:function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,ze.ipfs.id();case 4:return e.abrupt("return",e.sent.id);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOwnUserCid",value:function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,ze.ipfs.id();case 4:return e.abrupt("return",e.sent.id);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIpnsFile",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return ce()(t&&"string"===typeof t,"sav3Ipfs.getIpnsFile ipnsCid '".concat(t,"' not a string")),e.next=5,this.ipfs.name.resolve(t).next();case 5:return n=e.sent.value,e.next=8,this.getIpfsFile(n);case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOwnIpnsRecord",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,ze.getOwnPeerCid();case 4:return t=e.sent,n=we.a.createFromCID(t),e.next=8,this.ipfs.libp2p.datastore.get(Ie.a.getLocalKey(n.id));case 8:return r=e.sent,a=Ie.a.unmarshal(r),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"putOwnIpnsRecord",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,c,i,o,u,l,p=arguments;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},n=t.value,r=t.sequence,e.next=3,this.waitForReady();case 3:return ce()(n&&"string"===typeof n,"sav3Ipfs.putOwnIpnsRecord value '".concat(n,"' not a string")),ce()("number"===typeof r,"sav3Ipfs.putOwnIpnsRecord sequence '".concat(r,"' not a number")),n.startsWith("/ipfs/")||(n="/ipfs/".concat(n)),a=31536e7,e.next=9,this.ipfs.key.export("self","password");case 9:return s=e.sent,e.next=12,Fe.a.keys.import(s,"password");case 12:return c=e.sent,e.next=15,Ie.a.create(c,n,r,a);case 15:return i=e.sent,o=Ie.a.marshal(i),e.next=19,ze.getOwnPeerCid();case 19:return u=e.sent,l=we.a.createFromCID(u),e.next=23,this.ipfs.libp2p.datastore.put(Ie.a.getLocalKey(l.id),o);case 23:return e.next=25,this.ipfs.name.resolve(u);case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIpfsFile",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return ce()(t&&"string"===typeof t,"sav3Ipfs.getIpfsFile fileCid '".concat(t,"' not a string")),e.next=5,this.ipfs.get(t).next();case 5:if(!(n=e.sent.value).content){e.next=11;break}return e.next=9,n.content.next();case 9:a=e.sent,r=a&&a.value&&a.value.toString();case 11:return console.log("getIpfsFile",{fileCid:t,file:n,content:r}),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOwnIpnsData",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.getOwnIpnsRecord();case 4:return t=e.sent,n=t.value.toString(),e.next=8,this.getIpfsFile(n);case 8:if(r=e.sent,console.log("getOwnIpnsData",{ownIpfsValue:n,lastIpnsData:r}),r){e.next=12;break}return e.abrupt("return",{});case 12:return e.abrupt("return",JSON.parse(r));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"subscribeToIpnsPath",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.ipnsClient.subscribe([t]);case 4:return n=e.sent,e.abrupt("return",n[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribeToIpnsPaths",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.ipnsClient.subscribe(t);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publishPost",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,c,i,o,u=arguments;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.content,r=t.parentPostCid,e.next=3,this.waitForReady();case 3:return ce()(n&&"string"===typeof n,"sav3Ipfs.publishPost content '".concat(n,"' not a string")),ce()(n.length<=140,"sav3Ipfs.publishPost content '".concat(n,"' longer than 140 chars")),ce()(!r||"string"===typeof r,"sav3Ipfs.publishPost parentPostCid '".concat(r,"' not a string")),e.next=8,this.getOwnIpnsData();case 8:return a=e.sent,(s={}).previousPostCid=a.lastPostCid,s.timestamp=Math.round(Date.now()/1e3),e.next=14,this.ipfs.id();case 14:return s.userCid=e.sent.id,e.next=17,this.ipfs.add(n);case 17:return s.contentCid=e.sent.cid.toString(),e.next=20,this.ipfs.add(JSON.stringify(s));case 20:return c=e.sent.cid.toString(),i=Object($.a)(Object($.a)({},a),{},{lastPostCid:c}),e.next=24,this.ipfs.add(JSON.stringify(i));case 24:return o=e.sent.cid.toString(),e.next=27,this.publishIpnsRecord(o);case 27:return console.log("publishPost",{newIpnsDataCid:o,newPost:s,newIpnsData:i,ipnsData:a,newPostCid:c}),e.abrupt("return",c);case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publishIpnsRecord",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return ce()("string"===typeof t,"sav3Ipfs.publishIpnsRecord '".concat(t,"' not a string")),e.next=5,this.getOwnIpnsRecordSequence();case 5:return e.t0=e.sent,n=e.t0+1,e.next=9,this.ipnsClient.publish({value:t,sequence:n});case 9:return e.next=11,this.putOwnIpnsRecord({value:t,sequence:n});case 11:console.log("publishIpnsRecord",{newIpnsDataCid:t,sequence:n});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editUserProfile",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,c,i,o,u,l=arguments;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},n=t.displayName,r=t.description,a=t.thumbnailUrl,s=t.bannerUrl,e.next=3,this.waitForReady();case 3:if(c={},!n){e.next=10;break}return ce()("string"===typeof n,"display name not a string"),ce()(n.length<=50,"display name '".concat(n,"' longer than 50 chars")),e.next=9,this.ipfs.add(n);case 9:c.diplayNameCid=e.sent.cid.toString();case 10:if(!r){e.next=16;break}return ce()("string"===typeof r,"description not a string"),ce()(r.length<=140,"description '".concat(r,"' longer than 140 chars")),e.next=15,this.ipfs.add(r);case 15:c.descriptionCid=e.sent.cid.toString();case 16:if(!a){e.next=23;break}return ce()("string"===typeof a,"thumbnail url not a string"),ce()(a.startsWith("https://"),"thumbnail url '".concat(a,"' does not start with https://")),ce()(a.length<=140,"thumbnail url '".concat(a,"' longer than 140 chars")),e.next=22,this.ipfs.add(a);case 22:c.thumbnailUrlCid=e.sent.cid.toString();case 23:if(!s){e.next=30;break}return ce()("string"===typeof s,"banner url not a string"),ce()(s.startsWith("https://"),"banner url '".concat(s,"' does not start with https://")),ce()(s.length<=140,"banner url '".concat(a,"' longer than 140 chars")),e.next=29,this.ipfs.add(s);case 29:c.bannerUrlCid=e.sent.cid.toString();case 30:return e.next=32,this.ipfs.add(JSON.stringify(c));case 32:return i=e.sent.cid.toString(),e.next=35,this.getOwnIpnsData();case 35:return(o=e.sent).profileCid=i,e.next=39,this.ipfs.add(JSON.stringify(o));case 39:return u=e.sent.cid.toString(),e.next=42,this.publishIpnsRecord(u);case 42:return console.log("editProfile",{displayName:n,description:r,thumbnailUrl:a,bannerUrl:s,ipnsData:o,profile:c,profileCid:i,newIpnsDataCid:u}),e.abrupt("return",i);case 44:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserProfile",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return ce()("string"===typeof t,"sav3Ipfs.getUserProfile profileCid '".concat(t,"' not a string")),e.t0=JSON,e.next=6,this.getIpfsFile(t);case 6:if(e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),r={},!n.diplayNameCid){e.next=13;break}return e.next=12,this.getIpfsFile(n.diplayNameCid);case 12:r.displayName=e.sent;case 13:if(!n.descriptionCid){e.next=17;break}return e.next=16,this.getIpfsFile(n.descriptionCid);case 16:r.description=e.sent;case 17:if(!n.thumbnailUrlCid){e.next=21;break}return e.next=20,this.getIpfsFile(n.thumbnailUrlCid);case 20:r.thumbnailUrl=e.sent;case 21:if(!n.bannerUrlCid){e.next=25;break}return e.next=24,this.getIpfsFile(n.bannerUrlCid);case 24:r.bannerUrl=e.sent;case 25:return console.log("getProfile",{profileCid:t,profileCids:n,profile:r}),e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOwnIpnsRecordSequence",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,c,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.getOwnIpnsRecord();case 4:return t=e.sent,n=t,e.next=8,ze.getOwnPeerCid();case 8:return r=e.sent,e.next=11,this.ipnsClient.getRecords([r]);case 11:if(a=e.sent,s=Object(d.a)(a,1),c=s[0],i=c&&c.sequence||0,!(n>i)){e.next=19;break}return e.abrupt("return",n);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserPostsFromLastPostCid",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:ce()(t&&"string"===typeof t,"sav3Ipfs.getUserPostsFromLastPostCid lastPostCid '".concat(t,"' not a string")),n=[],r=5;case 5:if(t){e.next=8;break}return e.abrupt("break",23);case 8:if(!(n.length>=r)){e.next=10;break}return e.abrupt("break",23);case 10:return e.t0=JSON,e.next=13,this.getIpfsFile(t);case 13:return e.t1=e.sent,(a=e.t0.parse.call(e.t0,e.t1)).cid=t,t=a.previousPostCid,e.next=19,this.getIpfsFile(a.contentCid);case 19:a.content=e.sent,n.push(a),e.next=5;break;case 23:return console.log("getUserPostsFromLastPostCid",{lastPostCid:t,posts:n}),e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isReady",value:function(){return!!this.ipfs}},{key:"waitForReady",value:function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ipfs){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ue()(10);case 4:return e.next=6,this.waitForReady();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ce.a));window.sav3Ipfs=ze,window.Ipfs=re.a,Ee(ze);var Je=ze,_e=n(1359),qe=n(1330),He=n(1333),Ke=n(541),Ve=n.n(Ke),Ge=n(1331),Ze=n(1332),$e=n(1329),Qe=Object(l.a)((function(e){return{content:{paddingTop:0,paddingBottom:0}}}));var Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.open,n=e.onClose,a=e.content,s=e.actions,c=Qe(),i=Object(p.a)(),o=Object($e.a)(i.breakpoints.down("xs"));return Object(r.jsxs)(qe.a,{fullScreen:o,fullWidth:!0,maxWidth:"xs",open:t,onClose:n,children:[Object(r.jsxs)(N.a,{alignItems:"center",display:"flex",px:2,height:i.sav3.topBar.height,children:[Object(r.jsx)(N.a,{flexGrow:1,children:Object(r.jsx)(Ge.a,{onClick:n,children:Object(r.jsx)(Ve.a,{})})}),o&&Object(r.jsx)(N.a,{px:1,children:s})]}),Object(r.jsx)(Ze.a,{}),Object(r.jsx)(He.a,{className:c.content,children:a}),!o&&Object(r.jsxs)("div",{children:[Object(r.jsx)(Ze.a,{}),Object(r.jsxs)(N.a,{alignItems:"center",display:"flex",px:3,height:i.sav3.topBar.height,children:[Object(r.jsx)(N.a,{flexGrow:1}),Object(r.jsx)(N.a,{children:s})]})]})]})},Ye=function(e){ce()(!e||"string"===typeof e,"invalid ipnsPath '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)(),n=Object(d.a)(t,2),r=n[0],s=n[1];return console.log("useUserIpnsData",{ipnsPath:e,userIpnsData:r}),Object(a.useEffect)((function(){if(e){var t=function(){var t=Object(G.a)(V.a.mark((function t(n,r){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e===n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Je.getIpfsFile(r);case 4:a=t.sent,s(JSON.parse(a));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Je.on("publish",t),Object(G.a)(V.a.mark((function t(){var n,r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Je.subscribeToIpnsPath(e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Je.getIpfsFile(n);case 7:r=t.sent,s(JSON.parse(r));case 9:case"end":return t.stop()}}),t)})))(),function(){Je.off("publish",t)}}}),[e]),r},et=function(e){ce()(!e||"string"===typeof e,"invalid userCid '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)({}),n=Object(d.a)(t,2),r=n[0],s=n[1],c=Ye(e),i=c&&c.profileCid;return console.log("useUserProfile",{userIpnsData:c,userCid:e,profileCid:i,userProfile:r}),Object(a.useEffect)((function(){i&&"string"===typeof i&&Object(G.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.getUserProfile(i);case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})))()}),[i]),r},tt=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.getOwnUserCid();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},nt=n(1363),rt=Object(l.a)((function(e){return{errorMessage:{overflow:"hidden"},content:{"& textarea":{overflow:"hidden"},"& fieldset":{border:"none"},marginBottom:e.spacing(1)},avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor}}}));var at=function(e){var t=e.open,n=e.onClose,s=H(),c=rt(),i=Object(a.useState)(""),o=Object(d.a)(i,2),u=o[0],l=o[1],p=Object(a.useState)(),f=Object(d.a)(p,2),b=f[0],h=f[1],j=tt(),v=et(j),x=function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.publishPost({content:u});case 3:h(null),l(null),n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),g=Object(r.jsxs)(N.a,{display:"flex",children:[Object(r.jsx)(N.a,{pr:1,py:1.5,children:Object(r.jsx)(nt.a,{src:v.thumbnailUrl,className:c.avatar})}),Object(r.jsx)(Z.a,{autoFocus:!0,className:c.content,onChange:function(e){var t=e.target.value;try{t.length>140&&(t=t.subtring(0,140)),l(t)}catch(n){}},margin:"dense",id:"content",placeholder:s["Uncensorable content"](),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",value:u}),b&&Object(r.jsx)(_e.a,{classes:{message:c.errorMessage},severity:"error",children:b})]}),O=Object(r.jsx)("div",{children:Object(r.jsx)(F.a,{disableElevation:!0,variant:"contained",onClick:x,color:"primary",children:"SAV3"})});return Object(r.jsx)(Xe,{onClose:n,open:t,content:g,actions:O})},st=Object(l.a)((function(e){return{logo:{height:"1.1em"},logoButton:{height:"2.2em",width:"2.2em"},createTextButtonBox:Object(i.a)({},e.breakpoints.down("md"),{display:"none"}),createIconButtonBox:Object(i.a)({},e.breakpoints.up("lg"),{display:"none"}),createIconButton:{boxShadow:"none"},text:Object(i.a)({},e.breakpoints.down("md"),{display:"none"}),root:Object(i.a)({},e.breakpoints.up("lg"),{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)})}}));function ct(){var e=st(),t=Object(a.useState)(!1),n=Object(d.a)(t,2),s=n[0],c=n[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(N.a,{my:2,mx:1,alignItems:"center",display:"flex",className:e.createTextButtonBox,onClick:function(){return c(!0)},children:Object(r.jsx)(F.a,{fullWidth:!0,variant:"contained",size:"large",disableElevation:!0,children:"SAV3"})}),Object(r.jsx)(N.a,{my:2,pl:1,alignItems:"center",display:"flex",className:e.createIconButtonBox,onClick:function(){return c(!0)},children:Object(r.jsx)(U.a,{className:e.createIconButton,size:"medium",children:Object(r.jsx)(B.a,{})})}),Object(r.jsx)(at,{open:s,onClose:function(){return c(!1)}})]})}var it=function(){var e=st(),t=H();return Object(r.jsx)("div",{className:e.root,children:Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(x.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Home(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/search",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(w.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Search(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/following",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(k.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Following(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/peers",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(P.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Peers(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/stats",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(S.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Stats(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/profile",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(O.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Profile(),className:e.text})]}),Object(r.jsx)(ct,{})]})})},ot=n(1341),ut=n(1342),lt=n(8),pt=Object(l.a)((function(e){return{root:{width:"100%",position:"fixed",bottom:0},createIconButtonBox:{right:e.spacing(4),bottom:e.spacing(8)},createIconButton:{}}}));function dt(){var e=pt(),t=Object(a.useState)(!1),n=Object(d.a)(t,2),s=n[0],c=n[1];return Object(r.jsxs)(N.a,{position:"absolute",className:e.createIconButtonBox,children:[Object(r.jsx)(N.a,{my:2,pl:1,alignItems:"center",display:"flex",className:e.createIconButton,onClick:function(){return c(!0)},children:Object(r.jsx)(U.a,{className:e.createIconButton,size:"large",children:Object(r.jsx)(B.a,{})})}),Object(r.jsx)(at,{open:s,onClose:function(){return c(!1)}})]})}var ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,n=pt(),a=Object(o.h)("/:route"),s=a&&a.params&&a.params.route?a.params.route:"home",c=t?Object(lt.a)(n.root,t):n.root;return Object(r.jsxs)(ot.a,{value:s,className:c,children:[Object(r.jsx)(dt,{}),Object(r.jsx)(ut.a,{component:A.b,to:"/",value:"home",icon:Object(r.jsx)(x.a,{})}),Object(r.jsx)(ut.a,{component:A.b,to:"/search",value:"search",icon:Object(r.jsx)(w.a,{})}),Object(r.jsx)(ut.a,{component:A.b,to:"/peers",value:"peers",icon:Object(r.jsx)(P.a,{})}),Object(r.jsx)(ut.a,{component:A.b,to:"/stats",value:"stats",icon:Object(r.jsx)(S.a,{})})]})},bt=n(1343),ht=n(547),jt=n(1362),vt="rgb(127, 127, 127, 0.05)",xt={breakpoints:{values:{xs:0,sm:682,md:960,lg:1280,xl:1920}},sav3:{layout:{columns:{left:{width:{md:275,sm:88,xs:68}},middle:{width:{md:600}},right:{width:{lg:350,md:290}}}},borderWidth:1,borderColor:vt,topBar:{height:54},drawerMenu:{width:280},popoverMenu:{borderRadius:4}},palette:{divider:vt},shape:{borderRadius:24},overrides:{MuiToolbar:{root:{minHeight:"".concat(54,"px!important")}},MuiDialog:{paper:{margin:0},paperFullWidth:{width:"100%"}},MuiSvgIcon:{fontSizeLarge:{fontSize:"1.8rem"}},MuiFab:{root:{boxShadow:"rgba(101, 119, 134, 0.2) 0px 0px 8px, rgba(101, 119, 134, 0.25) 0px 1px 3px 1px"}}}},gt=function(e){var t=Object(ht.a)(T()({},xt,e));return t=Object(jt.a)(t)},Ot={Light:gt(),Dark:gt({palette:{type:"dark"}}),"SAV3 Light":gt({palette:{primary:{light:"#7a7380",main:"#4e4854",dark:"#26212b"},secondary:{main:"#484854"}}})};Object.freeze(Ot);var mt=Ot,wt=Object(a.createContext)({theme:"Light",setTheme:null}),yt=function(e){var t=Object($e.a)("(prefers-color-scheme: dark)")?"Dark":"Light",n=localStorage.getItem("muiTheme")||t;mt[n]||(console.warn("no available theme for '".concat(n,"'")),n=t);var s=Object(a.useState)(n),c=Object(d.a)(s,2),i=c[0],o=c[1],u=mt[i],l={theme:i,setTheme:function(e){mt[e]?(localStorage.setItem("muiTheme",e),o(e)):console.warn("no available theme for '".concat(e,"'"))}},p=e.children;return Object(r.jsx)(wt.Provider,{value:l,children:Object(r.jsx)(bt.a,{theme:u,children:p})})},kt=n(1361),Ct=n(1344);var St=function(){var e=Object(a.useContext)(wt),t=e.theme,n=e.setTheme,s=[];for(var c in mt)s.push(Object(r.jsx)(Ct.a,{value:c,children:c},c));return Object(r.jsx)(kt.a,{value:t,onChange:function(e){n(e.target.value)},label:"Theme",variant:"outlined",children:s})};var It=function(){var e=Object(a.useContext)(_),t=e.languageCode,n=e.setLanguageCode,s=[];for(var c in J)s.push(Object(r.jsx)(Ct.a,{value:c,children:c},c));return Object(r.jsx)(kt.a,{value:t,onChange:function(e){n(e.target.value)},label:"Translation",variant:"outlined",children:s})},Pt=n(1345),Ft=n(1346),Nt=Object(l.a)((function(e){var t;return{appBar:{backgroundColor:e.palette.background.default},appBarSticky:(t={position:"fixed",left:"auto",right:"auto"},Object(i.a)(t,e.breakpoints.up("xs"),{width:e.sav3.layout.columns.middle.width.md-2*e.sav3.borderWidth}),Object(i.a)(t,e.breakpoints.down("xs"),{width:"calc(100% - ".concat(2*e.sav3.borderWidth,"px)")}),t),appBarStickyAfter:{height:e.sav3.topBar.height+e.sav3.borderWidth}}}));var Rt=function(e){var t=e.children,n=Nt();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Pt.a,{position:"sticky",color:"transparent",elevation:0,classes:{positionSticky:n.appBarSticky},className:n.appBar,children:[Object(r.jsx)(Ft.a,{disableGutters:!0,children:t}),Object(r.jsx)(Ze.a,{})]}),Object(r.jsx)("div",{className:n.appBarStickyAfter})]})},Bt=n(104),Ut=n(122),At=n.n(Ut),Wt=n(1353),Tt=n(1351),Dt=n(252),Mt=n.n(Dt),Lt=n(1352),Et=n(1349),zt=n(1347),Jt=n(1348),_t=n(544),qt=n.n(_t),Ht=n(545),Kt=n.n(Ht),Vt=n(546),Gt=n.n(Vt),Zt=n(1350),$t=function(){return Object(a.useContext)(_).languageCode},Qt=n(205),Xt=n.n(Qt),Yt=n(548),en=n(542),tn=n.n(en),nn=n(543),rn=n.n(nn),an=n(19),sn=n.n(an),cn=new(function(){function e(){Object(X.a)(this,e),this.followingCache=ie.createInstance({name:"followingCache"}),this.blockedCache=ie.createInstance({name:"blockedCache"})}return Object(Y.a)(e,[{key:"addFollowing",value:function(){var e=Object(G.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.addFollowing invalid userCid '".concat(t,"'")),e.next=3,this.deleteBlocked(t);case 3:return e.next=5,this.followingCache.setItem(t,!0);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isFollowing",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.isFollowing invalid userCid '".concat(t,"'")),e.next=3,this.followingCache.getItem(t);case 3:return n=e.sent,e.abrupt("return",!!n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteFollowing",value:function(){var e=Object(G.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.deleteFollowing invalid userCid '".concat(t,"'")),e.next=3,this.followingCache.removeItem(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllFollowing",value:function(){return this.followingCache.keys()}},{key:"setAllFollowing",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()(Array.isArray(t),"FollowManager.setAllFollowing invalid userCids '".concat(t,"'")),e.next=3,this.followingCache.clear();case 3:n=Object(Q.a)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=12;break}return a=r.value,e.next=10,this.addFollowing(a);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addBlocked",value:function(){var e=Object(G.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.addBlocked invalid userCid '".concat(t,"'")),e.next=3,this.deleteFollowing(t);case 3:return e.next=5,this.blockedCache.setItem(t,!0);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isBlocked",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.isBlocked invalid userCid '".concat(t,"'")),e.next=3,this.blockedCache.getItem(t);case 3:return n=e.sent,e.abrupt("return",!!n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBlocked",value:function(){var e=Object(G.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.deleteBlocked invalid userCid '".concat(t,"'")),e.next=3,this.blockedCache.removeItem(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllBlocked",value:function(){return this.blockedCache.keys()}},{key:"setAllBlocked",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()(Array.isArray(t),"FollowManager.setAllBlocked invalid userCids '".concat(t,"'")),e.next=3,this.blockedCache.clear();case 3:n=Object(Q.a)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=12;break}return a=r.value,e.next=10,this.addBlocked(a);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()),on=cn;window.followManager=cn;var un=Object(a.createContext)(),ln=function(e){var t=Object(a.useState)({}),n=Object(d.a)(t,2),s=n[0],c=n[1],o=Object(a.useState)({}),u=Object(d.a)(o,2),l=u[0],p=u[1];Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,i,o,u,l,d;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,on.getAllFollowing();case 2:return t=e.sent,e.next=5,on.getAllBlocked();case 5:n=e.sent,r={},a=Object(Q.a)(t);try{for(a.s();!(s=a.n()).done;)i=s.value,r[i]=!0}catch(f){a.e(f)}finally{a.f()}c(r),o={},u=Object(Q.a)(n);try{for(u.s();!(l=u.n()).done;)d=l.value,o[d]=!0}catch(f){u.e(f)}finally{u.f()}p(o);case 14:case"end":return e.stop()}}),e)})))()}),[]);var f={following:s,addFollowing:function(e){ce()("string"===typeof e,"FollowingProvider.addFollowing invalid userCid '".concat(e,"'")),on.addFollowing(e),c((function(t){return Object($.a)(Object($.a)({},t),{},Object(i.a)({},e,!0))}))},deleteFollowing:function(e){ce()("string"===typeof e,"FollowingProvider.deleteFollowing invalid userCid '".concat(e,"'")),on.deleteFollowing(e),c((function(t){return Object($.a)(Object($.a)({},t),{},Object(i.a)({},e,!1))}))},setAllFollowing:function(e){ce()(Array.isArray(e),"FollowingProvider.setAllFollowing invalid userCids '".concat(e,"'")),on.setAllFollowing(e);var t,n={},r=Object(Q.a)(e);try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(a){r.e(a)}finally{r.f()}c(n)},blocked:l,addBlocked:function(e){ce()("string"===typeof e,"FollowingProvider.addBlocked invalid userCid '".concat(e,"'")),on.addBlocked(e),p((function(t){return Object($.a)(Object($.a)({},t),{},Object(i.a)({},e,!0))}))},deleteBlocked:function(e){ce()("string"===typeof e,"FollowingProvider.deleteBlocked invalid userCid '".concat(e,"'")),on.deleteBlocked(e),p((function(t){return Object($.a)(Object($.a)({},t),{},Object(i.a)({},e,!1))}))},setAllBlocked:function(e){ce()(Array.isArray(e),"FollowingProvider.setAllBlocked invalid userCids '".concat(e,"'")),on.setAllBlocked(e);var t,n={},r=Object(Q.a)(e);try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(a){r.e(a)}finally{r.f()}p(n)}},b=e.children;return Object(r.jsx)(un.Provider,{value:f,children:b})},pn=function(e){ce()(!e||"string"===typeof e,"useIsFollowing invalid userCid '".concat(e,"'"));var t=Object(a.useContext)(un),n=t.following,r=t.addFollowing,s=t.deleteFollowing,c=!!n[e],i=Object(a.useCallback)((function(t){e&&(ce()("boolean"===typeof t,"setIsFollowing invalid value '".concat(t,"' not a boolean")),!0===t&&r(e),!1===t&&s(e))}),[e]);return e?[c,i]:[void 0,i]},dn=Object(l.a)((function(e){return{menu:{"& .MuiPaper-rounded":{borderRadius:e.sav3.popoverMenu.borderRadius}},menuItemIcon:{minWidth:28}}}));function fn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userCid,n=dn(),a=H(),s=pn(t),c=Object(d.a)(s,2),i=c[0],o=c[1],u=Object(r.jsxs)(Ct.a,{onClick:function(){return o(!0)},children:[Object(r.jsx)(h.a,{className:n.menuItemIcon,children:Object(r.jsx)(tn.a,{fontSize:"small"})}),Object(r.jsx)(Bt.a,{children:a.Follow()})]});return i&&(u=Object(r.jsxs)(Ct.a,{onClick:function(){return o(!1)},children:[Object(r.jsx)(h.a,{className:n.menuItemIcon,children:Object(r.jsx)(rn.a,{fontSize:"small"})}),Object(r.jsx)(Bt.a,{children:a.Unfollow()})]})),u}fn.propTypes={userCid:sn.a.string.isRequired};var bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.post,n=dn(),s=Object(a.useState)(null),c=Object(d.a)(s,2),i=c[0],o=c[1],u=tt();if(t.userCid===u)return Object(r.jsx)(N.a,{height:48,width:48});var l=function(e){o(e.currentTarget)},p=function(){o(null)};return Object(r.jsxs)("div",{children:[Object(r.jsx)(Ge.a,{onClick:l,children:Object(r.jsx)(Mt.a,{})}),Object(r.jsx)(Yt.a,{className:n.menu,elevation:4,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:p,children:Object(r.jsx)(fn,{userCid:t.userCid})})]})},hn=Object(l.a)((function(e){return{root:{},imgMedia:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor},userCid:{wordBreak:"break-all",textDecoration:"inherit"},displayName:{color:"inherit",textDecoration:"inherit"}}}));function jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.content,n=hn(),a=[t],s=vn(t);if(s){var c=t.split(s),i=Object(d.a)(c,2),o=i[0],u=i[1],l=s;s.match(/$https?:\/\//)||(l="https://".concat(s)),a=[],o&&a.push(o),a.push(Object(r.jsx)(Zt.a,{variant:"body2",href:l,target:"_blank",rel:"noopener",children:s},"content link")),u&&a.push(u)}var p,f=xn(t);f&&(p=Object(r.jsx)(Tt.a,{className:n.imgMedia,image:f}),On(f)&&(p=Object(r.jsx)(Tt.a,{controls:!0,autoPlay:!0,muted:!0,component:"video",image:f})));var b=f&&Object(r.jsx)(N.a,{pt:1,children:Object(r.jsx)(Lt.a,{variant:"outlined",children:p})});return Object(r.jsxs)(N.a,{children:[Object(r.jsx)(Bt.a,{variant:"body2",children:a}),b]})}var vn=function(e){if(e){ce()("string"===typeof e,"post content '".concat(e,"' is not a string"));var t=e.match(Xt()({strict:!1}));return t&&t[0]}},xn=function(e){if(e){ce()("string"===typeof e,"post content '".concat(e,"' is not a string"));var t=e.match(Xt()({strict:!1})),n=t&&t[0];if(n)return n=gn(n),mn(n)?(n.match(/^https?:\/\//)||(n="https://".concat(n)),n):void 0}},gn=function(e){return ce()("string"===typeof e,"forceHttps link '".concat(e,"' not a string")),e=(e=e.trim()).replace(/^http:\/\//,"https://")},On=function(e){return e.replace(/[#?].*/).match(/\.(mp4|webm)$/)},mn=function(e){return e.replace(/[#?].*/).match(/\.(jpeg|jpg|png|gif|mp4|webm)$/)},wn=function(e,t){var n=864e5,r=1e3*e,a=new Date(r).toLocaleString(t,{month:"short",day:"numeric"});return Date.now()>r+31536e6&&(a=new Date(r).toLocaleString(t,{year:"numeric",month:"short",day:"numeric"})),Date.now()<r+n&&(a=Object(L.a)(r,t)),a},yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.post,n=$t(),s=hn(),c=Object(a.useState)(!1),o=Object(d.a)(c,2),u=o[0],l=o[1],p=function(){l(!u)},f=wn(t.timestamp,n);return Object(r.jsx)("div",{children:Object(r.jsxs)(N.a,{px:2,py:1.5,display:"flex",children:[Object(r.jsx)(N.a,{pr:1.5,children:Object(r.jsx)(nt.a,{component:A.b,to:{pathname:"/profile",state:{userCid:t.userCid}},src:t.profile.thumbnailUrl&&gn(t.profile.thumbnailUrl),className:s.avatar})}),Object(r.jsxs)(N.a,{width:"100%",children:[Object(r.jsxs)(N.a,{display:"flex",children:[Object(r.jsxs)(N.a,{flexGrow:1,children:[Object(r.jsxs)(N.a,{display:"flex",children:[t.profile.displayName&&Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(Bt.a,{className:s.displayName,component:A.b,to:{pathname:"/profile",state:{userCid:t.userCid}},variant:"subtitle2",children:t.profile.displayName}),"\xa0",Object(r.jsx)(Bt.a,{variant:"subtitle2",children:"\xb7"}),"\xa0"]}),Object(r.jsx)(Bt.a,{variant:"subtitle2",children:f})]}),Object(r.jsx)(N.a,{children:Object(r.jsx)(Bt.a,{component:A.b,to:{pathname:"/profile",state:{userCid:t.userCid}},variant:"caption",color:"textSecondary",className:s.userCid,children:t.userCid})})]}),Object(r.jsx)(N.a,{children:Object(r.jsx)(bn,{post:t})})]}),Object(r.jsx)(jn,{content:t.content}),Object(r.jsxs)(zt.a,{disableSpacing:!0,children:[Object(r.jsx)(Ge.a,{"aria-label":"add to favorites",children:Object(r.jsx)(qt.a,{})}),Object(r.jsx)(Ge.a,{"aria-label":"share",children:Object(r.jsx)(Kt.a,{})}),Object(r.jsx)(Ge.a,{className:Object(lt.a)(s.expand,Object(i.a)({},s.expandOpen,u)),onClick:p,"aria-expanded":u,"aria-label":"show more",children:Object(r.jsx)(Gt.a,{})})]}),Object(r.jsx)(Jt.a,{in:u,timeout:"auto",unmountOnExit:!0,children:Object(r.jsx)(Et.a,{})})]})]})})};var kn=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.posts,a=[],s=Object(Q.a)(n);try{for(s.s();!(e=s.n()).done;){var c=e.value;a.push(Object(r.jsx)(yn,{post:c},c.contentCid+c.timestamp)),a.push(Object(r.jsx)(Ze.a,{},c.contentCid+c.timestamp+"feed divider"))}}catch(i){s.e(i)}finally{s.f()}return Object(r.jsx)("div",{children:a})},Cn=function(e){ce()(!e||"string"===typeof e,"invalid userCid '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],s=n[1],c=Ye(e),i=et(e),o=c&&c.lastPostCid;return console.log("useUserPosts",{userIpnsData:c,userCid:e,userPosts:r}),Object(a.useEffect)((function(){o&&"string"===typeof o&&Object(G.a)(V.a.mark((function e(){var t,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.getUserPostsFromLastPostCid(o);case 2:for(n in t=e.sent)t[n].profile=i||{};s(t);case 5:case"end":return e.stop()}}),e)})))()}),[o,JSON.stringify(i)]),r};var Sn=function(e){if(e){ce()("string"===typeof e,"user description '".concat(e,"' is not a string"));var t=e.match(Xt()({strict:!1}));return t&&t[0]}},In=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.description,n=[t],a=Sn(t);if(a){var s=t.split(a),c=Object(d.a)(s,2),i=c[0],o=c[1],u=a;a.match(/$https?:\/\//)||(u="https://".concat(a)),n=[],i&&n.push(i),n.push(Object(r.jsx)(Zt.a,{variant:"body2",href:u,target:"_blank",rel:"noopener",children:a})),o&&n.push(o)}return Object(r.jsx)(Bt.a,{variant:"body2",children:n})},Pn=Object(l.a)((function(e){return{errorMessage:{overflow:"hidden"},description:{"& textarea":{overflow:"hidden"}},content:{"& input":{padding:e.spacing(2),paddingLeft:e.spacing(2.5),paddingRight:e.spacing(2.5)},'& label[data-shrink="false"]':{transform:"translate(20px, 18px) scale(1)"},"& textarea":{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5)},"& fieldset":{opacity:.25},"& .Mui-focused fieldset":{opacity:1}}}}));var Fn=function(e){var t=e.open,n=e.onClose,s=e.previousProfile,c=H(),o=Pn(),u=Object(a.useState)(s),l=Object(d.a)(u,2),p=l[0],f=l[1],b=Object(a.useState)(),h=Object(d.a)(b,2),j=h[0],v=h[1];Object(a.useEffect)((function(){f(s)}),[JSON.stringify(s)]);var x=function(e){var t=e.target,n=t.id,r=t.value,a=Object($.a)(Object($.a)({},p),{},Object(i.a)({},n,r));f(a)},g=function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.editUserProfile(p);case 3:v(null),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),O=Object(r.jsxs)(N.a,{pt:1,pb:1.5,className:o.content,children:[Object(r.jsx)(Z.a,{onChange:x,autoFocus:!0,margin:"dense",id:"displayName",label:c["Display name"](),fullWidth:!0,variant:"outlined",value:p.displayName||""}),Object(r.jsx)(Z.a,{onChange:x,margin:"dense",id:"thumbnailUrl",label:c["Thumbnail URL"](),fullWidth:!0,variant:"outlined",value:p.thumbnailUrl||""}),Object(r.jsx)(Z.a,{onChange:x,margin:"dense",id:"bannerUrl",label:c["Banner URL"](),fullWidth:!0,variant:"outlined",value:p.bannerUrl||""}),Object(r.jsx)(Z.a,{className:o.description,onChange:x,margin:"dense",id:"description",label:c.Description(),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",value:p.description||""}),j&&Object(r.jsx)(_e.a,{classes:{message:o.errorMessage},severity:"error",children:j})]}),m=Object(r.jsx)("div",{children:Object(r.jsx)(F.a,{disableElevation:!0,variant:"contained",onClick:g,color:"primary",children:"SAV3"})});return Object(r.jsx)(Xe,{open:t,onClose:n,content:O,actions:m})},Nn="data:image/png;base64,",Rn=Object(l.a)((function(e){return{banner:{paddingTop:"33.25%"},avatar:Object(i.a)({position:"absolute",width:e.sav3.layout.columns.middle.width.md/4,height:e.sav3.layout.columns.middle.width.md/4,marginTop:e.sav3.layout.columns.middle.width.md/-8,marginLeft:e.spacing(2),borderWidth:e.spacing(.5),borderStyle:"solid",borderColor:e.palette.background.default},e.breakpoints.down(e.sav3.layout.columns.middle.width.md),{width:"25vw",height:"25vw",marginTop:"-12.5vw",borderWidth:e.spacing(.25)}),displayName:{wordBreak:"break-all"}}}));function Bn(e){var t=e.profile,n=H(),s=Object(a.useState)(!1),c=Object(d.a)(s,2),i=c[0],o=c[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(F.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){return o(!0)},children:n["Edit profile"]()}),Object(r.jsx)(Fn,{previousProfile:t,open:i,onClose:function(){return o(!1)}})]})}function Un(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userCid,n=H(),a=pn(t),s=Object(d.a)(a,2),c=s[0],i=s[1],o=Object(r.jsx)(F.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){return i(!0)},children:n.Follow()});return c&&(o=Object(r.jsx)(F.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){return i(!1)},children:n.Unfollow()})),o}Un.propTypes={userCid:sn.a.string.isRequired};var An=function(e){return ce()("string"===typeof e,"forceHttps link '".concat(e,"' not a string")),e=(e=e.trim()).replace(/^http:\/\//,"https://")},Wn=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userCid,a=tt(),s=Rn(),c=Cn(n),i=et(n);H(),console.log("Profile",{userCid:n,posts:c,profile:i}),n===a?e=Object(r.jsx)(Bn,{profile:i}):a&&(e=Object(r.jsx)(Un,{userCid:n}));var o=i.description||"";return o&&o.length>140&&(o=o.substring(0,140)),Object(r.jsxs)("div",{className:s.root,children:[Object(r.jsx)(Tt.a,{className:s.banner,image:i.bannerUrl&&An(i.bannerUrl)||Nn}),Object(r.jsx)(nt.a,{src:i.thumbnailUrl&&An(i.thumbnailUrl),className:s.avatar}),Object(r.jsxs)(N.a,{p:2,pb:0,display:"flex",flexDirection:"row-reverse",children:[e,Object(r.jsx)(Ge.a,{children:Object(r.jsx)(Mt.a,{})})]}),Object(r.jsx)(Wt.a,{className:s.displayName,pb:0,title:i.displayName,subheader:n}),Object(r.jsx)(N.a,{p:2,pt:0,children:Object(r.jsx)(In,{description:o})}),Object(r.jsx)(Ze.a,{}),Object(r.jsx)(kn,{posts:c})]})};var Tn=function(){var e,t=Object(o.g)(),n=t.state&&t.state.userCid,a=!n,s=tt(),c=et(e=a?s:n),i=Object(o.f)(),u=H();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Rt,{children:[Object(r.jsx)(N.a,{pr:1,children:Object(r.jsx)(Ge.a,{onClick:function(){return i.goBack()},children:Object(r.jsx)(At.a,{})})}),Object(r.jsx)(Bt.a,{noWrap:!0,variant:"h6",children:c.displayName||a&&u["Edit profile"]()})]}),Object(r.jsx)(Wn,{userCid:e})]})},Dn=n(69),Mn=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.getOwnPeerCid();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},Ln=n(1364),En=Object(l.a)((function(e){return{text:{},root:{width:e.sav3.drawerMenu.width}}}));var zn=function(){var e=En(),t=H();return Object(r.jsx)("div",{className:e.root,children:Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/following",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(k.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Following(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/profile",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(O.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Profile(),className:e.text})]}),Object(r.jsxs)(b.a,{children:[Object(r.jsx)(St,{}),Object(r.jsx)(It,{})]})]})})},Jn=Object(l.a)((function(e){return{avatar:{width:e.sav3.topBar.height/1.75,height:e.sav3.topBar.height/1.75}}}));var _n=function(){var e=Mn(),t=Jn(),n=et(e),s=Object(a.useState)(!1),c=Object(d.a)(s,2),i=c[0],o=c[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(Ge.a,{style:{backgroundColor:"transparent"},disableRipple:!0,disableFocusRipple:!0,onClick:function(){return o(!0)},children:Object(r.jsx)(nt.a,{src:n.thumbnailUrl,className:t.avatar})}),Object(r.jsx)(Ln.a,{achor:"left",elevation:2,open:i,onClose:function(){return o(!1)},children:Object(r.jsx)(zn,{})})]})},qn=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,on.getAllFollowing();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},Hn=function(e){ce()(Array.isArray(e),"invalid ipnsPaths '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)({}),n=Object(d.a)(t,2),r=n[0],s=n[1];return console.log("useUsersIpnsData",{ipnsPaths:e,usersIpnsData:r}),Object(a.useEffect)((function(){if(e.length){var t=new Set(e),n=function(){var e=Object(G.a)(V.a.mark((function e(n,r){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.has(n)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Je.getIpfsFile(r);case 4:a=e.sent,s((function(e){return Object($.a)(Object($.a)({},e),{},Object(i.a)({},n,JSON.parse(a)))}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Je.on("publish",n),Object(G.a)(V.a.mark((function t(){var n,r,a,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Je.subscribeToIpnsPaths(e);case 2:n=t.sent,r=Object(Q.a)(n.entries()),t.prev=4,c=function(){var t=Object(d.a)(a.value,2),n=t[0],r=t[1];if(!r)return"continue";var c=e[n];Je.getIpfsFile(r).then((function(e){s((function(t){return Object($.a)(Object($.a)({},t),{},Object(i.a)({},c,JSON.parse(e)))}))}))},r.s();case 7:if((a=r.n()).done){t.next=13;break}if("continue"!==c()){t.next=11;break}return t.abrupt("continue",11);case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),r.e(t.t0);case 18:return t.prev=18,r.f(),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[4,15,18,21]])})))(),function(){Je.off("publish",n)}}}),[JSON.stringify(e)]),r},Kn=function(e){ce()(Array.isArray(e),"invalid userCids '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)({}),n=Object(d.a)(t,2),r=n[0],s=n[1],c=Hn(e),o=[];for(var u in c)o.push(c[u].profileCid);return console.log("useUsersProfiles",{usersIpnsData:c,userCids:e,profileCids:o,usersProfiles:r}),Object(a.useEffect)((function(){if(o.length){var t,n=Object(Q.a)(o.entries());try{var r=function(){var n=Object(d.a)(t.value,2),r=n[0],a=n[1];if(!a||"string"!==typeof a)return{v:void 0};var c=e[r];Je.getUserProfile(a).then((function(e){s((function(t){return Object($.a)(Object($.a)({},t),{},Object(i.a)({},c,e))}))}))};for(n.s();!(t=n.n()).done;){var a=r();if("object"===typeof a)return a.v}}catch(c){n.e(c)}finally{n.f()}}}),[JSON.stringify(o)]),r},Vn=function(e){ce()(Array.isArray(e),"invalid userCids '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],s=n[1],c=Hn(e),i=Kn(e),o=[];for(var u in c)o.push(c[u].lastPostCid);return console.log("useUsersPosts",{usersIpnsData:c,userCids:e,lastPostCids:o,usersPosts:r}),Object(a.useEffect)((function(){if(o.length){var t,n=Object(Q.a)(o.entries());try{var r=function(){var n=Object(d.a)(t.value,2),r=n[0],a=n[1];if(!a||"string"!==typeof a)return"continue";var c=e[r];Je.getUserPostsFromLastPostCid(a).then((function(e){var t,n={},r=Object(Q.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.profile=i[c]||{},n[a.cid]=a}}catch(o){r.e(o)}finally{r.f()}s((function(e){return Object($.a)(Object($.a)({},e),n)}))}))};for(n.s();!(t=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}}}),[JSON.stringify(o),JSON.stringify(i)]),r},Gn=Object(l.a)((function(e){return{errorMessage:{overflow:"hidden"},content:{"& textarea":{overflow:"hidden"},"& fieldset":{border:"none"},"& .MuiInputBase-root":{paddingLeft:0,paddingRight:0},marginBottom:e.spacing(1)},contentInput:{paddingTop:0,paddingBottom:0},avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor}}}));var Zn=function(){var e=H(),t=Gn(),n=Object(p.a)(),s=tt(),c=et(s),i=Object(a.useState)(""),o=Object(d.a)(i,2),u=o[0],l=o[1],f=Object(a.useState)(),b=Object(d.a)(f,2),h=b[0],j=b[1],v=function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.publishPost({content:u});case 3:j(null),l(""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),x=Object(r.jsxs)("div",{children:[Object(r.jsx)(N.a,{children:Object(r.jsx)(Ze.a,{})}),Object(r.jsxs)(N.a,{alignItems:"center",display:"flex",height:n.sav3.topBar.height,children:[Object(r.jsx)(N.a,{flexGrow:1}),Object(r.jsx)(F.a,{disableElevation:!0,variant:"contained",onClick:v,color:"primary",children:"SAV3"})]})]});return Object(r.jsxs)(N.a,{px:2,display:"flex",children:[Object(r.jsx)(N.a,{pr:1.5,py:1.5,children:Object(r.jsx)(nt.a,{src:c.thumbnailUrl,className:t.avatar})}),Object(r.jsxs)(N.a,{pt:1,width:"100%",children:[Object(r.jsx)(Z.a,{className:t.content,onChange:function(e){var t=e.target.value;try{t.length>140&&(t=t.subtring(0,140)),l(t)}catch(n){}},margin:"dense",id:"content",placeholder:e["Uncensorable content"](),fullWidth:!0,multiline:!0,variant:"outlined",value:u}),h&&Object(r.jsx)(N.a,{py:1,children:Object(r.jsx)(_e.a,{classes:{message:t.errorMessage},severity:"error",children:h})}),x]})]})},$n=n(1354);var Qn=function(){var e=Object(p.a)(),t=Object($e.a)(e.breakpoints.down("xs")),n=H(),a=qn(),s=tt(),c=Vn([s].concat(Object(Dn.a)(a))),i=[];for(var o in c)i.push(c[o]);console.log("Home",{followingCids:a,posts:i,postsObject:c});var u=Object(r.jsx)(kn,{posts:i});return i.length||(u=Object(r.jsxs)(N.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(r.jsx)($n.a,{size:24}),Object(r.jsx)(N.a,{p:.5}),Object(r.jsx)(Bt.a,{variant:"body1",children:n["Connecting to peers"]()+"..."})]})),i.length||a.length||(u=Object(r.jsx)(N.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:Object(r.jsx)(Bt.a,{variant:"body1",children:n["Not following anyone"]()+"..."})})),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Rt,{children:[t&&Object(r.jsx)(N.a,{pl:2,pr:1,children:Object(r.jsx)(_n,{})}),Object(r.jsx)(N.a,{pl:2,children:Object(r.jsx)(Bt.a,{noWrap:!0,variant:"h6",children:n.Home()})})]}),!t&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(N.a,{pb:1,children:[Object(r.jsx)(Zn,{}),Object(r.jsx)(Ze.a,{})]}),Object(r.jsx)(Ze.a,{})]}),u]})},Xn=n(1355),Yn=n(91),er=n.n(Yn),tr=Object(l.a)((function(e){return{search:{height:e.sav3.topBar.height/1.5,"& fieldset":{border:"none",backgroundColor:e.palette.divider}}}}));var nr=function(){var e=tr(),t=Object(p.a)(),n=Object($e.a)(t.breakpoints.down("xs")),s=Object(a.useState)(),c=Object(d.a)(s,2),i=c[0],o=c[1],u=H();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Rt,{children:[Object(r.jsx)(N.a,{pl:n?2:4,children:n&&Object(r.jsx)(N.a,{pr:.5,children:Object(r.jsx)(_n,{})})}),Object(r.jsx)(N.a,{width:"100%",pl:0,pr:4,children:Object(r.jsx)(Z.a,{onChange:function(e){var t=e.target.value;try{t=t.trim(),o(t)}catch(n){}},InputProps:{spellCheck:!1,classes:{root:e.search},startAdornment:Object(r.jsx)(N.a,{pr:1,children:Object(r.jsx)(Xn.a,{position:"start",children:Object(r.jsx)(w.a,{})})})},variant:"outlined",fullWidth:!0,placeholder:u["Search user ID"](),values:i})})]}),er.a.cid(i)&&Object(r.jsx)(Wn,{userCid:i})]})},rr=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),c=Object(d.a)(s,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){setInterval((function(){o(i+1)}),2e3)}),[]),Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.getPeersCids();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[i]),n};var ar=function(){var e=Object(p.a)(),t=Object($e.a)(e.breakpoints.down("xs")),n=H(),a=Object(o.f)(),s=tt(),c=rr(),i=Vn([s].concat(Object(Dn.a)(c))),u=[];for(var l in i)u.push(i[l]);console.log("Peers",{peersCids:c,posts:u,postsObject:i});var d=Object(r.jsx)(kn,{posts:u});return u.length||(d=Object(r.jsxs)(N.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(r.jsx)($n.a,{size:24}),Object(r.jsx)(N.a,{p:.5}),Object(r.jsx)(Bt.a,{variant:"body1",children:n["Connecting to peers"]()+"..."})]})),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Rt,{children:[Object(r.jsx)(N.a,{pr:1,children:Object(r.jsx)(Ge.a,{onClick:function(){return a.goBack()},children:Object(r.jsx)(At.a,{})})}),Object(r.jsx)(Bt.a,{noWrap:!0,variant:"h6",children:n["Connected peers posts"]()})]}),!t&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(N.a,{pb:1,children:[Object(r.jsx)(Zn,{}),Object(r.jsx)(Ze.a,{})]}),Object(r.jsx)(Ze.a,{})]}),d]})},sr=new Set,cr=pe({name:"ipIsoCountryCodeCache",maxSize:2e3}),ir=function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr.get(t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n);case 5:throw sr.has(t)||(sr.add(t),or(t).then((function(e){return cr.set(t,e)})).catch((function(e){return console.log(e)}))),Error("iso country code for ip '".concat(t,"' not cached yet"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),or=function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"invalid ip '".concat(t,"' not a string")),n="https://ipapi.co/".concat(t,"/country/"),e.prev=2,e.next=5,fetch(n);case 5:return a=e.sent,e.next=8,a.text();case 8:a=e.sent,r=a.trim().toUpperCase(),ur(r),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(2),e.t0.message="failed getting country iso code from '".concat(n,"' response '").concat(a,"': ").concat(e.t0.message),e.t0;case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),ur=function(e){var t=typeof e;ce()(/^[a-z]{2}$/i.test(e),"isoCountryCode must be an ISO 3166-1 alpha-2 string, but got '".concat("string"===t?e:t,"' instead"))},lr={getIsoCountryCodeFromIpCached:ir,getIsoCountryCodeFromIp:or,getIsoCountryCodesFromIps:function(e){var t,n=[],r=Object(Q.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(or(a))}}catch(s){r.e(s)}finally{r.f()}return Promise.all(n)},isoCountryCodeToCountryFlagEmoji:function(e){ur(e);var t=Object(Dn.a)(e.toUpperCase()).map((function(e){return e.charCodeAt()+127397}));return String.fromCodePoint.apply(String,Object(Dn.a)(t))}},pr=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),c=Object(d.a)(s,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){setInterval((function(){o(i+1)}),5e3)}),[]),Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t,n,a,s,c,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.getPeersStats();case 2:t=e.sent,n=Object(Q.a)(t),e.prev=4,n.s();case 6:if((a=n.n()).done){e.next=26;break}if((s=a.value).ip){e.next=10;break}return e.abrupt("continue",24);case 10:return c=void 0,e.prev=11,e.next=14,lr.getIsoCountryCodeFromIpCached(s.ip);case 14:c=e.sent,e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(11),console.log(e.t0),e.abrupt("continue",24);case 21:i=lr.isoCountryCodeToCountryFlagEmoji(c),s.isoCountryCode=c,s.countryFlagEmoji=i;case 24:e.next=6;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(4),n.e(e.t1);case 31:return e.prev=31,n.f(),e.finish(31);case 34:r(t);case 35:case"end":return e.stop()}}),e,null,[[4,28,31,34],[11,17]])})))()}),[i]),n},dr=n(350),fr=n.n(dr),br=Object(l.a)((function(e){return{avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor,backgroundColor:e.palette.background.default},userCid:{wordBreak:"break-all"}}}));var hr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.peer,n=br();return Object(r.jsx)("div",{children:Object(r.jsxs)(N.a,{px:2,py:1.5,display:"flex",children:[Object(r.jsx)(N.a,{pr:1.5,children:Object(r.jsx)(nt.a,{className:n.avatar,children:t.countryFlagEmoji})}),Object(r.jsxs)(N.a,{width:"100%",children:[Object(r.jsxs)(N.a,{display:"flex",children:[Object(r.jsxs)(N.a,{flexGrow:1,children:[Object(r.jsx)(N.a,{display:"flex",children:Object(r.jsxs)(Bt.a,{variant:"subtitle2",children:[t.ip,":",t.port]})}),Object(r.jsx)(N.a,{children:Object(r.jsx)(Bt.a,{variant:"caption",color:"textSecondary",className:n.userCid,children:t.peerCid})})]}),Object(r.jsx)(N.a,{height:48})]}),Object(r.jsxs)(Bt.a,{variant:"body2",children:["\u2b06\ufe0f",fr()(t.dataSent),"\xa0\xa0\u2b07\ufe0f",fr()(t.dataReceived)]})]})]})})};function jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.peers,n=H();if(!t.length)return Object(r.jsxs)(N.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(r.jsx)($n.a,{size:24}),Object(r.jsx)(N.a,{p:.5}),Object(r.jsx)(Bt.a,{variant:"body1",children:n["Connecting to peers"]()+"..."})]});var a,s=[],c=Object(Q.a)(t);try{for(c.s();!(a=c.n()).done;){var i=a.value;s.push(Object(r.jsx)(hr,{peer:i},i.peerCid+i.port)),s.push(Object(r.jsx)(Ze.a,{},i.peerCid+i.port+"feed divider"))}}catch(o){c.e(o)}finally{c.f()}return Object(r.jsx)("div",{children:s})}var vr=function(){var e=H(),t=Object(o.f)(),n=pr();return console.log("Stats",{peers:n}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Rt,{children:[Object(r.jsx)(N.a,{pr:1,children:Object(r.jsx)(Ge.a,{onClick:function(){return t.goBack()},children:Object(r.jsx)(At.a,{})})}),Object(r.jsx)(Bt.a,{noWrap:!0,variant:"h6",children:e["Connected peers stats"]()})]}),Object(r.jsx)(jr,{peers:n})]})},xr=Object(l.a)((function(e){return{avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor,backgroundColor:e.palette.background.default},userCid:{wordBreak:"break-all"}}}));var gr=function(e){return ce()("string"===typeof e,"forceHttps link '".concat(e,"' not a string")),e=(e=e.trim()).replace(/^http:\/\//,"https://")},Or=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,n=xr(),a=H(),s=pn(t.cid),c=Object(d.a)(s,2),i=c[0],o=c[1],u=Object(r.jsx)(F.a,{variant:"outlined",size:"small",color:"primary",onClick:function(){return o(!0)},children:a.Follow()});return i&&(u=Object(r.jsx)(F.a,{variant:"outlined",size:"small",color:"primary",onClick:function(){return o(!1)},children:a.Unfollow()})),Object(r.jsx)("div",{children:Object(r.jsxs)(N.a,{px:2,py:1.5,display:"flex",children:[Object(r.jsx)(N.a,{pr:1.5,children:Object(r.jsx)(nt.a,{src:t.thumbnailUrl&&gr(t.thumbnailUrl),className:n.avatar})}),Object(r.jsxs)(N.a,{width:"100%",children:[Object(r.jsxs)(N.a,{display:"flex",children:[Object(r.jsxs)(N.a,{flexGrow:1,children:[Object(r.jsx)(N.a,{display:"flex",children:Object(r.jsx)(Bt.a,{variant:"subtitle2",children:t.displayName})}),Object(r.jsx)(N.a,{children:Object(r.jsx)(Bt.a,{variant:"caption",color:"textSecondary",className:n.userCid,children:t.cid})})]}),Object(r.jsx)(N.a,{height:48,children:u})]}),Object(r.jsx)(Bt.a,{variant:"body2",children:t.description})]})]})})};var mr=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.users,a=[],s=Object(Q.a)(n);try{for(s.s();!(e=s.n()).done;){var c=e.value;a.push(Object(r.jsx)(Or,{user:c},c.cid)),a.push(Object(r.jsx)(Ze.a,{},c.cid+"feed divider"))}}catch(i){s.e(i)}finally{s.f()}return Object(r.jsx)("div",{children:a})};var wr=function(){var e,t=H(),n=Object(o.f)(),a=qn(),s=Kn(a),c=[],i=Object(Q.a)(a);try{for(i.s();!(e=i.n()).done;){var u=e.value,l=s[u]||{};l.cid=u,c.push(l)}}catch(p){i.e(p)}finally{i.f()}return console.log("Following",{followingCids:a,profiles:s,users:c}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Rt,{children:[Object(r.jsx)(N.a,{pr:1,children:Object(r.jsx)(Ge.a,{onClick:function(){return n.goBack()},children:Object(r.jsx)(At.a,{})})}),Object(r.jsx)(Bt.a,{noWrap:!0,variant:"h6",children:t.Following()})]}),Object(r.jsx)(mr,{users:c})]})},yr=Object(l.a)((function(e){var t,n,r;return{leftColumn:(t={overflow:"hidden"},Object(i.a)(t,e.breakpoints.down("xs"),{display:"none"}),Object(i.a)(t,e.breakpoints.down("md"),{width:e.sav3.layout.columns.left.width.xs}),Object(i.a)(t,e.breakpoints.down("lg"),{width:e.sav3.layout.columns.left.width.xs}),Object(i.a)(t,e.breakpoints.up("lg"),{width:e.sav3.layout.columns.left.width.md}),t),middleColumn:(n={overflow:"hidden"},Object(i.a)(n,e.breakpoints.down("xs"),{width:"100%"}),Object(i.a)(n,e.breakpoints.up("xs"),{width:e.sav3.layout.columns.middle.width.md}),Object(i.a)(n,"borderLeftWidth",e.sav3.borderWidth),Object(i.a)(n,"borderRightWidth",e.sav3.borderWidth),Object(i.a)(n,"borderTopWidth",0),Object(i.a)(n,"borderBottomWidth",0),Object(i.a)(n,"borderStyle","solid"),Object(i.a)(n,"borderColor",e.sav3.borderColor),n),rightColumn:(r={overflow:"hidden"},Object(i.a)(r,e.breakpoints.down("sm"),{display:"none"}),Object(i.a)(r,e.breakpoints.down("lg"),{width:e.sav3.layout.columns.right.width.md,paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),Object(i.a)(r,e.breakpoints.up("lg"),{width:e.sav3.layout.columns.right.width.lg,paddingLeft:e.spacing(4),paddingRight:e.spacing(4)}),r),bottomMenu:Object(i.a)({},e.breakpoints.up("sm"),{display:"none"}),appBar:{backgroundColor:e.palette.background.default}}}));var kr=function(){var e=yr(),t=Object(p.a)();return window.theme=t,Object(r.jsxs)("div",{children:[Object(r.jsxs)(u.a,{container:!0,justify:"center",children:[Object(r.jsx)(u.a,{item:!0,className:e.leftColumn,children:Object(r.jsx)(it,{})}),Object(r.jsx)(u.a,{item:!0,className:e.middleColumn,children:Object(r.jsxs)(o.c,{children:[Object(r.jsx)(o.a,{path:"/",exact:!0,children:Object(r.jsx)(Qn,{})}),Object(r.jsx)(o.a,{path:"/profile",exact:!0,children:Object(r.jsx)(Tn,{})}),Object(r.jsx)(o.a,{path:"/search",exact:!0,children:Object(r.jsx)(nr,{})}),Object(r.jsx)(o.a,{path:"/peers",exact:!0,children:Object(r.jsx)(ar,{})}),Object(r.jsx)(o.a,{path:"/stats",exact:!0,children:Object(r.jsx)(vr,{})}),Object(r.jsx)(o.a,{path:"/following",exact:!0,children:Object(r.jsx)(wr,{})})]})}),Object(r.jsxs)(u.a,{item:!0,className:e.rightColumn,children:[Object(r.jsx)(St,{}),Object(r.jsx)(It,{})]})]}),Object(r.jsx)(ft,{className:e.bottomMenu})]})},Cr=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1367)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))},Sr=n(1357);c.a.render(Object(r.jsx)(A.a,{children:Object(r.jsx)(yt,{children:Object(r.jsx)(q,{children:Object(r.jsxs)(ln,{children:[Object(r.jsx)(Sr.a,{}),Object(r.jsx)(kr,{})]})})})}),document.getElementById("root")),Cr()},270:function(e,t){},325:function(e,t){},540:function(e,t,n){"use strict";(function(e){var r=n(347),a=n(28),s=n(1),c=n.n(s),i=n(10),o=n(118),u=n(93),l=n(240),p=n(254),d=n(13),f=n.n(d),b=n(345),h=n.n(b),j=n(38),v=n.n(j),x=n(88),g=n.n(x),O=n(52),m=n.n(O),w=n(164),y=n.n(w),k=n(29),C=n.n(k),S=n(26),I=n.n(S),P=n(91),F=n.n(P),N=n(243),R=n.n(N),B=function(t){Object(l.a)(r,t);var n=Object(p.a)(r);function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.ipfs;return Object(o.a)(this,r),e=n.call(this),f()(a&&"object"===typeof a),e.ipfs=a,e.privateKey=null,e.webSocketClient=null,e.peerCid=null,e.url="https://ipns.sav3.org",e.subscriptionIpnsValueCache=new R.a({maxSize:1e4}),e.start(),e}return Object(u.a)(r,[{key:"start",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()(null===this.webSocketClient),this.webSocketClient=h()(this.url),e.next=4,this.ipfs.key.export("self","password");case 4:return t=e.sent,e.next=7,g.a.keys.import(t,"password");case 7:return this.privateKey=e.sent,e.next=10,this.ipfs.id();case 10:this.peerCid=e.sent.id,this.webSocketClient.on("publish",function(){var e=Object(i.a)(c.a.mark((function e(t,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,r);case 2:a=e.sent,n.subscriptionIpnsValueCache.set(t,a),n.emit("publish",t,a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.webSocketClient.close();case 2:this.webSocketClient=null;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isReady",value:function(){return this.webSocketClient&&this.privateKey}},{key:"waitForReady",value:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isReady()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y()(10);case 4:return e.next=6,this.waitForReady();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,s,i,o,u,l,p,d,b=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()(Array.isArray(t)),e.next=3,this.waitForReady();case 3:n=!0,r=[],s=Object(a.a)(t);try{for(s.s();!(i=s.n()).done;)o=i.value,u=this.subscriptionIpnsValueCache.get(o),r.push(u),u||(n=!1)}catch(c){s.e(c)}finally{s.f()}if(!n){e.next=10;break}return console.log("ipns.subscribe",{allResultsAreCached:n,ipnsPaths:t,cachedIpnsValues:r}),e.abrupt("return",r);case 10:return e.next=12,new Promise((function(e){return b.webSocketClient.emit("subscribe",t,e)}));case 12:return l=e.sent,e.next=15,U(t,l);case 15:for(d in p=e.sent,t)this.subscriptionIpnsValueCache.set(t[d],p[d]);return console.log("ipns.subscribe",{allResultsAreCached:n,ipnsPaths:t,ipnsValues:p}),e.abrupt("return",p);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()(Array.isArray(t)),e.next=3,this.waitForReady();case 3:return e.next=5,new Promise((function(e){return a.webSocketClient.emit("resolve",t,e)}));case 5:return n=e.sent,e.next=8,W(t,n);case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()(Array.isArray(t)),e.next=3,this.waitForReady();case 3:n=Object(a.a)(t);try{for(n.s();!(r=n.n()).done;)s=r.value,this.subscriptionIpnsValueCache.delete(s)}catch(c){n.e(c)}finally{n.f()}return e.next=7,this.webSocketClient.emit("unsubscribe",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publish",value:function(){var t=Object(i.a)(c.a.mark((function t(){var n,r,a,s,i,o,u,l=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:{},r=n.value,a=n.sequence,f()("string"===typeof r),f()("number"===typeof a),t.next=5,this.waitForReady();case 5:return r.startsWith("/ipfs/")||(r="/ipfs/".concat(r)),s=31536e7,t.next=9,m.a.create(this.privateKey,r,a,s);case 9:return i=t.sent,t.next=12,m.a.embedPublicKey(this.privateKey.public,i);case 12:return o=e.from(m.a.marshal(i)),u=this.peerCid,t.next=16,this.webSocketClient.emit("publish",u,o);case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),r}(v.a),U=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f()(Array.isArray(t)),f()(Array.isArray(n)),r=[],e.t0=c.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=16;break}if(a=e.t1.value,null!==n[a]){e.next=9;break}return r.push(null),e.abrupt("continue",4);case 9:return e.t2=r,e.next=12,A(t[a],n[a]);case 12:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=4;break;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()("string"===typeof t),n=new Uint8Array(n),r=m.a.unmarshal(n),a=m.a.extractPublicKey({},r),e.next=6,m.a.validate(a,r);case 6:return e.next=8,I.a.createFromPubKey(a.bytes);case 8:return s=e.sent,f()(s.equals(I.a.createFromB58String(t))),i=C()(r.value),f()(F.a.cid(i.replace(/^\/ipfs\//,""))),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f()(Array.isArray(t)),f()(Array.isArray(n)),r=[],e.t0=c.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=16;break}if(a=e.t1.value,null!==n[a]){e.next=9;break}return r.push(null),e.abrupt("continue",4);case 9:return e.t2=r,e.next=12,T(t[a],n[a]);case 12:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=4;break;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()("string"===typeof t),n=new Uint8Array(n),r=m.a.unmarshal(n),a=m.a.extractPublicKey({},r),e.next=6,m.a.validate(a,r);case 6:return e.next=8,I.a.createFromPubKey(a.bytes);case 8:return s=e.sent,f()(s.equals(I.a.createFromB58String(t))),i=C()(r.value),f()(F.a.cid(i.replace(/^\/ipfs\//,""))),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();window.IpnsClient=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(r.a)(B,t)},window.ipns=m.a,t.a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(r.a)(B,t)}}).call(this,n(23).Buffer)},576:function(e,t){},583:function(e,t){},657:function(e,t){},658:function(e,t){},758:function(e,t){},760:function(e,t){},816:function(e,t){},878:function(e,t){},880:function(e,t){},974:function(e,t){}},[[1282,1,2]]]);
//# sourceMappingURL=main.e2822af1.chunk.js.map