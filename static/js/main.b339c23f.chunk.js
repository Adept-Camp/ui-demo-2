(this.webpackJsonpsav3=this.webpackJsonpsav3||[]).push([[0],{1007:function(e,t){},1098:function(e,t){},1146:function(e,t){},126:function(e,t,n){"use strict";var r={bootstrapUsersGoogleSheetId:"1O4Wutfc34QeBEKIP5X4XtwpmRLOt5ytoDc1qv4nSHIg",starServers:["/dns4/star.sav3.org/tcp/443/wss/p2p-webrtc-star/"],ipnsServer:"https://ipns.sav3.org",urlTimeToLive:864e5};window.config=r,t.a=r},1344:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),s=n(46),i=n.n(s),c=n(21),o=n(62),u=n(1409),l=n(1381),p=n(89),d=n(12),f=n(1392),b=n(1348),h=n(1394),j=n(1395),v=n(257),x=n.n(v),g=n(262),O=n.n(g),m=n(175),y=n.n(m),w=n(259),C=n.n(w),k=n(261),P=n.n(k),S=n(260),I=n.n(S),N=n(258),F=n.n(N),R=n(1393),U=n(1411),B=n(263),A=n.n(B),J=n(1396),z=n(40),M=n(210),E=n.n(M),T=function(e){return E()({},W,e)},W=T({Follow:function(){return"Follow"},Unfollow:function(){return"Unfollow"},"Edit profile":function(){return"Edit profile"},"Display name":function(){return"Display name"},Description:function(){return"Description"},"Thumbnail URL":function(){return"Thumbnail URL"},"Banner URL":function(){return"Banner URL"},Home:function(){return"Home"},Profile:function(){return"Profile"},Search:function(){return"Search"},"Search user ID":function(){return"Search user ID"},Peers:function(){return"Peers"},"Connected peers posts":function(){return"Connected peers posts"},Stats:function(){return"Stats"},"Connected peers stats":function(){return"Connected peers stats"},"Connecting to peers":function(){return"Connecting to peers"},Following:function(){return"Following"},"Not following anyone":function(){return"Not following anyone"},Export:function(){return"Export"},Import:function(){return"Import"},Feed:function(){return"Feed"},"Uncensorable content":function(){return"Uncensorable content"},Post:function(){return"Post"},"Copied to clipboard":function(){return"Copied to clipboard"},Share:function(){return"Share"},"URL expired":function(){return"URL expired"}}),L=n(176);Object(L.b)("es-MX",(function(e,t,n){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xeda","en 1 d\xeda"],["hace %s d\xedas","en %s d\xedas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xf1o","en 1 a\xf1o"],["hace %s a\xf1os","en %s a\xf1os"]][t]}));var D=T({Follow:function(){return"Seguir"},Unfollow:function(){return"Dejar de seguir"},"Edit profile":function(){return"Editar perfil"},"Display name":function(){return"Nombre para mostrar"},Description:function(){return"Descripci\xf3n"},"Thumbnail URL":function(){return"URL de miniatura"},"Banner URL":function(){return"URL del banner"},Home:function(){return"Casa"},Profile:function(){return"Perfil"},Search:function(){return"Buscar"},"Search user ID":function(){return"Buscar ID de usuario"},Peers:function(){return"Compa\xf1eros"},"Connected peers posts":function(){return"Publicaciones de compa\xf1eros conectados"},Stats:function(){return"Estadisticas"},"Connected peers stats":function(){return"Estad\xedsticas de compa\xf1eros conectados"},"Connecting to peers":function(){return"Conectando con sus compa\xf1eros"},Following:function(){return"Siguiendo"},"Not following anyone":function(){return"No seguir a nadie"},Export:function(){return"Exportar"},Import:function(){return"Importar"},"Uncensorable content":function(){return"Contenido sin censura"},Post:function(){return"Publicaci\xf3n"}});Object(L.b)("hu",(function(e,t,n){return[["\xe9ppen most","\xe9ppen most"],["%s m\xe1sodperce","%s m\xe1sodpercen bel\xfcl"],["1 perce","1 percen bel\xfcl"],["%s perce","%s percen bel\xfcl"],["1 \xf3r\xe1ja","1 \xf3r\xe1n bel\xfcl"],["%s \xf3r\xe1ja","%s \xf3r\xe1n bel\xfcl"],["1 napja","1 napon bel\xfcl"],["%s napja","%s napon bel\xfcl"],["1 hete","1 h\xe9ten bel\xfcl"],["%s hete","%s h\xe9ten bel\xfcl"],["1 h\xf3napja","1 h\xf3napon bel\xfcl"],["%s h\xf3napja","%s h\xf3napon bel\xfcl"],["1 \xe9ve","1 \xe9ven bel\xfcl"],["%s \xe9ve","%s \xe9ven bel\xfcl"]][t]}));var K=T({Follow:function(){return"K\xf6vet\xe9s"},Unfollow:function(){return"K\xf6vet\xe9s megsz\xfcntet\xe9se"},"Edit profile":function(){return"Profil szerkeszt\xe9se"},"Display name":function(){return"L\xe1that\xf3 n\xe9v"},Description:function(){return"Le\xedr\xe1s"},"Thumbnail URL":function(){return"Profilk\xe9p URL"},"Banner URL":function(){return"Banner URL"},Home:function(){return"Home"},Profile:function(){return"Profil"},Search:function(){return"Keres\xe9s"},"Search user ID":function(){return"Felhaszn\xe1l\xf3 ID keres\xe9se"},Peers:function(){return"Kapcsolatok"},"Connected peers posts":function(){return"Kapcsolatok \xfczenetei"},Stats:function(){return"Statisztik\xe1k"},"Connected peers stats":function(){return"Kapcsolatok statisztik\xe1i"},"Connecting to peers":function(){return"Kapcsol\xf3d\xe1s"},Following:function(){return"K\xf6vet\xe9sek"},"Not following anyone":function(){return"Nem k\xf6vet senkit"},Export:function(){return"Export\xe1l\xe1s"},Import:function(){return"Import\xe1l\xe1s"},"Uncensorable content":function(){return"Cenz\xfar\xe1zhatatlan tartalom"}}),_={"en-US":W,"es-MX":D,hu:K};Object.freeze(_);var H=_,q=Object(a.createContext)({languageCode:"en-US",setLanguageCode:null}),V=function(e){var t="en-US",n=window.navigator.language,s=localStorage.getItem("languageCode")||n||t;H[s]||(console.warn("no available translation for '".concat(s,"'")),s=t);var i=Object(a.useState)(s),c=Object(d.a)(i,2),o=c[0],u=c[1],l={languageCode:o,setLanguageCode:function(e){H[e]?(localStorage.setItem("languageCode",e),u(e)):console.warn("no available translation for '".concat(e,"'"))}},p=e.children;return Object(r.jsx)(q.Provider,{value:l,children:p})},G=function(){var e=Object(a.useContext)(q).languageCode;return H[e]},Z=n(1),X=n.n(Z),$=n(8),Q=n(1413),Y=n(38),ee=n(26),te=n(16),ne=n(125),re=n(99),ae=n(247),se=n(266),ie=n(39),ce=n(83),oe=n(364),ue=n.n(oe),le=n(556),pe=n(7),de=n.n(pe),fe=n(177),be=n(173),he=n.n(be),je=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.name,s=r.maxSize;de()("string"===typeof a,"invalid idb lru cache '".concat(a,"' not a string")),de()("number"===typeof s,"invalid idb lru maxSize '".concat(s,"' not a number"));var i=!1,c=function(){var r=Object($.a)(X.a.mark((function r(){var s,c,o,u;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=fe.createInstance({name:a}),c=fe.createInstance({name:"_".concat(a)}),r.next=4,s.length();case 4:return o=r.sent,r.next=7,c.length();case 7:u=r.sent,o>u?(t=s,e=c,n=o):(t=c,e=s,n=u),i=!0;case 10:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();c();var o=function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,he()(10);case 4:return e.next=6,o();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function u(e,t){return l.apply(this,arguments)}function l(){return(l=Object($.a)(X.a.mark((function r(a,i){var c;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.setItem(a,i);case 2:if(!(++n>=s)){r.next=11;break}return n=0,c=t,t=e,e=c,r.next=11,e.clear();case 11:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return{has:function(){var n=Object($.a)(X.a.mark((function n(r){var a,s;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.getItem(r);case 4:return a=n.sent,n.next=7,t.getItem(r);case 7:return s=n.sent,n.abrupt("return",null!==a&&void 0!==a||null!==s&&void 0!==s);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),remove:function(){var n=Object($.a)(X.a.mark((function n(r){return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.removeItem(r);case 4:return n.next=6,t.removeItem(r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),get:function(){var n=Object($.a)(X.a.mark((function n(r){var a,s,i;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.getItem(r);case 4:return a=n.sent,n.next=7,t.getItem(r);case 7:if(s=n.sent,null===(i=a)||void 0===a){n.next=11;break}return n.abrupt("return",i);case 11:if(null===(i=s)||void 0===(i=s)){n.next=15;break}return n.next=14,u(r,i);case 14:return n.abrupt("return",i);case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),set:function(){var t=Object($.a)(X.a.mark((function t(n,r){var a;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:return t.next=4,e.getItem(n);case 4:if(null===(a=t.sent)||void 0===a){t.next=10;break}return t.next=8,e.setItem(n,r);case 8:t.next=12;break;case 10:return t.next=12,u(n,r);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),clear:function(){var n=Object($.a)(X.a.mark((function n(){return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.clear();case 4:return n.next=6,t.clear();case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}};window.IdbLru=je;var ve=je,xe=n(25),ge=n.n(xe),Oe=ve({name:"sdpCache",maxSize:2e3}),me=ge()("sav3:sav3-ipfs:utils:webrtc"),ye=function(e){return function(){var t=Object($.a)(X.a.mark((function t(n,r){var a,s;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,r);case 2:return a=t.sent,s=n.getPeerId(),Oe.set(s,a._pc.remoteDescription.sdp),me("outbound webrtc connection",s,a._pc.remoteDescription.sdp),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},we=function(e){return function(){var t=Object($.a)(X.a.mark((function t(n){var r,a;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n);case 2:return r=t.sent,a=r.remotePeer.toB58String(),Oe.set(a,n.conn._pc.remoteDescription.sdp),me("inbound webrtc connection",a,n.conn._pc.remoteDescription.sdp),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ce=function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()(t&&"string"===typeof t,"invalid peer id ".concat(t)),e.next=3,Oe.get(t);case 3:return n=e.sent,de()(n,"no sdp cache for peer id '".concat(t,"'")),r=le.parse(n),a={ip:r.media[0].connection.ip,port:r.media[0].port,protocol:r.media[0].protocol},e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke={withWebRtcSdpCache:function(e){var t=e.libp2p.transportManager._transports.get("WebRTCStar")._connect;t=t.bind(e.libp2p.transportManager._transports.get("WebRTCStar")),e.libp2p.transportManager._transports.get("WebRTCStar")._connect=ye(t);var n=e.libp2p.transportManager._transports.get("WebRTCStar")._upgrader.upgradeInbound;return n=n.bind(e.libp2p.transportManager._transports.get("WebRTCStar")._upgrader),e.libp2p.transportManager._transports.get("WebRTCStar")._upgrader.upgradeInbound=we(n),e},sdpCache:Oe,getWebRtcPeerConnectionInfo:Ce},Pe=n(251),Se=new(n.n(Pe).a)({maxSize:1e3}),Ie=ge()("sav3:sav3-ipfs:utils:bitswap"),Ne=function(e){return function(t,n,r){if(!1===r){var a=t,s=n.cid.toString();Se.set(a,s),Ie("bitswapUpdateReceiveCounters",{peerCid:a,blockCid:s})}return e(t,n,r)}},Fe=function(e){var t=e.ipld.bs._bitswap._updateReceiveCounters;return t=t.bind(e.ipld.bs._bitswap),e.ipld.bs._bitswap._updateReceiveCounters=Ne(t),e},Re=n(28),Ue=n.n(Re),Be=n(557),Ae=n(45),Je=n.n(Ae),ze=n(58),Me=n.n(ze),Ee=n(87),Te=n.n(Ee),We=n(54),Le=["https://i.imgur.com/iKxWt1c.jpg","https://i.imgur.com/iD4bp6Mb.jpg","https://i.imgur.com/65kSbHTb.jpg","https://i.imgur.com/tNsOG3Bb.jpg","https://i.imgur.com/qiQHwHbb.jpg","https://i.imgur.com/txRRZpd.jpeg"],De=["https://i.imgur.com/ImQWjja.jpeg","https://i.imgur.com/txRRZpd.jpeg","https://i.imgur.com/2LwSsSu.gif","https://i.imgur.com/gpKZaRK.jpeg"],Ke=["https://i.imgur.com/qiQHwHb.mp4","i.imgur.com/ImQWjja.jpeg","http://i.imgur.com/txRRZpd.jpeg","https://i.imgur.com/2LwSsSu.gif","i.imgur.com/gpKZaRK.jpeg"],_e=["Jimmy Nguyen","Shadders","WallStreet5","Joshua Henslee","John M"],He=["Founder and CEO of XYZ.  Architect of the XYZ Protocol","I like Networks & Social Paradigm Shifts.","Spanish IT Raspberry Pi 4 + Python #BigData #Hacking #Cybersecurity #IoT #IPv6","U mad bro?","Praesentpellentesquetellussitametnuncfaucibus,sitametconvallissemporta.Sedmetudui,luctusavolutpatid,malesuadaadui."],qe=["https://mystartup.com","mystartup.com","https://twitter.com/crypto","https://t.me/sav3org"],Ve=["Lorem ipsum dolor sit amet, consectetur adipiscing elit.","Duis turpis nibh, feugiat gravida venenatis vitae, eleifend eu enim. Ut in luctus lorem. Vivamus lectus nunc, cursus eget eleifend ut, luctus et nibh.","Suspendisse","Praesent pellentesque tellus sit amet nunc faucibus, sit amet convallis sem porta. Sed metus dui, luctus a volutpat id, malesuada a dui.","https://verylonglink.com/veryveryveryveryveryveryveryveryveryvery-long-link Praesent pellentesque tellus sit amet nunc faucibus, sit amet convallis sem porta. Sed metus dui, luctus a volutpat id, malesuada a dui","Nullam egestas eget augue id dapibus","Praesentpellentesquetellussitametnuncfaucibus,sitametconvallissemporta.Sedmetudui,luctusavolutpatid,malesuadaadui."],Ge=0,Ze=function(e){var t=Math.floor(Math.random()*e.length);return t+=Ge++,e[t%=e.length]},Xe=function(e){window.sav3IpfsTest={},window.sav3IpfsTest.add=Object($.a)(X.a.mark((function t(){var n,r;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={content:"hello world "+Math.random()},t.next=3,e.ipfs.add(n);case 3:r=t.sent,console.log(r);case 5:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.get=function(){var t=Object($.a)(X.a.mark((function t(n){var r,a,s,i,c,o,u,l,p,d,f,b,h,j,v;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,a=!1,t.prev=2,i=Object(We.a)(e.ipfs.get(n));case 4:return t.next=6,i.next();case 6:return c=t.sent,r=c.done,t.next=10,c.value;case 10:if(o=t.sent,r){t.next=54;break}if(u=o,console.log(u.path),u.content){t.next=16;break}return t.abrupt("continue",51);case 16:l=[],p=!0,d=!1,t.prev=19,b=Object(We.a)(u.content);case 21:return t.next=23,b.next();case 23:return h=t.sent,p=h.done,t.next=27,h.value;case 27:if(j=t.sent,p){t.next=34;break}v=j,l.push(v);case 31:p=!0,t.next=21;break;case 34:t.next=40;break;case 36:t.prev=36,t.t0=t.catch(19),d=!0,f=t.t0;case 40:if(t.prev=40,t.prev=41,p||null==b.return){t.next=45;break}return t.next=45,b.return();case 45:if(t.prev=45,!d){t.next=48;break}throw f;case 48:return t.finish(45);case 49:return t.finish(40);case 50:console.log(l.toString());case 51:r=!0,t.next=4;break;case 54:t.next=60;break;case 56:t.prev=56,t.t1=t.catch(2),a=!0,s=t.t1;case 60:if(t.prev=60,t.prev=61,r||null==i.return){t.next=65;break}return t.next=65,i.return();case 65:if(t.prev=65,!a){t.next=68;break}throw s;case 68:return t.finish(65);case 69:return t.finish(60);case 70:case"end":return t.stop()}}),t,null,[[2,56,60,70],[19,36,40,50],[41,,45,49],[61,,65,69]])})));return function(e){return t.apply(this,arguments)}}(),window.sav3IpfsTest.addresses=Object($.a)(X.a.mark((function t(){var n,r,a,s,i;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ipfs.swarm.addrs();case 2:for(r in n=t.sent){a=Object(te.a)(n[r].addrs);try{for(a.s();!(s=a.n()).done;)(i=s.value).string=i.toString()}catch(c){a.e(c)}finally{a.f()}}console.log(n);case 5:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.peers=Object($.a)(X.a.mark((function t(){var n,r,a,s;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ipfs.swarm.peers();case 2:n=t.sent,r=Object(te.a)(n);try{for(r.s();!(a=r.n()).done;)(s=a.value).addrString=s.addr.toString()}catch(i){r.e(i)}finally{r.f()}console.log(n);case 6:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.editProfile=Object($.a)(X.a.mark((function t(){var n;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Math.random()>.5?Ze(qe):"",t.next=3,e.editUserProfile({displayName:Ze(_e),description:"".concat(Ze(He).substring(0,100)," ").concat(n),thumbnailUrl:Ze(Le),bannerUrl:Ze(De)});case 3:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.publishPosts=Object($.a)(X.a.mark((function t(){var n,r,a=arguments;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.length>0&&void 0!==a[0]?a[0]:5;case 1:if(!n--){t.next=7;break}return r=Math.random()>.5?Ze(Ke):"",t.next=5,e.publishPost({content:"".concat(Ze(Ve).substring(0,100)," ").concat(r)});case 5:t.next=1;break;case 7:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.editProfileAndPublishPosts=function(){var e=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.sav3IpfsTest.editProfile();case 2:return e.next=4,window.sav3IpfsTest.publishPosts(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.sav3IpfsTest.importExport=function(){var t=Object($.a)(X.a.mark((function t(n){var r,a,s,i,c,o,u,l,p,d;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.waitForReady();case 2:return t.next=4,e.ipfs.id();case 4:return r=t.sent,a=r.id,s=r.publicKey,t.next=9,e.getOwnPeerCid();case 9:return i=t.sent,t.next=12,e.getPrivateKey();case 12:return c=t.sent,t.next=15,e.setPrivateKey(n||c);case 15:return t.next=17,e.waitForReady();case 17:return t.next=19,e.ipfs.id();case 19:return o=t.sent,u=o.id,l=o.publicKey,t.next=24,e.getOwnPeerCid();case 24:return p=t.sent,t.next=27,e.getPrivateKey();case 27:d=t.sent,console.log("oldCid",a),console.log("newCid",u),console.log("oldPeerCid",i),console.log("newPeerCid",p),console.log("oldPublicKey",s),console.log("newPublicKey",l),console.log("oldPrivateKey",c),console.log("newPrivateKey",d);case 36:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),window.sav3IpfsTest.getPreviousPostCids=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=function(){var t=i[s];Object($.a)(X.a.mark((function n(){var r,a,s,i,c,o,u,l;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=1,a=!0,s=!1,n.prev=3,c=Object(We.a)(e.getPreviousPostCids(t));case 5:return n.next=7,c.next();case 7:return o=n.sent,a=o.done,n.next=11,o.value;case 11:if(u=n.sent,a){n.next=18;break}l=u,console.log("getPreviousPostCids",t,r++,l);case 15:a=!0,n.next=5;break;case 18:n.next=24;break;case 20:n.prev=20,n.t0=n.catch(3),s=!0,i=n.t0;case 24:if(n.prev=24,n.prev=25,a||null==c.return){n.next=29;break}return n.next=29,c.return();case 29:if(n.prev=29,!s){n.next=32;break}throw i;case 32:return n.finish(29);case 33:return n.finish(24);case 34:case"end":return n.stop()}}),n,null,[[3,20,24,34],[25,,29,33]])})))()},s=0,i=n;s<i.length;s++)a()}},$e=n(31),Qe=n.n($e),Ye=n(126),et=ge()("sav3:sav3-ipfs:utils:post-replies"),tt=ve({name:"postRepliesCache",maxSize:2e3}),nt=function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r,a,s,i=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.cid,r=t.parentPostCid,de()(n&&"string"===typeof n,"postRepliesUtils.cachePostReplyCid cid '".concat(n,"' not a string")),de()(r&&"string"===typeof r,"postRepliesUtils.cachePostReplyCid parentPostCid '".concat(r,"' not a string")),e.next=5,tt.get(r);case 5:return a=e.sent,s={},a&&(s=JSON.parse(a)),s[n]=!0,et("cachePostReplyCid",{cid:n,parentPostCid:r,postRepliesCids:s,res:a}),e.next=12,tt.set(r,JSON.stringify(s));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=Object($.a)(X.a.mark((function e(t){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()(t&&"string"===typeof t,"postRepliesUtils.getPostRepliesCids postCid '".concat(t,"' not a string")),e.next=3,tt.get(t);case 3:return n=e.sent,r=[],n&&(r=Object.keys(JSON.parse(n))),et("getPostRepliesCids",{postCid:t,postRepliesCids:r,res:n}),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at={postRepliesCache:tt,cachePostReplyCid:nt,getPostRepliesCids:rt},st=function(e){de()(e&&("string"===typeof e||"object"===typeof e),"invalid data to serialize '".concat(e,"' not a string or object"))},it=function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){throw Error("invalid data to serialize '".concat(e,"' not valid json: ").concat(t.message))}return e},ct={deserializePost:function(e){return st(e),e=it(e),de()(e.usr&&"string"===typeof e.usr,"invalid post '".concat(JSON.stringify(e),"' post.usr not a string")),de()(e.cnt&&"string"===typeof e.cnt,"invalid post '".concat(JSON.stringify(e),"' post.cnt not a string")),de()(e.tmp&&"number"===typeof e.tmp,"invalid post '".concat(JSON.stringify(e),"' post.tmp not a number")),{userCid:e.usr,contentCid:e.cnt,timestamp:e.tmp,parentPostCid:e.par,previousPostCid:e.pre}},deserializeProfile:function(e){return st(e),{diplayNameCid:(e=it(e)).nam,descriptionCid:e.des,thumbnailUrlCid:e.thu,bannerUrlCid:e.ban}},deserializeUserIpnsContent:function(e){return st(e),{profileCid:(e=it(e)).pro,lastPostCid:e.las,followingCid:e.fol}},serializePost:function(e){de()(e&&"object"===typeof e,"invalid post '".concat(JSON.stringify(e),"' post not an object")),de()(e.userCid&&"string"===typeof e.userCid,"invalid post '".concat(JSON.stringify(e),"' post.userCid not a string")),de()(e.contentCid&&"string"===typeof e.contentCid,"invalid post '".concat(JSON.stringify(e),"' post.contentCid not a string")),de()(e.timestamp&&"number"===typeof e.timestamp,"invalid post '".concat(JSON.stringify(e),"' post.timestamp not a number")),de()(void 0===e.parentPostCid||e.parentPostCid&&"string"===typeof e.parentPostCid,"invalid post '".concat(JSON.stringify(e),"' post.parentPostCid not a string")),de()(void 0===e.previousPostCid||e.previousPostCid&&"string"===typeof e.previousPostCid,"invalid post '".concat(JSON.stringify(e),"' post.previousPostCid not a string"));var t={usr:e.userCid,cnt:e.contentCid,tmp:e.timestamp};return e.parentPostCid&&(t.par=e.parentPostCid),e.previousPostCid&&(t.pre=e.previousPostCid),JSON.stringify(t)},serializeProfile:function(e){de()(e&&"object"===typeof e,"invalid profile '".concat(JSON.stringify(e),"' profile not an object"));var t={};return e.diplayNameCid&&(t.nam=e.diplayNameCid),e.descriptionCid&&(t.des=e.descriptionCid),e.thumbnailUrlCid&&(t.thu=e.thumbnailUrlCid),e.bannerUrlCid&&(t.ban=e.bannerUrlCid),JSON.stringify(t)},serializeUserIpnsContent:function(e){de()(e&&"object"===typeof e,"invalid userIpnsContent '".concat(JSON.stringify(e),"' userIpnsContent not an object"));var t={};return e.profileCid&&(t.pro=e.profileCid),e.lastPostCid&&(t.las=e.lastPostCid),e.followingCid&&(t.fol=e.followingCid),JSON.stringify(t)}},ot=ge()("sav3:sav3-ipfs:index"),ut=new(function(e){Object(ae.a)(n,e);var t=Object(se.a)(n);function n(){var e;return Object(ne.a)(this,n),(e=t.call(this)).ipfs=null,e.ipnsClient=null,e._initIpfs().catch(console.error),e}return Object(re.a)(n,[{key:"_initIpfs",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r,a,s=this,i=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.privateKey,r={preload:{enabled:!1},config:{Bootstrap:[],Addresses:{Delegates:[],Swarm:Ye.a.starServers}}},n&&(r.config.Identity={PrivKey:n}),ot("_initIpfs",{ipfsOptions:r}),e.next=7,ue.a.create(r);case 7:a=e.sent,this.ipfs=ke.withWebRtcSdpCache(a),this.ipfs=Fe(a),this.ipnsClient=Object(Be.a)({ipfs:a}),this.ipnsClient.on("publish",(function(e,t){s.emit("publish",e,t)})),window.ipfs=this.ipfs,this.ipfs.libp2p.on("peer:discovery",(function(e){ot("discovered",e)})),this.ipfs.libp2p.on("peer:connect",(function(e){ot("connected",e),s.ipfs.swarm.peers().then((function(e){return ot("current peers connected: ",e)}))})),this.setMaxListeners(100);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPeersStats",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r,a,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return t=[],e.next=5,this.getPeersCids();case 5:n=e.sent,r=Object(te.a)(n),e.prev=7,r.s();case 9:if((a=r.n()).done){e.next=18;break}return s=a.value,e.t0=t,e.next=14,this.getPeerStats(s);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t2=e.catch(7),r.e(e.t2);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return ot("getPeersStats",{peersStats:t}),e.abrupt("return",t);case 28:case"end":return e.stop()}}),e,this,[[7,20,23,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"getPeerStats",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,a,s,i,c,o,u,l;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return de()("string"===typeof t,"sav3Ipfs.getPeerStats peerId '".concat(t,"' not a string")),n=this.ipfs.libp2p.metrics,e.prev=4,e.next=7,ke.getWebRtcPeerConnectionInfo(t);case 7:i=e.sent,r=i.ip,a=i.port,s=i.protocol,e.next=15;break;case 13:e.prev=13,e.t0=e.catch(4);case 15:return c=n.forPeer(Ue.a.createFromCID(t)).toJSON(),o=Number(c.dataReceived),u=Number(c.dataSent),l={peerCid:t,ip:r,port:a,protocol:s,dataReceived:o,dataSent:u},e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getPeersCids",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r,a,s,i,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.ipfs.swarm.peers();case 4:t=e.sent,n=new Set,r=[],a=Object(te.a)(t),e.prev=8,a.s();case 10:if((s=a.n()).done){e.next=19;break}if(i=s.value,c=i.peer,!n.has(c)){e.next=15;break}return e.abrupt("continue",17);case 15:n.add(c),r.push(c);case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),a.e(e.t0);case 24:return e.prev=24,a.f(),e.finish(24);case 27:return e.abrupt("return",r);case 28:case"end":return e.stop()}}),e,this,[[8,21,24,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"getPrivateKey",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.ipfs.key.export("self","password");case 4:return t=e.sent,e.next=7,Te.a.keys.import(t,"password");case 7:return n=e.sent,e.abrupt("return",Qe()(n.bytes,"base64"));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPrivateKey",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()(t&&"string"===typeof t,"sav3Ipfs.setPrivateKey base64PrivateKey '".concat(t,"' not a string")),n=this.ipfs,delete this.ipfs,e.next=5,n.stop();case 5:return e.next=7,this._initIpfs({privateKey:t});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOwnPeerCid",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,ut.ipfs.id();case 4:return e.abrupt("return",e.sent.id);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOwnUserCid",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,ut.ipfs.id();case 4:return e.abrupt("return",e.sent.id);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOwnIpnsRecord",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,ut.getOwnPeerCid();case 4:return t=e.sent,n=Ue.a.createFromCID(t),e.next=8,this.ipfs.libp2p.datastore.get(Me.a.getLocalKey(n.id));case 8:return r=e.sent,a=Me.a.unmarshal(r),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setOwnIpnsRecord",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r,a,s,i,c,o,u,l,p=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},n=t.value,r=t.sequence,e.next=3,this.waitForReady();case 3:return de()(n&&"string"===typeof n,"sav3Ipfs.setOwnIpnsRecord value '".concat(n,"' not a string")),de()("number"===typeof r,"sav3Ipfs.setOwnIpnsRecord sequence '".concat(r,"' not a number")),n.startsWith("/ipfs/")||(n="/ipfs/".concat(n)),a=31536e7,e.next=9,this.ipfs.key.export("self","password");case 9:return s=e.sent,e.next=12,Te.a.keys.import(s,"password");case 12:return i=e.sent,e.next=15,Me.a.create(i,n,r,a);case 15:return c=e.sent,o=Me.a.marshal(c),e.next=19,ut.getOwnPeerCid();case 19:return u=e.sent,l=Ue.a.createFromCID(u),e.next=23,this.ipfs.libp2p.datastore.put(Me.a.getLocalKey(l.id),o);case 23:return e.next=25,this.ipfs.name.resolve(u);case 25:return e.abrupt("return",c);case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIpfsContent",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return de()(t&&"string"===typeof t,"sav3Ipfs.getIpfsContent cid '".concat(t,"' not a string")),e.next=5,this.ipfs.get(t).next();case 5:if(!(n=e.sent.value).content){e.next=11;break}return e.next=9,n.content.next();case 9:a=e.sent,r=a&&a.value&&a.value.toString();case 11:return ot("getIpfsContent",{cid:t,file:n,content:r}),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserIpnsContent",value:function(){var e=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return de()(t&&"string"===typeof t,"sav3Ipfs.getUserIpnsContent userIpnsContentCid '".concat(t,"' not a string")),e.t0=ct,e.next=6,this.getIpfsContent(t);case 6:return e.t1=e.sent,e.abrupt("return",e.t0.deserializeUserIpnsContent.call(e.t0,e.t1));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOwnUserIpnsContent",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.getOwnIpnsRecord();case 4:return t=e.sent,n=t.value.toString(),e.next=8,this.getIpfsContent(n);case 8:if(r=e.sent,ot("getOwnUserIpnsContent",{ownIpfsValue:n,lastIpnsContent:r}),r){e.next=12;break}return e.abrupt("return",{});case 12:return e.abrupt("return",ct.deserializeUserIpnsContent(r));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"subscribeToIpnsPath",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()(t&&"string"===typeof t,"sav3Ipfs.subscribeToIpnsPath ipnsPath '".concat(t,"' not a string")),e.next=3,this.waitForReady();case 3:return e.next=5,this.ipnsClient.subscribe([t]);case 5:return n=e.sent,e.abrupt("return",n[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribeToIpnsPaths",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,a,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de()(Array.isArray(t),"sav3Ipfs.subscribeToIpnsPaths ipnsPaths '".concat(t,"' not an array")),n=Object(te.a)(t);try{for(n.s();!(r=n.n()).done;)a=r.value,de()(a&&"string"===typeof a,"sav3Ipfs.subscribeToIpnsPaths ipnsPaths '".concat(JSON.stringify(t),"' contains non string"))}catch(i){n.e(i)}finally{n.f()}return e.next=5,this.waitForReady();case 5:return e.next=7,this.ipnsClient.subscribe(t);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publishPost",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r,a,s,i,c,o,u=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.content,r=t.parentPostCid,e.next=3,this.waitForReady();case 3:return de()(n&&"string"===typeof n,"sav3Ipfs.publishPost content '".concat(n,"' not a string")),de()(n.length<=140,"sav3Ipfs.publishPost content '".concat(n,"' longer than 140 chars")),de()(!r||"string"===typeof r,"sav3Ipfs.publishPost parentPostCid '".concat(r,"' not a string")),e.next=8,this.getOwnUserIpnsContent();case 8:return a=e.sent,(s={}).parentPostCid=r,s.previousPostCid=a.lastPostCid,s.timestamp=Math.round(Date.now()/1e3),e.next=15,this.ipfs.id();case 15:return s.userCid=e.sent.id,e.next=18,this.ipfs.add(n);case 18:return s.contentCid=e.sent.cid.toString(),e.next=21,this.ipfs.add(ct.serializePost(s));case 21:return i=e.sent.cid.toString(),c=Object(ee.a)(Object(ee.a)({},a),{},{lastPostCid:i}),e.next=25,this.ipfs.add(ct.serializeUserIpnsContent(c));case 25:return o=e.sent.cid.toString(),e.next=28,this.publishIpnsRecord(o);case 28:if(ot("publishPost",{newIpnsContentCid:o,newPost:s,newIpnsContent:c,ipnsContent:a,newPostCid:i,parentPostCid:r}),!r){e.next=32;break}return e.next=32,at.cachePostReplyCid({cid:i,parentPostCid:r});case 32:return e.abrupt("return",i);case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setFollowing",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,a,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return de()(Array.isArray(t),"sav3Ipfs.setFollowing userCids '".concat(t,"' not an array")),t=Object(Y.a)(t).sort(),e.next=6,this.getOwnUserIpnsContent();case 6:return n=e.sent,e.next=9,this.ipfs.add(JSON.stringify(t));case 9:if(r=e.sent.cid.toString(),n.followingCid!==r){e.next=13;break}return ot("setFollowing duplicate following cid",{userCids:t}),e.abrupt("return");case 13:return a=Object(ee.a)(Object(ee.a)({},n),{},{followingCid:r}),e.next=16,this.ipfs.add(ct.serializeUserIpnsContent(a));case 16:return s=e.sent.cid.toString(),e.next=19,this.publishIpnsRecord(s);case 19:return ot("setFollowing",{newIpnsContentCid:s,userCids:t,followingCid:r,newIpnsContent:a,ipnsContent:n}),e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserFollowing",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,a,s,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return de()(t&&"string"===typeof t,"sav3Ipfs.getUserFollowing userCid '".concat(t,"' not a string")),n=[],e.next=6,this.ipnsClient.subscribe([t]);case 6:if(r=e.sent,a=Object(d.a)(r,1),!(s=a[0])){e.next=19;break}return e.next=12,this.getUserIpnsContent(s);case 12:if(!(i=e.sent).followingCid){e.next=19;break}return e.t0=JSON,e.next=17,this.getIpfsContent(i.followingCid);case 17:e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1);case 19:return ot("getUserFollowing",{userCid:t,following:n,ipnsValue:s}),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publishIpnsRecord",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return de()("string"===typeof t,"sav3Ipfs.publishIpnsRecord '".concat(t,"' not a string")),e.next=5,this.getOwnIpnsRecordSequence();case 5:return e.t0=e.sent,n=e.t0+1,e.next=9,this.ipnsClient.publish({value:t,sequence:n});case 9:return e.next=11,this.setOwnIpnsRecord({value:t,sequence:n});case 11:ot("publishIpnsRecord",{newIpnsContentCid:t,sequence:n});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editUserProfile",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r,a,s,i,c,o,u,l=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},n=t.displayName,r=t.description,a=t.thumbnailUrl,s=t.bannerUrl,e.next=3,this.waitForReady();case 3:if(i={},!n){e.next=10;break}return de()("string"===typeof n,"display name not a string"),de()(n.length<=50,"display name '".concat(n,"' longer than 50 chars")),e.next=9,this.ipfs.add(n);case 9:i.diplayNameCid=e.sent.cid.toString();case 10:if(!r){e.next=16;break}return de()("string"===typeof r,"description not a string"),de()(r.length<=140,"description '".concat(r,"' longer than 140 chars")),e.next=15,this.ipfs.add(r);case 15:i.descriptionCid=e.sent.cid.toString();case 16:if(!a){e.next=24;break}return de()("string"===typeof a,"thumbnail url not a string"),de()(a.startsWith("https://"),"thumbnail url '".concat(a,"' does not start with https://")),de()(a.replace(/[#?].*/,"").match(/\.(jpeg|jpg|png|gif|mp4|webm)$/),"thumbnail url '".concat(a,"' does not end with jpeg|jpg|png|gif|mp4|webm")),de()(a.length<=140,"thumbnail url '".concat(a,"' longer than 140 chars")),e.next=23,this.ipfs.add(a);case 23:i.thumbnailUrlCid=e.sent.cid.toString();case 24:if(!s){e.next=32;break}return de()("string"===typeof s,"banner url not a string"),de()(s.startsWith("https://"),"banner url '".concat(s,"' does not start with https://")),de()(s.replace(/[#?].*/,"").match(/\.(jpeg|jpg|png|gif|mp4|webm)$/),"banner url '".concat(s,"' does not end with jpeg|jpg|png|gif|mp4|webm")),de()(s.length<=140,"banner url '".concat(s,"' longer than 140 chars")),e.next=31,this.ipfs.add(s);case 31:i.bannerUrlCid=e.sent.cid.toString();case 32:return e.next=34,this.ipfs.add(ct.serializeProfile(i));case 34:return c=e.sent.cid.toString(),e.next=37,this.getOwnUserIpnsContent();case 37:return(o=e.sent).profileCid=c,e.next=41,this.ipfs.add(ct.serializeUserIpnsContent(o));case 41:return u=e.sent.cid.toString(),e.next=44,this.publishIpnsRecord(u);case 44:return ot("editProfile",{displayName:n,description:r,thumbnailUrl:a,bannerUrl:s,ipnsContent:o,profile:i,profileCid:c,newIpnsContentCid:u}),e.abrupt("return",c);case 46:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserProfile",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return de()("string"===typeof t,"sav3Ipfs.getUserProfile profileCid '".concat(t,"' not a string")),e.t0=ct,e.next=6,this.getIpfsContent(t);case 6:if(e.t1=e.sent,n=e.t0.deserializeProfile.call(e.t0,e.t1),r={},!n.diplayNameCid){e.next=13;break}return e.next=12,this.getIpfsContent(n.diplayNameCid);case 12:r.displayName=e.sent;case 13:if(!n.descriptionCid){e.next=17;break}return e.next=16,this.getIpfsContent(n.descriptionCid);case 16:r.description=e.sent;case 17:if(!n.thumbnailUrlCid){e.next=21;break}return e.next=20,this.getIpfsContent(n.thumbnailUrlCid);case 20:r.thumbnailUrl=e.sent;case 21:if(!n.bannerUrlCid){e.next=25;break}return e.next=24,this.getIpfsContent(n.bannerUrlCid);case 24:r.bannerUrl=e.sent;case 25:return ot("getUserProfile",{profileCid:t,profileCids:n,profile:r}),e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOwnIpnsRecordSequence",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r,a,s,i,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.getOwnIpnsRecord();case 4:return t=e.sent,n=t,e.next=8,ut.getOwnPeerCid();case 8:return r=e.sent,e.next=11,this.ipnsClient.getRecords([r]);case 11:if(a=e.sent,s=Object(d.a)(a,1),i=s[0],c=i&&i.sequence||0,!(n>c)){e.next=19;break}return e.abrupt("return",n);case 19:return e.abrupt("return",c);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserPostsFromLastPostCid",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:de()(t&&"string"===typeof t,"sav3Ipfs.getUserPostsFromLastPostCid lastPostCid '".concat(t,"' not a string")),n=[],r=5;case 5:if(t){e.next=8;break}return e.abrupt("break",17);case 8:if(!(n.length>=r)){e.next=10;break}return e.abrupt("break",17);case 10:return e.next=12,this.getPost(t);case 12:a=e.sent,t=a.previousPostCid,n.push(a),e.next=5;break;case 17:return ot("getUserPostsFromLastPostCid",{lastPostCid:t,posts:n}),e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPreviousPostCids",value:function(e){var t=this;return Object(ce.a)(X.a.mark((function n(){var r,a,s;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ie.a)(t.waitForReady());case 2:de()(e&&"string"===typeof e,"sav3Ipfs.getPostCidsFromLastPostCid lastPostCid '".concat(e,"' not a string")),r=e,a=0;case 5:return a++,n.next=9,r;case 9:return n.t0=ct,n.next=12,Object(ie.a)(t.getIpfsContent(r));case 12:if(n.t1=n.sent,s=n.t0.deserializePost.call(n.t0,n.t1),ot("getPreviousPostCids",{lastPostCid:e,previousPostCid:r,post:s,postCount:a}),s.previousPostCid){n.next=17;break}return n.abrupt("return");case 17:r=s.previousPostCid,n.next=5;break;case 20:case"end":return n.stop()}}),n)})))()}},{key:"getPost",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return de()(t&&"string"===typeof t,"sav3Ipfs.getPost postCid '".concat(t,"' not a string")),ot("getPost",{postCid:t}),e.t0=ct,e.next=7,this.getIpfsContent(t);case 7:if(e.t1=e.sent,(n=e.t0.deserializePost.call(e.t0,e.t1)).cid=t,!n.parentPostCid){e.next=13;break}return e.next=13,at.cachePostReplyCid({cid:n.cid,parentPostCid:n.parentPostCid});case 13:return e.next=15,this.getIpfsContent(n.contentCid);case 15:return n.content=e.sent,ot("getPost returns",{postCid:t,post:n}),e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPostRepliesCids",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return de()(t&&"string"===typeof t,"sav3Ipfs.getPostRepliesCids postCid '".concat(t,"' not a string")),e.next=5,at.getPostRepliesCids(t);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isReady",value:function(){return!!this.ipfs}},{key:"waitForReady",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ipfs){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,he()(10);case 4:return e.next=6,this.waitForReady();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Je.a));window.sav3Ipfs=ut,window.Ipfs=ue.a,Xe(ut);var lt=ut,pt=n(1412),dt=n(1384),ft=n(1388),bt=n(558),ht=n.n(bt),jt=n(1386),vt=n(1387),xt=n(1383),gt=Object(l.a)((function(e){return{content:{paddingTop:0,paddingBottom:0,overflow:"hidden"}}}));var Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.open,n=e.onClose,a=e.content,s=e.actions,i=gt(),c=Object(p.a)(),o=Object(xt.a)(c.breakpoints.down("xs"));return Object(r.jsxs)(dt.a,{fullScreen:o,fullWidth:!0,maxWidth:"xs",open:t,onClose:n,children:[Object(r.jsxs)(U.a,{alignItems:"center",display:"flex",px:2,height:c.sav3.topBar.height,children:[Object(r.jsx)(U.a,{flexGrow:1,children:Object(r.jsx)(jt.a,{onClick:n,children:Object(r.jsx)(ht.a,{})})}),o&&Object(r.jsx)(U.a,{px:1,children:s})]}),Object(r.jsx)(vt.a,{}),Object(r.jsx)(ft.a,{className:i.content,children:a}),!o&&Object(r.jsxs)("div",{children:[Object(r.jsx)(vt.a,{}),Object(r.jsxs)(U.a,{alignItems:"center",display:"flex",px:3,height:c.sav3.topBar.height,children:[Object(r.jsx)(U.a,{flexGrow:1}),Object(r.jsx)(U.a,{children:s})]})]})]})},mt=ge()("sav3:hooks:use-user-ipns-content"),yt=function(e){de()(!e||"string"===typeof e,"invalid ipnsPath '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)(),n=Object(d.a)(t,2),r=n[0],s=n[1];return mt({ipnsPath:e,userIpnsContent:r}),Object(a.useEffect)((function(){if(r&&s(),e){var t=function(){var t=Object($.a)(X.a.mark((function t(n,r){var a;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e===n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,lt.getUserIpnsContent(r);case 4:a=t.sent,s(a);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return lt.on("publish",t),Object($.a)(X.a.mark((function t(){var n,r;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt.subscribeToIpnsPath(e);case 2:if(n=t.sent){t.next=6;break}return s(),t.abrupt("return");case 6:return t.next=8,lt.getUserIpnsContent(n);case 8:r=t.sent,s(r);case 10:case"end":return t.stop()}}),t)})))(),function(){lt.off("publish",t)}}}),[e]),r},wt=ge()("sav3:hooks:use-user-profile"),Ct=function(e){de()(!e||"string"===typeof e,"invalid userCid '".concat(JSON.stringify(e),"'"));var t={},n=Object(a.useState)(t),r=Object(d.a)(n,2),s=r[0],i=r[1],c=yt(e),o=c&&c.profileCid;return wt({userIpnsContent:c,userCid:e,profileCid:o,userProfile:s}),Object(a.useEffect)((function(){JSON.stringify(s)!==JSON.stringify(t)&&i(t),o&&"string"===typeof o&&Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt.getUserProfile(o);case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})))()}),[o]),s},kt=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt.getOwnUserCid();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},Pt=n(1416),St=n(113),It=Object(l.a)((function(e){return{errorMessage:{overflow:"hidden"},content:{"& textarea":{overflow:"hidden"},"& fieldset":{border:"none"},marginBottom:e.spacing(1),"& .MuiInputBase-root":{paddingLeft:e.spacing(1)}},avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor},userCid:{wordBreak:"break-all"},parentPostLine:{margin:"auto",width:2}}}));function Nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.parentPost,n=It();return Object(r.jsxs)(U.a,{display:"flex",mb:1,children:[Object(r.jsxs)(U.a,{pr:1,py:1.5,children:[Object(r.jsx)(Pt.a,{src:t.profile.thumbnailUrl,className:n.avatar}),Object(r.jsx)(vt.a,{className:n.parentPostLine,orientation:"vertical"})]}),Object(r.jsxs)(U.a,{pt:1.5,pl:.5,flexGrow:1,children:[t.profile.displayName&&Object(r.jsx)(St.a,{variant:"subtitle2",children:t.profile.displayName}),Object(r.jsx)(St.a,{variant:"caption",color:"textSecondary",className:n.userCid,children:t.userCid}),Object(r.jsx)(St.a,{variant:"body2",children:t.content})]})]})}var Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.open,n=e.onClose,s=e.parentPost,i=G(),c=It(),o=Object(a.useState)(""),u=Object(d.a)(o,2),l=u[0],p=u[1],f=Object(a.useState)(),b=Object(d.a)(f,2),h=b[0],j=b[1],v=kt(),x=Ct(v),g=function(e){var t=e.target.value;try{t.length>140&&(t=t.subtring(0,140)),p(t)}catch(n){}},O=function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s&&s.cid,e.prev=1,e.next=4,lt.publishPost({content:l,parentPostCid:t});case 4:j(null),p(""),n(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),j(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),m=Object(r.jsxs)(a.Fragment,{children:[s&&Object(r.jsx)(Nt,{parentPost:s}),Object(r.jsxs)(U.a,{display:"flex",children:[Object(r.jsx)(U.a,{pr:1,py:1.5,children:Object(r.jsx)(Pt.a,{src:x.thumbnailUrl,className:c.avatar})}),Object(r.jsx)(Q.a,{autoFocus:!0,className:c.content,onChange:g,margin:"dense",id:"content",placeholder:i["Uncensorable content"](),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",value:l}),h&&Object(r.jsx)(pt.a,{classes:{message:c.errorMessage},severity:"error",children:h})]})]}),y=Object(r.jsx)("div",{children:Object(r.jsx)(R.a,{disableElevation:!0,variant:"contained",onClick:O,color:"primary",children:"SAV3"})});return Object(r.jsx)(Ot,{onClose:n,open:t,content:m,actions:y})},Rt=Object(l.a)((function(e){return{logo:{height:"1.1em"},logoButton:{height:"2.2em",width:"2.2em"},createTextButtonBox:Object(c.a)({},e.breakpoints.down("md"),{display:"none"}),createIconButtonBox:Object(c.a)({},e.breakpoints.up("lg"),{display:"none"}),createIconButton:{boxShadow:"none"},text:Object(c.a)({},e.breakpoints.down("md"),{display:"none"}),root:Object(c.a)({position:"fixed",width:"inherit"},e.breakpoints.up("lg"),{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)})}}));function Ut(){var e=Rt(),t=Object(a.useState)(!1),n=Object(d.a)(t,2),s=n[0],i=n[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(U.a,{my:2,mx:1,alignItems:"center",display:"flex",className:e.createTextButtonBox,onClick:function(){return i(!0)},children:Object(r.jsx)(R.a,{color:"primary",fullWidth:!0,variant:"contained",size:"large",disableElevation:!0,children:"SAV3"})}),Object(r.jsx)(U.a,{my:2,pl:1,alignItems:"center",display:"flex",className:e.createIconButtonBox,onClick:function(){return i(!0)},children:Object(r.jsx)(J.a,{color:"primary",className:e.createIconButton,size:"medium",children:Object(r.jsx)(A.a,{})})}),Object(r.jsx)(Ft,{open:s,onClose:function(){return i(!1)}})]})}var Bt=function(){var e=Rt(),t=G();return Object(r.jsx)("div",{className:e.root,children:Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(b.a,{button:!0,component:z.b,to:"/",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(x.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Home(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:z.b,to:"/feed",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(F.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Feed(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:z.b,to:"/search",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(y.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Search(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:z.b,to:"/following",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(C.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Following(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:z.b,to:"/peers",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(I.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Peers(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:z.b,to:"/stats",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(P.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Stats(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:z.b,to:"/profile",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(O.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Profile(),className:e.text})]}),Object(r.jsx)(Ut,{})]})})},At=n(1397),Jt=n(1398),zt=Object(l.a)((function(e){return{menu:{width:"100%",position:"fixed",bottom:0},createIconButtonBox:{right:e.spacing(4),bottom:e.spacing(8)},createIconButton:{}}}));function Mt(){var e=zt(),t=Object(a.useState)(!1),n=Object(d.a)(t,2),s=n[0],i=n[1];return Object(r.jsxs)(U.a,{position:"absolute",className:e.createIconButtonBox,children:[Object(r.jsx)(U.a,{my:2,pl:1,alignItems:"center",display:"flex",className:e.createIconButton,onClick:function(){return i(!0)},children:Object(r.jsx)(J.a,{color:"primary",className:e.createIconButton,size:"large",children:Object(r.jsx)(A.a,{})})}),Object(r.jsx)(Ft,{open:s,onClose:function(){return i(!1)}})]})}var Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,n=zt(),a=Object(o.i)("/:route"),s=a&&a.params&&a.params.route?a.params.route:"home";return Object(r.jsxs)(U.a,{className:t,children:[Object(r.jsxs)(At.a,{value:s,className:n.menu,children:[Object(r.jsx)(Mt,{}),Object(r.jsx)(Jt.a,{component:z.b,to:"/",value:"home",icon:Object(r.jsx)(x.a,{})}),Object(r.jsx)(Jt.a,{component:z.b,to:"/search",value:"search",icon:Object(r.jsx)(y.a,{})}),Object(r.jsx)(Jt.a,{component:z.b,to:"/feed",value:"feed",icon:Object(r.jsx)(F.a,{})}),Object(r.jsx)(Jt.a,{component:z.b,to:"/peers",value:"peers",icon:Object(r.jsx)(I.a,{})})]}),Object(r.jsx)(U.a,{width:0,className:"MuiBottomNavigation-root"})]})},Tt=n(1399),Wt=n(568),Lt=n(1415),Dt="rgb(127, 127, 127, 0.05)",Kt={breakpoints:{values:{xs:0,sm:682,md:960,lg:1280,xl:1920}},sav3:{layout:{columns:{left:{width:{md:275,sm:88,xs:68}},middle:{width:{md:600}},right:{width:{lg:350,md:290}}}},borderWidth:1,borderColor:Dt,topBar:{height:54},drawerMenu:{width:280},popoverMenu:{borderRadius:4}},palette:{divider:Dt},shape:{borderRadius:24},overrides:{MuiToolbar:{root:{minHeight:"".concat(54,"px!important")}},MuiDialog:{paper:{margin:0},paperFullWidth:{width:"100%"}},MuiSvgIcon:{fontSizeLarge:{fontSize:"1.8rem"}},MuiFab:{root:{boxShadow:"rgba(101, 119, 134, 0.2) 0px 0px 8px, rgba(101, 119, 134, 0.25) 0px 1px 3px 1px"}},MuiButton:{outlined:{fontWeight:900}}}},_t=function(e){var t=Object(Wt.a)(E()({},Kt,e));return t=Object(Lt.a)(t)},Ht="#857990",qt={Light:_t(),Dark:_t({palette:{type:"dark"}}),"SAV3 Light":_t({palette:{primary:{light:"#7a7380",main:"#4e4854",dark:"#26212b"},secondary:{main:"#484854"}}}),"SAV3 Dark":_t({palette:{type:"dark",primary:{light:"#7a7380",main:"#4e4854",dark:"#26212b"},secondary:{main:"#484854"}},overrides:{MuiTypography:{colorPrimary:{color:Ht}},MuiButton:{outlinedPrimary:{color:Ht}}}})};Object.freeze(qt);var Vt=qt,Gt=Object(a.createContext)({theme:"Light",setTheme:null}),Zt=function(e){var t=Object(xt.a)("(prefers-color-scheme: dark)")?"Dark":"Light",n=localStorage.getItem("muiTheme")||t;Vt[n]||(console.warn("no available theme for '".concat(n,"'")),n=t);var s=Object(a.useState)(n),i=Object(d.a)(s,2),c=i[0],o=i[1],u=Vt[c],l={theme:c,setTheme:function(e){Vt[e]?(localStorage.setItem("muiTheme",e),o(e)):console.warn("no available theme for '".concat(e,"'"))}},p=e.children;return Object(r.jsx)(Gt.Provider,{value:l,children:Object(r.jsx)(Tt.a,{theme:u,children:p})})},Xt=n(1414),$t=n(1400);var Qt=function(){var e=Object(a.useContext)(Gt),t=e.theme,n=e.setTheme,s=[];for(var i in Vt)s.push(Object(r.jsx)($t.a,{value:i,children:i},i));return Object(r.jsx)(Xt.a,{value:t,onChange:function(e){n(e.target.value)},label:"Theme",variant:"outlined",children:s})};var Yt=function(){var e=Object(a.useContext)(q),t=e.languageCode,n=e.setLanguageCode,s=[];for(var i in H)s.push(Object(r.jsx)($t.a,{value:i,children:i},i));return Object(r.jsx)(Xt.a,{value:t,onChange:function(e){n(e.target.value)},label:"Translation",variant:"outlined",children:s})},en=n(1401),tn=n(1402),nn=Object(l.a)((function(e){var t;return{appBar:{backgroundColor:e.palette.background.default},appBarSticky:(t={position:"fixed",left:"auto",right:"auto"},Object(c.a)(t,e.breakpoints.up("xs"),{width:e.sav3.layout.columns.middle.width.md-2*e.sav3.borderWidth}),Object(c.a)(t,e.breakpoints.down("xs"),{width:"calc(100% - ".concat(2*e.sav3.borderWidth,"px)")}),t),appBarStickyAfter:{height:e.sav3.topBar.height+e.sav3.borderWidth}}}));var rn=function(e){var t=e.children,n=nn();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(en.a,{position:"sticky",color:"transparent",elevation:0,classes:{positionSticky:n.appBarSticky},className:n.appBar,children:[Object(r.jsx)(tn.a,{disableGutters:!0,children:t}),Object(r.jsx)(vt.a,{})]}),Object(r.jsx)("div",{className:n.appBarStickyAfter})]})},an=n(110),sn=n.n(an),cn=n(1407),on=n(1404),un=n(1405),ln=n(563),pn=n.n(ln),dn=n(265),fn=n.n(dn),bn=n(562),hn=n.n(bn),jn=n(564),vn=n.n(jn),xn=n(1403),gn=n(1420),On=function(){return Object(a.useContext)(q).languageCode},mn=n(212),yn=n.n(mn),wn=n(569),Cn=n(264),kn=n.n(Cn),Pn=n(559),Sn=n.n(Pn),In=n(560),Nn=n.n(In),Fn=n(20),Rn=n.n(Fn),Un=new(function(){function e(){Object(ne.a)(this,e),this.followingCache=fe.createInstance({name:"followingCache"}),this.blockedCache=fe.createInstance({name:"blockedCache"})}return Object(re.a)(e,[{key:"addFollowing",value:function(){var e=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()("string"===typeof t,"FollowManager.addFollowing invalid userCid '".concat(t,"'")),e.next=3,this.deleteBlocked(t);case 3:return e.next=5,this.followingCache.setItem(t,!0);case 5:return e.t0=lt,e.next=8,this.getAllFollowing();case 8:e.t1=e.sent,e.t0.setFollowing.call(e.t0,e.t1);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isFollowing",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()("string"===typeof t,"FollowManager.isFollowing invalid userCid '".concat(t,"'")),e.next=3,this.followingCache.getItem(t);case 3:return n=e.sent,e.abrupt("return",!!n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteFollowing",value:function(){var e=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()("string"===typeof t,"FollowManager.deleteFollowing invalid userCid '".concat(t,"'")),e.next=3,this.followingCache.removeItem(t);case 3:return e.t0=lt,e.next=6,this.getAllFollowing();case 6:e.t1=e.sent,e.t0.setFollowing.call(e.t0,e.t1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllFollowing",value:function(){return this.followingCache.keys()}},{key:"setAllFollowing",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()(Array.isArray(t),"FollowManager.setAllFollowing invalid userCids '".concat(t,"'")),e.next=3,this.followingCache.clear();case 3:n=Object(te.a)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=12;break}return a=r.value,e.next=10,this.addFollowing(a);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:return e.t1=lt,e.next=23,this.getAllFollowing();case 23:e.t2=e.sent,e.t1.setFollowing.call(e.t1,e.t2);case 25:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addBlocked",value:function(){var e=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()("string"===typeof t,"FollowManager.addBlocked invalid userCid '".concat(t,"'")),e.next=3,this.deleteFollowing(t);case 3:return e.next=5,this.blockedCache.setItem(t,!0);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isBlocked",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()("string"===typeof t,"FollowManager.isBlocked invalid userCid '".concat(t,"'")),e.next=3,this.blockedCache.getItem(t);case 3:return n=e.sent,e.abrupt("return",!!n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBlocked",value:function(){var e=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()("string"===typeof t,"FollowManager.deleteBlocked invalid userCid '".concat(t,"'")),e.next=3,this.blockedCache.removeItem(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllBlocked",value:function(){return this.blockedCache.keys()}},{key:"setAllBlocked",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()(Array.isArray(t),"FollowManager.setAllBlocked invalid userCids '".concat(t,"'")),e.next=3,this.blockedCache.clear();case 3:n=Object(te.a)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=12;break}return a=r.value,e.next=10,this.addBlocked(a);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()),Bn=Un;window.followManager=Un;var An=Object(a.createContext)(),Jn=function(e){var t=Object(a.useState)({}),n=Object(d.a)(t,2),s=n[0],i=n[1],o=Object(a.useState)({}),u=Object(d.a)(o,2),l=u[0],p=u[1];Object(a.useEffect)((function(){Object($.a)(X.a.mark((function e(){var t,n,r,a,s,c,o,u,l,d;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bn.getAllFollowing();case 2:return t=e.sent,e.next=5,Bn.getAllBlocked();case 5:n=e.sent,r={},a=Object(te.a)(t);try{for(a.s();!(s=a.n()).done;)c=s.value,r[c]=!0}catch(f){a.e(f)}finally{a.f()}i(r),o={},u=Object(te.a)(n);try{for(u.s();!(l=u.n()).done;)d=l.value,o[d]=!0}catch(f){u.e(f)}finally{u.f()}p(o);case 14:case"end":return e.stop()}}),e)})))()}),[]);var f={following:s,addFollowing:function(e){de()("string"===typeof e,"FollowingProvider.addFollowing invalid userCid '".concat(e,"'")),Bn.addFollowing(e),i((function(t){return Object(ee.a)(Object(ee.a)({},t),{},Object(c.a)({},e,!0))}))},deleteFollowing:function(e){de()("string"===typeof e,"FollowingProvider.deleteFollowing invalid userCid '".concat(e,"'")),Bn.deleteFollowing(e),i((function(t){return Object(ee.a)(Object(ee.a)({},t),{},Object(c.a)({},e,!1))}))},setAllFollowing:function(e){de()(Array.isArray(e),"FollowingProvider.setAllFollowing invalid userCids '".concat(e,"'")),Bn.setAllFollowing(e);var t,n={},r=Object(te.a)(e);try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(a){r.e(a)}finally{r.f()}i(n)},blocked:l,addBlocked:function(e){de()("string"===typeof e,"FollowingProvider.addBlocked invalid userCid '".concat(e,"'")),Bn.addBlocked(e),p((function(t){return Object(ee.a)(Object(ee.a)({},t),{},Object(c.a)({},e,!0))}))},deleteBlocked:function(e){de()("string"===typeof e,"FollowingProvider.deleteBlocked invalid userCid '".concat(e,"'")),Bn.deleteBlocked(e),p((function(t){return Object(ee.a)(Object(ee.a)({},t),{},Object(c.a)({},e,!1))}))},setAllBlocked:function(e){de()(Array.isArray(e),"FollowingProvider.setAllBlocked invalid userCids '".concat(e,"'")),Bn.setAllBlocked(e);var t,n={},r=Object(te.a)(e);try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(a){r.e(a)}finally{r.f()}p(n)}},b=e.children;return Object(r.jsx)(An.Provider,{value:f,children:b})},zn=function(e){de()(!e||"string"===typeof e,"useIsFollowing invalid userCid '".concat(e,"'"));var t=Object(a.useContext)(An),n=t.following,r=t.addFollowing,s=t.deleteFollowing,i=!!n[e],c=Object(a.useCallback)((function(t){e&&(de()("boolean"===typeof t,"setIsFollowing invalid value '".concat(t,"' not a boolean")),!0===t&&r(e),!1===t&&s(e))}),[e]);return e?[i,c]:[void 0,c]},Mn=Object(l.a)((function(e){return{menu:{"& .MuiPaper-rounded":{borderRadius:e.sav3.popoverMenu.borderRadius}},menuItemIcon:{minWidth:28},moreIconButton:{padding:e.spacing(.5),"& .MuiSvgIcon-root":{fontSize:"1.2rem"}}}}));function En(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userCid,n=Mn(),a=G(),s=zn(t),i=Object(d.a)(s,2),c=i[0],o=i[1],u=Object(r.jsxs)($t.a,{onClick:function(){return o(!0)},children:[Object(r.jsx)(h.a,{className:n.menuItemIcon,children:Object(r.jsx)(Sn.a,{fontSize:"small"})}),Object(r.jsx)(St.a,{children:a.Follow()})]});return c&&(u=Object(r.jsxs)($t.a,{onClick:function(){return o(!1)},children:[Object(r.jsx)(h.a,{className:n.menuItemIcon,children:Object(r.jsx)(Nn.a,{fontSize:"small"})}),Object(r.jsx)(St.a,{children:a.Unfollow()})]})),u}En.propTypes={userCid:Rn.a.string.isRequired};var Tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.post,n=Mn(),s=Object(a.useState)(null),i=Object(d.a)(s,2),c=i[0],o=i[1],u=kt();if(t.userCid===u)return Object(r.jsx)(U.a,{height:48,width:48});var l=function(e){o(e.currentTarget)},p=function(){o(null)};return Object(r.jsxs)("div",{onClick:function(e){return e.stopPropagation()},children:[Object(r.jsx)(jt.a,{className:n.moreIconButton,onClick:l,children:Object(r.jsx)(kn.a,{})}),Object(r.jsx)(wn.a,{className:n.menu,elevation:4,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:p,children:Object(r.jsx)(En,{userCid:t.userCid})})]})},Wn=Ye.a.urlTimeToLive;de()("number"===typeof Wn,"invalid permalink time to live '".concat(Wn,"'"));var Ln=function(e){var t,n;de()(e&&"string"===typeof e,"utils.url.decodeCid encodedCid '".concat(e,"' not a string"));try{var r=JSON.parse(window.atob(e));t=r.c,n=r.e}catch(a){throw Error("failed decoding cid: ".concat(a.message))}if(1e3*n<Date.now())throw Error("encoded cid '".concat(t,"' expired ").concat(new Date(1e3*n)));if(1e3*n-Wn>=Date.now())throw Error("encoded cid '".concat(t,"' too early '").concat(new Date(1e3*n),"' '").concat(new Date,"'"));return t},Dn=Ln,Kn=function(e){de()(e&&"string"===typeof e,"utils.url.encodeCid cid '".concat(e,"' not a string"));var t=Math.round((Date.now()+Wn)/1e3);return window.btoa(JSON.stringify({c:e,e:t})).replace(/=/g,"")},_n=function(e){try{return Ln(e),!1}catch(t){return!0}},Hn=function(){};var qn=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(a.useRef)(Hn);Object(a.useEffect)((function(){r.current=e})),Object(a.useEffect)((function(){n&&null!==t&&!1!==t&&r.current()}),[n]),Object(a.useEffect)((function(){if(null!==t&&!1!==t){var e=setInterval((function(){return r.current()}),t);return function(){return clearInterval(e)}}}),[t])},Vn=function(e){de()(!e||"string"===typeof e,"invalid postCid '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],s=n[1];return qn((function(){e?Object($.a)(X.a.mark((function t(){var n;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt.getPostRepliesCids(e);case 2:if(n=t.sent,JSON.stringify(n)!==JSON.stringify(r)){t.next=5;break}return t.abrupt("return");case 5:s(n);case 6:case"end":return t.stop()}}),t)})))():0!==r.length&&s([])}),1e3),r},Gn=n(561),Zn=n.n(Gn);function Xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=Object(a.useState)(!1),n=Object(d.a)(t,2),r=n[0],s=n[1],i=Object(a.useCallback)((function(e){var t=Zn()(e);s(t)}),[]);return Object(a.useEffect)((function(){if(r){var t=setTimeout((function(){s(!1)}),e);return function(){clearTimeout(t)}}}),[r,s,e]),[r,i]}var $n=function(e,t){de()("string"===typeof e,"themesUtils.scaleRgbaAlpha invalid rgbaString '".concat(e,"'")),de()("string"===typeof t||"number"===typeof t,"themesUtils.scaleRgbaAlpha invalid alpha '".concat(t,"'"));var n=e.match(/[\d.]+/g),r=Object(d.a)(n,4),a=r[0],s=r[1],i=r[2],c=r[3];return"rgba(".concat(a,", ").concat(s,", ").concat(i,", ").concat((c*t).toFixed(3),")")},Qn=Object(l.a)((function(e){return{imgMedia:{height:0,paddingTop:"56.25%"},avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor},parentPostLine:{margin:"auto",width:2},userCid:{wordBreak:"break-all",textDecoration:"inherit"},displayName:{color:"inherit",textDecoration:"inherit"},contentLink:{wordBreak:"break-all"},actions:{paddingTop:e.spacing(.5),maxWidth:.75*e.sav3.layout.columns.middle.width.md,marginLeft:e.spacing(-1)},actionIconButton:{padding:e.spacing(1),"& .MuiSvgIcon-root":{fontSize:"1rem",color:e.palette.text.secondary}},post:{cursor:"pointer","&:hover":{backgroundColor:$n(e.palette.action.hover,.4)},tapHighlightColor:"rgba(0, 0, 0, 0)",userSelect:"none"}}}));function Yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.post,n=e.isParent,s=Object(o.g)(),i=Object(o.f)(),c=On(),u=Qn(),l=or(t.timestamp,c),p=Kn(t.userCid),f="/profile/".concat(p),b=Kn(t.cid),h="/post/".concat(b),j=function(e){if(e.target.tagName.match(/DIV|P/)){var n=s.pathname.split("/"),r=Object(d.a)(n,3),a=r[1],c=r[2];if("post"===a)try{if(Dn(c)===t.cid)return}catch(o){}i.push(h)}};return Object(r.jsxs)(U.a,{px:2,pt:1.5,pb:.5,display:"flex",className:u.post,onClick:j,children:[Object(r.jsxs)(U.a,{pr:1.5,children:[Object(r.jsx)(Pt.a,{component:z.b,to:f,src:t.profile.thumbnailUrl&&sr(t.profile.thumbnailUrl),className:u.avatar}),n&&Object(r.jsx)(vt.a,{className:u.parentPostLine,orientation:"vertical"})]}),Object(r.jsxs)(U.a,{width:"100%",children:[Object(r.jsxs)(U.a,{display:"flex",children:[Object(r.jsxs)(U.a,{flexGrow:1,children:[Object(r.jsxs)(U.a,{display:"flex",children:[t.profile.displayName&&Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(St.a,{className:u.displayName,component:z.b,to:f,variant:"subtitle2",children:t.profile.displayName}),"\xa0",Object(r.jsx)(St.a,{variant:"subtitle2",children:"\xb7"}),"\xa0"]}),Object(r.jsx)(St.a,{variant:"subtitle2",children:l})]}),Object(r.jsx)(U.a,{children:Object(r.jsx)(St.a,{component:z.b,to:f,variant:"caption",color:"textSecondary",className:u.userCid,children:t.userCid})})]}),Object(r.jsx)(U.a,{children:Object(r.jsx)(Tn,{post:t})})]}),Object(r.jsx)(nr,{content:t.content}),Object(r.jsxs)(U.a,{display:"flex",justifyContent:"space-between",className:u.actions,children:[Object(r.jsx)(er,{parentPost:t}),Object(r.jsx)(jt.a,{className:u.actionIconButton,children:Object(r.jsx)(hn.a,{style:{transform:"rotate(90deg)"}})}),Object(r.jsx)(jt.a,{className:u.actionIconButton,children:Object(r.jsx)(pn.a,{})}),Object(r.jsx)(tr,{postCid:t.cid})]})]})]})}function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.parentPost,n=Qn(),s=Vn(t.cid),i=Object(a.useState)(!1),c=Object(d.a)(i,2),o=c[0],u=c[1];return Object(r.jsxs)(U.a,{display:"flex",alignItems:"center",onClick:function(e){return e.stopPropagation()},children:[Object(r.jsx)(jt.a,{className:n.actionIconButton,onClick:function(){return u(!0)},children:Object(r.jsx)(vn.a,{})}),0!==s.length&&Object(r.jsx)(St.a,{variant:"caption",children:s.length}),Object(r.jsx)(Ft,{parentPost:t,open:o,onClose:function(){return u(!1)}})]})}function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.postCid,n=Qn(),a=G(),s=Xn(1100),i=Object(d.a)(s,2),c=i[0],o=i[1],u=function(){var e=Kn(t);return"".concat(window.location.origin,"/#/post/").concat(e)};return Object(r.jsx)(gn.a,{title:a["Copied to clipboard"](),open:c,enterDelay:500,leaveDelay:200,children:Object(r.jsx)(jt.a,{onClick:function(){return o(u())},className:n.actionIconButton,children:Object(r.jsx)(fn.a,{})})})}function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.content,n=Qn(),a=[t],s=rr(t);if(s){var i=t.split(s),c=Object(d.a)(i,2),o=c[0],u=c[1],l=s;s.match(/^https?:\/\//)||(l="https://".concat(s)),a=[],o&&a.push(o),a.push(Object(r.jsx)(xn.a,{className:n.contentLink,variant:"body2",href:l,target:"_blank",rel:"noopener",children:s},"content link")),u&&a.push(u)}var p,f=ar(t);f&&(p=Object(r.jsx)(on.a,{className:n.imgMedia,image:f}),ir(f)&&(p=Object(r.jsx)(on.a,{controls:!0,autoPlay:!0,muted:!0,component:"video",image:f})));var b=f&&Object(r.jsx)(U.a,{pt:1,children:Object(r.jsx)(un.a,{variant:"outlined",children:p})});return Object(r.jsxs)(U.a,{children:[Object(r.jsx)(St.a,{variant:"body2",children:a}),b]})}var rr=function(e){if(e){de()("string"===typeof e,"post content '".concat(e,"' is not a string"));var t=e.match(yn()({strict:!1}));return t&&t[0]}},ar=function(e){if(e){de()("string"===typeof e,"post content '".concat(e,"' is not a string"));var t=e.match(yn()({strict:!1})),n=t&&t[0];if(n)return n=sr(n),cr(n)?(n.match(/^https?:\/\//)||(n="https://".concat(n)),n):void 0}},sr=function(e){return de()("string"===typeof e,"forceHttps link '".concat(e,"' not a string")),e=(e=e.trim()).replace(/^http:\/\//,"https://")},ir=function(e){return e.replace(/[#?].*/,"").match(/\.(mp4|webm)$/)},cr=function(e){return e.replace(/[#?].*/,"").match(/\.(jpeg|jpg|png|gif|mp4|webm)$/)},or=function(e,t){var n=Object(a.useState)(),r=Object(d.a)(n,2),s=r[0],i=r[1];return Object(a.useEffect)((function(){var n=ur(e,t);i(n)}),[e,t]),s},ur=function(e,t){var n=864e5,r=1e3*e,a=new Date(r).toLocaleString(t,{month:"short",day:"numeric"});return Date.now()>r+31536e6&&(a=new Date(r).toLocaleString(t,{year:"numeric",month:"short",day:"numeric"})),Date.now()<r+n&&(a=Object(L.a)(r,t)),a},lr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.post,n=[];return t.parentPost&&n.push(Object(r.jsx)(Yn,{isParent:!0,post:t.parentPost},"parent")),n.push(Object(r.jsx)(Yn,{isParent:t.isParent,post:t},t.cid)),Object(r.jsx)(a.Fragment,{children:n})},pr=n(566),dr=n(1406);var fr=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.posts,a=t.next,s=t.hasMore,i=[],c=Object(te.a)(n);try{for(c.s();!(e=c.n()).done;){var o=e.value;i.push(Object(r.jsxs)("div",{children:[Object(r.jsx)(lr,{post:o}),Object(r.jsx)(vt.a,{})]},o.contentCid+o.timestamp))}}catch(u){c.e(u)}finally{c.f()}return Object(r.jsx)(pr.a,{dataLength:i.length,next:a,hasMore:s,loader:Object(r.jsx)(U.a,{width:"100%",p:2,justifyContent:"center",display:"flex",style:{overflow:"hidden"},children:Object(r.jsx)(dr.a,{size:24})}),children:i})};var br=function(e){if(e){de()("string"===typeof e,"user description '".concat(e,"' is not a string"));var t=e.match(yn()({strict:!1}));return t&&t[0]}},hr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.description,n=[t],a=br(t);if(a){var s=t.split(a),i=Object(d.a)(s,2),c=i[0],o=i[1],u=a;a.match(/$https?:\/\//)||(u="https://".concat(a)),n=[],c&&n.push(c),n.push(Object(r.jsx)(xn.a,{variant:"body2",href:u,target:"_blank",rel:"noopener",children:a})),o&&n.push(o)}return Object(r.jsx)(St.a,{variant:"body2",children:n})},jr=Object(l.a)((function(e){return{errorMessage:{overflow:"hidden"},description:{"& textarea":{overflow:"hidden"}},content:{"& input":{padding:e.spacing(2),paddingLeft:e.spacing(2.5),paddingRight:e.spacing(2.5)},'& label[data-shrink="false"]':{transform:"translate(20px, 18px) scale(1)"},"& textarea":{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5)},"& fieldset":{opacity:.25},"& .Mui-focused fieldset":{opacity:1}}}}));var vr=function(e){var t=e.open,n=e.onClose,s=e.previousProfile,i=G(),o=jr(),u=Object(a.useState)(s),l=Object(d.a)(u,2),p=l[0],f=l[1],b=Object(a.useState)(),h=Object(d.a)(b,2),j=h[0],v=h[1];Object(a.useEffect)((function(){f(s)}),[JSON.stringify(s)]);var x=function(e){var t=e.target,n=t.id,r=t.value,a=Object(ee.a)(Object(ee.a)({},p),{},Object(c.a)({},n,r));f(a)},g=function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt.editUserProfile(p);case 3:v(null),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),O=Object(r.jsxs)(U.a,{pt:1,pb:1.5,className:o.content,children:[Object(r.jsx)(Q.a,{onChange:x,autoFocus:!0,margin:"dense",id:"displayName",label:i["Display name"](),fullWidth:!0,variant:"outlined",value:p.displayName||""}),Object(r.jsx)(Q.a,{onChange:x,margin:"dense",id:"thumbnailUrl",label:i["Thumbnail URL"](),fullWidth:!0,variant:"outlined",value:p.thumbnailUrl||""}),Object(r.jsx)(Q.a,{onChange:x,margin:"dense",id:"bannerUrl",label:i["Banner URL"](),fullWidth:!0,variant:"outlined",value:p.bannerUrl||""}),Object(r.jsx)(Q.a,{className:o.description,onChange:x,margin:"dense",id:"description",label:i.Description(),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",value:p.description||""}),j&&Object(r.jsx)(pt.a,{classes:{message:o.errorMessage},severity:"error",children:j})]}),m=Object(r.jsx)("div",{children:Object(r.jsx)(R.a,{disableElevation:!0,variant:"contained",onClick:g,color:"primary",children:"SAV3"})});return Object(r.jsx)(Ot,{open:t,onClose:n,content:O,actions:m})},xr=Object(l.a)((function(e){return{menu:{"& .MuiPaper-rounded":{borderRadius:e.sav3.popoverMenu.borderRadius}},menuItemIcon:{minWidth:28},moreIconButton:{padding:e.spacing(1.25)}}}));function gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userCid,n=e.onClose,a=xr(),s=G(),i=Xn(1100),c=Object(d.a)(i,2),o=c[0],u=c[1],l=function(){var e=Kn(t);return"".concat(window.location.origin,"/#/profile/").concat(e)},p=function(){u(l()),n&&n()};return Object(r.jsx)(gn.a,{title:s["Copied to clipboard"](),open:o,enterDelay:500,leaveDelay:200,children:Object(r.jsxs)($t.a,{onClick:p,children:[Object(r.jsx)(h.a,{className:a.menuItemIcon,children:Object(r.jsx)(fn.a,{fontSize:"small"})}),Object(r.jsx)(St.a,{children:s.Share()})]})})}var Or=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userCid,n=xr(),s=Object(a.useState)(null),i=Object(d.a)(s,2),c=i[0],o=i[1],u=function(e){o(e.currentTarget)},l=function(){o(null)};return Object(r.jsxs)("div",{children:[Object(r.jsx)(jt.a,{className:n.moreIconButton,onClick:u,children:Object(r.jsx)(kn.a,{})}),Object(r.jsx)(wn.a,{className:n.menu,elevation:4,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:l,children:Object(r.jsx)(gr,{userCid:t,onClose:l})})]})};var mr=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current},yr=ge()("sav3:hooks:use-user-post-cids"),wr=function(e){de()(!e||"string"===typeof e,"invalid userCid '".concat(JSON.stringify(e),"'"));var t=yt(e),n=t&&t.lastPostCid,r=Object(a.useState)([]),s=Object(d.a)(r,2),i=s[0],c=s[1];yr({userIpnsContent:t,lastPostCid:n,userPostCids:i});var o=mr(e),u=o&&o!==e;return Object(a.useEffect)((function(){if(n&&!u){var e=100,t=!0;return Object($.a)(X.a.mark((function r(){var a,s,o,u,l,p,d,f;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!0,s=!1,r.prev=2,u=function(){var n=d;return t?i.includes(n)?"continue":(c((function(e){return[].concat(Object(Y.a)(e),[n])})),e--?void 0:{v:void 0}):{v:void 0}},l=Object(We.a)(lt.getPreviousPostCids(n));case 5:return r.next=7,l.next();case 7:return p=r.sent,a=p.done,r.next=11,p.value;case 11:if(d=r.sent,a){r.next=21;break}if("continue"!==(f=u())){r.next=16;break}return r.abrupt("continue",18);case 16:if("object"!==typeof f){r.next=18;break}return r.abrupt("return",f.v);case 18:a=!0,r.next=5;break;case 21:r.next=27;break;case 23:r.prev=23,r.t0=r.catch(2),s=!0,o=r.t0;case 27:if(r.prev=27,r.prev=28,a||null==l.return){r.next=32;break}return r.next=32,l.return();case 32:if(r.prev=32,!s){r.next=35;break}throw o;case 35:return r.finish(32);case 36:return r.finish(27);case 37:case"end":return r.stop()}}),r,null,[[2,23,27,37],[28,,32,36]])})))(),function(){t=!1}}i.length&&c([])}),[n,e]),i},Cr=ge()("sav3:hooks:use-posts"),kr=function(e){de()(Array.isArray(e),"invalid postCids '".concat(JSON.stringify(e),"'"));var t={},n=Object(a.useState)(t),r=Object(d.a)(n,2),s=r[0],i=r[1];return Cr({postCids:e,posts:s}),Object(a.useEffect)((function(){if(e.length){var n,r=Object(te.a)(e);try{var a=function(){var e=n.value;if(!e||"string"!==typeof e)return"continue";lt.getPost(e).then((function(t){i((function(n){return Object(ee.a)(Object(ee.a)({},n),{},Object(c.a)({},e,t))}))}))};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}}else JSON.stringify(s)!==JSON.stringify(t)&&i(t)}),[JSON.stringify(e)]),s},Pr=ge()("sav3:hooks:use-users-ipns-contents"),Sr=function(e){var t,n={},r=Object(te.a)(e);try{for(r.s();!(t=r.n()).done;){n[t.value]={}}}catch(a){r.e(a)}finally{r.f()}return n},Ir=function(e){de()(Array.isArray(e),"invalid ipnsPaths '".concat(JSON.stringify(e),"'"));var t,n=Object(te.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;de()(r&&"string"===typeof r,"invalid ipnsPaths '".concat(JSON.stringify(e),"' contains non string"))}}catch(v){n.e(v)}finally{n.f()}var s,i=Object(a.useState)(Sr(e)),o=Object(d.a)(i,2),u=o[0],l=o[1],p=new Set(e),f=mr(p),b=[],h=Object(te.a)(p);try{for(h.s();!(s=h.n()).done;){var j=s.value;f&&f.has(j)||b.push(j)}}catch(v){h.e(v)}finally{h.f()}Pr({ipnsPaths:e,usersIpnsContents:u,unsubscribedIpnsPaths:b});return Object(a.useEffect)((function(){if(function(){var t,n=[],r=[],a=Object(te.a)(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;u[s]||n.push(s)}}catch(v){a.e(v)}finally{a.f()}for(var i in u)p.has(i)||r.push(i);(n.length||r.length)&&l((function(e){var t,a=Object(ee.a)({},e),s=Object(te.a)(n);try{for(s.s();!(t=s.n()).done;){var i=t.value;a[i]||(a[i]={})}}catch(v){s.e(v)}finally{s.f()}var c,o=Object(te.a)(r);try{for(o.s();!(c=o.n()).done;)delete a[c.value]}catch(v){o.e(v)}finally{o.f()}return a}))}(),b.length){var t=function(){var e=Object($.a)(X.a.mark((function e(t,n){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.has(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,lt.getUserIpnsContent(n);case 4:r=e.sent,l((function(e){return Object(ee.a)(Object(ee.a)({},e),{},Object(c.a)({},t,r))}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return lt.on("publish",t),Object($.a)(X.a.mark((function e(){var t,n,r,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt.subscribeToIpnsPaths(b);case 2:t=e.sent,n=Object(te.a)(t.entries()),e.prev=4,a=function(){var e=Object(d.a)(r.value,2),t=e[0],n=e[1];if(!n)return"continue";var a=b[t];lt.getUserIpnsContent(n).then((function(e){l((function(t){return Object(ee.a)(Object(ee.a)({},t),{},Object(c.a)({},a,e))}))}))},n.s();case 7:if((r=n.n()).done){e.next=13;break}if("continue"!==a()){e.next=11;break}return e.abrupt("continue",11);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[4,15,18,21]])})))(),function(){lt.off("publish",t)}}}),[JSON.stringify(e)]),u},Nr=ge()("sav3:hooks:use-users-profiles"),Fr=function(e){de()(Array.isArray(e),"invalid userCids '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)({}),n=Object(d.a)(t,2),r=n[0],s=n[1],i=Ir(e),o={};for(var u in i)o[u]=i[u].profileCid;var l=mr(o);Nr({usersIpnsContents:i,userCids:e,profileCids:o,previousProfileCids:l,usersProfiles:r});return Object(a.useEffect)((function(){var e=function(e){var t=o[e];return t&&"string"===typeof t?function(e){return l&&l[e]&&l[e].profileCid&&o[e]&&o[e].profileCid===l[e].profileCid}(e)?"continue":void lt.getUserProfile(t).then((function(t){s((function(n){return Object(ee.a)(Object(ee.a)({},n),{},Object(c.a)({},e,t))}))})):"continue"};for(var t in o)e(t)}),[JSON.stringify(o)]),r},Rr=ge()("sav3:hooks:use-parent-posts-with-profiles"),Ur=function(e){var t=new Set;if(Array.isArray(e)){var n,r=Object(te.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;a&&a.parentPostCid&&t.add(a.parentPostCid)}}catch(i){r.e(i)}finally{r.f()}}else for(var s in e)e[s]&&e[s].parentPostCid&&t.add(e[s].parentPostCid);return Object(Y.a)(t)},Br=function(e){var t=new Set;for(var n in e)e[n]&&e[n].userCid&&t.add(e[n].userCid);return Object(Y.a)(t)},Ar=function(e){de()(e&&"object"===typeof e,"invalid postsObjectOrArray '".concat(JSON.stringify(e),"'"));var t=Ur(e),n=kr(t),r=Br(n),a=Fr(r),s={};for(var i in n)s[i]=Object(ee.a)({},n[i]),s[i].profile=a[s[i].userCid]||{};return Rr({parentPostCids:t,parentPosts:n,profiles:a,userCids:r,parentPostsWithProfiles:s,postsObjectOrArray:e}),s},Jr=ge()("sav3:views:profile"),zr="data:image/png;base64,",Mr=Object(l.a)((function(e){return{banner:{paddingTop:"33.25%"},avatar:Object(c.a)({position:"absolute",width:e.sav3.layout.columns.middle.width.md/4,height:e.sav3.layout.columns.middle.width.md/4,marginTop:e.sav3.layout.columns.middle.width.md/-8,marginLeft:e.spacing(2),borderWidth:e.spacing(.5),borderStyle:"solid",borderColor:e.palette.background.default},e.breakpoints.down(e.sav3.layout.columns.middle.width.md),{width:"25vw",height:"25vw",marginTop:"-12.5vw",borderWidth:e.spacing(.25)}),displayName:{wordBreak:"break-all"}}}));function Er(e){var t=e.profile,n=G(),s=Object(a.useState)(!1),i=Object(d.a)(s,2),c=i[0],o=i[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(R.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){return o(!0)},children:n["Edit profile"]()}),Object(r.jsx)(vr,{previousProfile:t,open:c,onClose:function(){return o(!1)}})]})}function Tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userCid,n=G(),a=zn(t),s=Object(d.a)(a,2),i=s[0],c=s[1],o=function(e){t&&c(e)},u=Object(r.jsx)(R.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){return o(!0)},children:n.Follow()});return i&&(u=Object(r.jsx)(R.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){return o(!1)},children:n.Unfollow()})),u}Tr.propTypes={userCid:Rn.a.string};var Wr=function(e){return de()("string"===typeof e,"forceHttps link '".concat(e,"' not a string")),e=(e=e.trim()).replace(/^http:\/\//,"https://")},Lr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userCid,n=kt(),s=Mr(),i=Ct(t),c=wr(t),o=Object(a.useState)(10),u=Object(d.a)(o,2),l=u[0],p=u[1],f=function(){return p((function(e){return e+10}))},b=kr(c),h=Ar(b),j=Object.values(b).sort((function(e,t){return t.timestamp-e.timestamp}));for(var v in j){var x=h[j[v].parentPostCid];j[v]=Object(ee.a)(Object(ee.a)({},j[v]),{},{profile:i,parentPost:x})}var g=Object(Y.a)(j);g.length>l&&(g.length=l);var O,m=j.length>g.length;Jr({ownCid:n,userCid:t,posts:j,profile:i}),t===n?O=Object(r.jsx)(Er,{profile:i}):n&&(O=Object(r.jsx)(Tr,{userCid:t}));var y=i.description||"";return y&&y.length>140&&(y=y.substring(0,140)),Object(r.jsxs)("div",{className:s.root,children:[Object(r.jsx)(on.a,{className:s.banner,image:i.bannerUrl&&Wr(i.bannerUrl)||zr}),Object(r.jsx)(Pt.a,{src:i.thumbnailUrl&&Wr(i.thumbnailUrl),className:s.avatar}),Object(r.jsxs)(U.a,{p:2,pb:0,display:"flex",flexDirection:"row-reverse",children:[O,Object(r.jsx)(Or,{userCid:t})]}),Object(r.jsx)(cn.a,{className:s.displayName,pb:0,title:i.displayName,subheader:t}),Object(r.jsx)(U.a,{p:2,pt:0,children:Object(r.jsx)(hr,{description:y})}),Object(r.jsx)(vt.a,{}),Object(r.jsx)(fr,{posts:g,next:f,hasMore:m})]})},Dr=ge()("sav3:views:profile");var Kr=function(){var e,t=Object(o.h)().encodedCid,n=t&&_n(t);!n&&t&&(e=Dn(t));var a,s=!t,i=kt(),c=Ct(a=s?i:e),u=Object(o.f)(),l=G();return Dr({userCid:a,urlUserCid:e,urlIsExpired:n,isOwnProfile:s}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(rn,{children:[Object(r.jsx)(U.a,{pr:1,children:Object(r.jsx)(jt.a,{onClick:function(){return u.goBack()},children:Object(r.jsx)(sn.a,{})})}),Object(r.jsx)(St.a,{noWrap:!0,variant:"h6",children:c.displayName||s&&l["Edit profile"]()})]}),n&&Object(r.jsx)(U.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:Object(r.jsx)(St.a,{variant:"body1",children:l["URL expired"]()+"."})}),!n&&Object(r.jsx)(Lr,{userCid:a})]})},_r=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt.getOwnPeerCid();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},Hr=n(1417),qr=Object(l.a)((function(e){return{text:{},root:{width:e.sav3.drawerMenu.width}}}));var Vr=function(){var e=qr(),t=G();return Object(r.jsx)("div",{className:e.root,children:Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(b.a,{button:!0,component:z.b,to:"/following",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(C.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Following(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:z.b,to:"/stats",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(P.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Stats(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:z.b,to:"/profile",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(O.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Profile(),className:e.text})]}),Object(r.jsxs)(b.a,{children:[Object(r.jsx)(Qt,{}),Object(r.jsx)(Yt,{})]})]})})},Gr=Object(l.a)((function(e){return{avatar:{width:e.sav3.topBar.height/1.75,height:e.sav3.topBar.height/1.75}}}));var Zr=function(){var e=_r(),t=Gr(),n=Ct(e),s=Object(a.useState)(!1),i=Object(d.a)(s,2),c=i[0],o=i[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(jt.a,{style:{backgroundColor:"transparent"},disableRipple:!0,disableFocusRipple:!0,onClick:function(){return o(!0)},children:Object(r.jsx)(Pt.a,{src:n.thumbnailUrl,className:t.avatar})}),Object(r.jsx)(Hr.a,{achor:"left",elevation:2,open:c,onClose:function(){return o(!1)},children:Object(r.jsx)(Vr,{})})]})},Xr=Object(l.a)((function(e){return{errorMessage:{overflow:"hidden"},content:{"& textarea":{overflow:"hidden"},"& fieldset":{border:"none"},"& .MuiInputBase-root":{paddingLeft:0,paddingRight:0},marginBottom:e.spacing(1)},contentInput:{paddingTop:0,paddingBottom:0},avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor}}}));var $r=function(){var e=G(),t=Xr(),n=Object(p.a)(),s=kt(),i=Ct(s),c=Object(a.useState)(""),o=Object(d.a)(c,2),u=o[0],l=o[1],f=Object(a.useState)(),b=Object(d.a)(f,2),h=b[0],j=b[1],v=function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt.publishPost({content:u});case 3:j(null),l(""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),x=Object(r.jsxs)("div",{children:[Object(r.jsx)(U.a,{children:Object(r.jsx)(vt.a,{})}),Object(r.jsxs)(U.a,{alignItems:"center",display:"flex",height:n.sav3.topBar.height,children:[Object(r.jsx)(U.a,{flexGrow:1}),Object(r.jsx)(R.a,{disableElevation:!0,variant:"contained",onClick:v,color:"primary",children:"SAV3"})]})]});return Object(r.jsxs)(U.a,{px:2,display:"flex",children:[Object(r.jsx)(U.a,{pr:1.5,py:1.5,children:Object(r.jsx)(Pt.a,{src:i.thumbnailUrl,className:t.avatar})}),Object(r.jsxs)(U.a,{pt:1,width:"100%",children:[Object(r.jsx)(Q.a,{className:t.content,onChange:function(e){var t=e.target.value;try{t.length>140&&(t=t.subtring(0,140)),l(t)}catch(n){}},margin:"dense",id:"content",placeholder:e["Uncensorable content"](),fullWidth:!0,multiline:!0,variant:"outlined",value:u}),h&&Object(r.jsx)(U.a,{py:1,children:Object(r.jsx)(pt.a,{classes:{message:t.errorMessage},severity:"error",children:h})}),x]})]})},Qr=function(){var e=Object(a.useContext)(An),t=e.following,n=e.setAllFollowing;return[Object.keys(t).filter((function(e){return!!t[e]})),n]},Yr=n(567),ea=n.n(Yr),ta=function(e){var t=e.toString();return{has:function(e){return!!localStorage.getItem("".concat(t,"-").concat(e))},get:function(e){return JSON.parse(localStorage.getItem("".concat(t,"-").concat(e)))},set:function(e,n){Object($.a)(X.a.mark((function r(){return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.data;case 2:n.data=r.sent,localStorage.setItem("".concat(t,"-").concat(e),JSON.stringify(n));case 4:case"end":return r.stop()}}),r)})))()},delete:function(e){localStorage.removeItem("".concat(t,"-").concat(e))},clear:function(){throw Error("localStorageMemoize.clear() not implemented")}}},na=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ta(e);return ea()(e,Object(ee.a)(Object(ee.a)({},t),{},{cache:n}))},ra=n(88),aa=n.n(ra),sa=function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ia();case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ia=na(function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r,a,s,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ye.a.bootstrapUsersGoogleSheetId,de()(t&&"string"===typeof t,"fetchBootstrapUsersCidsFromGoogleSheet invalid google sheet id '".concat(t,"'")),r=[],e.prev=3,e.next=6,fetch("https://docs.google.com/spreadsheets/d/".concat(t,"/export?format=csv"));case 6:return n=e.sent,e.next=9,n.text();case 9:n=(n=e.sent).split("\n"),a=Object(te.a)(n);try{for(a.s();!(s=a.n()).done;)i=s.value,aa.a.cid(i.trim())&&r.push(i.trim())}catch(c){a.e(c)}finally{a.f()}e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(3),Error("failed fetching bootstrap users from google sheet '".concat(t,"' response '").concat(n,"': ").concat(e.t0.message));case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(){return e.apply(this,arguments)}}(),{maxAge:36e5}),ca={getBootstrapUsersCids:sa},oa=ge()("sav3:hooks:following:use-bootstrap-users-cids"),ua=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1];return oa({bootstrapUsersCids:n}),Object(a.useEffect)((function(){Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca.getBootstrapUsersCids();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},la=ge()("sav3:hooks:use-users-following"),pa={},da=function(e,t){e=new Set(e);var n,r=Object(te.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.add(a)}}catch(s){r.e(s)}finally{r.f()}return Object(Y.a)(e)},fa=function(e){de()(Array.isArray(e),"invalid userCids '".concat(JSON.stringify(e),"'"));var t=new Set(e),n=JSON.stringify(Object(Y.a)(t)),r=Object(a.useState)([]),s=Object(d.a)(r,2),i=s[0],c=s[1];return la({userCids:e,usersFollowing:i}),Object(a.useEffect)((function(){var e,n=Object(te.a)(t);try{var r=function(){var t=e.value,n=pa[t];n?c((function(e){return da(e,n)})):lt.getUserFollowing(t).then((function(e){pa[t]=e,c((function(t){return da(t,e)}))}))};for(n.s();!(e=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}}),[n]),i},ba=ge()("sav3:hooks:use-users-post-cids"),ha=function(e){var t,n={},r=Object(te.a)(e);try{for(r.s();!(t=r.n()).done;){n[t.value]=[]}}catch(a){r.e(a)}finally{r.f()}return n},ja=function(e){de()(Array.isArray(e),"invalid userCids '".concat(JSON.stringify(e),"'"));var t=Ir(e),n=new Set(e),r=Object(a.useState)(ha(e)),s=Object(d.a)(r,2),i=s[0],c=s[1],o=mr(t);ba({userCids:e,usersIpnsContents:t,previousUsersIpnsContents:o,usersPostCids:i});return Object(a.useEffect)((function(){!function(){var t,r=[],a=[],s=Object(te.a)(e);try{for(s.s();!(t=s.n()).done;){var o=t.value;i[o]||r.push(o)}}catch(l){s.e(l)}finally{s.f()}for(var u in i)n.has(u)||a.push(u);(r.length||a.length)&&c((function(e){var t,n=Object(ee.a)({},e),s=Object(te.a)(r);try{for(s.s();!(t=s.n()).done;){var i=t.value;n[i]||(n[i]=[])}}catch(l){s.e(l)}finally{s.f()}var c,o=Object(te.a)(a);try{for(o.s();!(c=o.n()).done;)delete n[c.value]}catch(l){o.e(l)}finally{o.f()}return n}))}();var r=function(e){var n=t[e]&&t[e].lastPostCid,r=o&&o[e]&&o[e].lastPostCid;if(!n||n===r)return"continue";var a=20;Object($.a)(X.a.mark((function t(){var r,s,o,u,l,p,d,f;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,s=!1,t.prev=2,u=function(){var t=d;return i[e].includes(t)?"continue":(c((function(n){return(n=JSON.parse(JSON.stringify(n)))[e]=[].concat(Object(Y.a)(n[e]),[t]),n})),a--?void 0:{v:void 0})},l=Object(We.a)(lt.getPreviousPostCids(n));case 5:return t.next=7,l.next();case 7:return p=t.sent,r=p.done,t.next=11,p.value;case 11:if(d=t.sent,r){t.next=21;break}if("continue"!==(f=u())){t.next=16;break}return t.abrupt("continue",18);case 16:if("object"!==typeof f){t.next=18;break}return t.abrupt("return",f.v);case 18:r=!0,t.next=5;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(2),s=!0,o=t.t0;case 27:if(t.prev=27,t.prev=28,r||null==l.return){t.next=32;break}return t.next=32,l.return();case 32:if(t.prev=32,!s){t.next=35;break}throw o;case 35:return t.finish(32);case 36:return t.finish(27);case 37:case"end":return t.stop()}}),t,null,[[2,23,27,37],[28,,32,36]])})))()};for(var a in t)r(a)}),[JSON.stringify(t)]),i},va=ge()("sav3:hooks:feed:feed-provider"),xa=Object(a.createContext)(),ga=function(e,t){var n,r=[],a=Object(te.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(e[s]){var i,c=Object(te.a)(e[s]);try{for(c.s();!(i=c.n()).done;){var o=i.value;r.push(o)}}catch(u){c.e(u)}finally{c.f()}}}}catch(u){a.e(u)}finally{a.f()}return r},Oa=function(e){var t=new Set;for(var n in e){var r,a=Object(te.a)(e[n]);try{for(a.s();!(r=a.n()).done;){var s=r.value;t.add(s)}}catch(i){a.e(i)}finally{a.f()}}return t},ma=function(e){var t=Object(a.useState)({}),n=Object(d.a)(t,2),s=n[0],i=n[1],o=Ar(s),u=kt(),l=Qr(),p=Object(d.a)(l,1)[0],f=ua(),b=fa([].concat(Object(Y.a)(p),Object(Y.a)(f))),h=new Set([].concat(Object(Y.a)(p),Object(Y.a)(f),Object(Y.a)(b)));u&&h.add(u);var j=Object(Y.a)(h),v=ja(j),x=Oa(v),g=mr(x),O=JSON.stringify(v),m=Fr(j),y=ga(v,p),w=ga(v,j),C=function(){var e=Object($.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt.getPost(t);case 2:n=e.sent,i((function(e){return Object(ee.a)(Object(ee.a)({},e),{},Object(c.a)({},t,n))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){for(var e in v){var t,n=Object(te.a)(v[e]);try{for(n.s();!(t=n.n()).done;){var r=t.value;g&&g.has(r)||C(r)}}catch(a){n.e(a)}finally{n.f()}}}),[O]),va({ownCid:u,followingCids:p,bootstrapUsersCids:f,followingOfFollowingCids:b,usersPostCids:v,posts:s,profiles:m,feedPostCids:y,homePostCids:w,parentPosts:o});var k={parentPosts:o,posts:s,profiles:m,feedPostCids:y,homePostCids:w},P=e.children;return Object(r.jsx)(xa.Provider,{value:k,children:P})},ya=ge()("sav3:hooks:feed:use-home-posts"),wa=function(){var e,t=Object(a.useContext)(xa),n=t.posts,r=t.profiles,s=t.homePostCids,i=t.parentPosts,c=Object(a.useState)(10),o=Object(d.a)(c,2),u=o[0],l=o[1],p=Object(a.useState)([]),f=Object(d.a)(p,2),b=f[0],h=f[1],j=[],v=Object(te.a)(s);try{for(v.s();!(e=v.n()).done;){var x=e.value;n[x]&&j.push(n[x])}}catch(O){v.e(O)}finally{v.f()}Object(a.useEffect)((function(){if(!(b.length>=u)&&!(j.length<=b.length)){var e=j.filter((function(e){var t,n=Object(te.a)(b);try{for(n.s();!(t=n.n()).done;){if(t.value.cid===e.cid)return!1}}catch(O){n.e(O)}finally{n.f()}return!0})).sort((function(e,t){return t.timestamp-e.timestamp}));h((function(t){var n,a=JSON.parse(JSON.stringify(t)),s=Object(te.a)(e);try{for(s.s();!(n=s.n()).done;){var c=n.value;if(a.length>=u)break;a.push(c)}}catch(O){s.e(O)}finally{s.f()}var o,l=Object(te.a)(a);try{for(l.s();!(o=l.n()).done;){var p=o.value;p.profile=r[p.userCid]||{}}}catch(O){l.e(O)}finally{l.f()}var d,f=Object(te.a)(a);try{for(f.s();!(d=f.n()).done;){var b=d.value;b.parentPost=i[b.parentPostCid]}}catch(O){f.e(O)}finally{f.f()}return a}))}}),[u,JSON.stringify(j),JSON.stringify(r)]);var g=j.length>b.length;return ya({homePosts:b,postCount:u,posts:n,hasMore:g}),{posts:b,next:function(){l((function(e){return e+10}))},hasMore:g,reset:function(){l(10),h([])}}},Ca=ge()("sav3:views:home");var ka=function(){var e=Object(p.a)(),t=Object(xt.a)(e.breakpoints.down("xs")),n=G(),a=wa(),s=a.posts,i=a.next,c=a.hasMore;Ca({posts:s});var o=Object(r.jsx)(fr,{posts:s,next:i,hasMore:c});return s.length||(o=Object(r.jsxs)(U.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(r.jsx)(dr.a,{size:24}),Object(r.jsx)(U.a,{p:.5}),Object(r.jsx)(St.a,{variant:"body1",children:n["Connecting to peers"]()+"..."})]})),Object(r.jsxs)("div",{children:[Object(r.jsxs)(rn,{children:[t&&Object(r.jsx)(U.a,{pl:2,pr:1,children:Object(r.jsx)(Zr,{})}),Object(r.jsx)(U.a,{pl:2,children:Object(r.jsx)(St.a,{noWrap:!0,variant:"h6",children:n.Home()})})]}),!t&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(U.a,{pb:1,children:[Object(r.jsx)($r,{}),Object(r.jsx)(vt.a,{})]}),Object(r.jsx)(vt.a,{})]}),o]})},Pa=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bn.getAllFollowing();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},Sa=ge()("sav3:hooks:feed:use-feed-posts"),Ia=function(){var e,t=Object(a.useContext)(xa),n=t.posts,r=t.profiles,s=t.feedPostCids,i=t.parentPosts,c=Object(a.useState)(10),o=Object(d.a)(c,2),u=o[0],l=o[1],p=Object(a.useState)([]),f=Object(d.a)(p,2),b=f[0],h=f[1],j=[],v=Object(te.a)(s);try{for(v.s();!(e=v.n()).done;){var x=e.value;n[x]&&j.push(n[x])}}catch(O){v.e(O)}finally{v.f()}Object(a.useEffect)((function(){if(!(b.length>=u)&&!(j.length<=b.length)){var e=j.filter((function(e){var t,n=Object(te.a)(b);try{for(n.s();!(t=n.n()).done;){if(t.value.cid===e.cid)return!1}}catch(O){n.e(O)}finally{n.f()}return!0})).sort((function(e,t){return t.timestamp-e.timestamp}));h((function(t){var n,a=JSON.parse(JSON.stringify(t)),s=Object(te.a)(e);try{for(s.s();!(n=s.n()).done;){var c=n.value;if(a.length>=u)break;a.push(c)}}catch(O){s.e(O)}finally{s.f()}var o,l=Object(te.a)(a);try{for(l.s();!(o=l.n()).done;){var p=o.value;p.profile=r[p.userCid]||{}}}catch(O){l.e(O)}finally{l.f()}var d,f=Object(te.a)(a);try{for(f.s();!(d=f.n()).done;){var b=d.value;b.parentPost=i[b.parentPostCid]}}catch(O){f.e(O)}finally{f.f()}return a}))}}),[u,JSON.stringify(j),JSON.stringify(r)]);var g=j.length>b.length;return Sa({feedPosts:b,postCount:u,posts:n,hasMore:g}),{posts:b,next:function(){l((function(e){return e+10}))},hasMore:g,reset:function(){l(10),h([])}}},Na=ge()("sav3:views:feed");var Fa=function(){var e=Object(p.a)(),t=Object(xt.a)(e.breakpoints.down("xs")),n=G(),a=Pa(),s=Ia(),i=s.posts,c=s.next,o=s.hasMore;Na({posts:i});var u=Object(r.jsx)(fr,{posts:i,next:c,hasMore:o});return i.length||(u=Object(r.jsxs)(U.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(r.jsx)(dr.a,{size:24}),Object(r.jsx)(U.a,{p:.5}),Object(r.jsx)(St.a,{variant:"body1",children:n["Connecting to peers"]()+"..."})]})),i.length||a.length||(u=Object(r.jsx)(U.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:Object(r.jsx)(St.a,{variant:"body1",children:n["Not following anyone"]()+"..."})})),Object(r.jsxs)("div",{children:[Object(r.jsxs)(rn,{children:[t&&Object(r.jsx)(U.a,{pl:2,pr:1,children:Object(r.jsx)(Zr,{})}),Object(r.jsx)(U.a,{pl:2,children:Object(r.jsx)(St.a,{noWrap:!0,variant:"h6",children:n.Feed()})})]}),!t&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(U.a,{pb:1,children:[Object(r.jsx)($r,{}),Object(r.jsx)(vt.a,{})]}),Object(r.jsx)(vt.a,{})]}),u]})},Ra=n(1408),Ua=Object(l.a)((function(e){return{search:{height:e.sav3.topBar.height/1.5,"& fieldset":{border:"none",backgroundColor:e.palette.divider}}}}));var Ba=function(){var e=Ua(),t=Object(p.a)(),n=Object(xt.a)(t.breakpoints.down("xs")),s=Object(a.useState)(""),i=Object(d.a)(s,2),c=i[0],o=i[1],u=G();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(rn,{children:[Object(r.jsx)(U.a,{pl:n?2:4,children:n&&Object(r.jsx)(U.a,{pr:.5,children:Object(r.jsx)(Zr,{})})}),Object(r.jsx)(U.a,{width:"100%",pl:0,pr:4,children:Object(r.jsx)(Q.a,{onChange:function(e){var t=e.target.value;try{t=t.trim(),o(t)}catch(n){}},InputProps:{spellCheck:!1,classes:{root:e.search},startAdornment:Object(r.jsx)(U.a,{pr:1,children:Object(r.jsx)(Ra.a,{position:"start",children:Object(r.jsx)(y.a,{})})})},variant:"outlined",fullWidth:!0,placeholder:u["Search user ID"](),value:c})})]}),aa.a.cid(c)&&Object(r.jsx)(Lr,{userCid:c})]})},Aa=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),i=Object(d.a)(s,2),c=i[0],o=i[1];return Object(a.useEffect)((function(){setInterval((function(){o(c+1)}),2e3)}),[]),Object(a.useEffect)((function(){Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt.getPeersCids();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[c]),n},Ja=ge()("sav3:hooks:use-users-posts"),za=function(e){de()(Array.isArray(e),"invalid userCids '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],s=n[1],i=Ir(e),c=Fr(e),o=[];for(var u in i)o.push(i[u].lastPostCid);return Ja({usersIpnsContents:i,userCids:e,lastPostCids:o,usersPosts:r,profiles:c}),Object(a.useEffect)((function(){if(o.length){var e,t=Object(te.a)(o);try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&"string"===typeof n&&lt.getUserPostsFromLastPostCid(n).then((function(e){var t,n={},r=Object(te.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.profile=c[a.userCid]||{},n[a.cid]=a}}catch(i){r.e(i)}finally{r.f()}s((function(e){return Object(ee.a)(Object(ee.a)({},e),n)}))}))}}catch(a){t.e(a)}finally{t.f()}}else r.length&&s([])}),[JSON.stringify(o),JSON.stringify(c)]),r},Ma=ge()("sav3:views:peers");var Ea=function(){var e=Object(p.a)(),t=Object(xt.a)(e.breakpoints.down("xs")),n=G(),a=Object(o.f)(),s=Aa(),i=kt();i&&(s=[i].concat(Object(Y.a)(s)));var c=za(s),u=[];for(var l in c)u.push(c[l]);Ma({peersCids:s,posts:u,postsObject:c});var d=Object(r.jsx)(fr,{posts:u});return u.length||(d=Object(r.jsxs)(U.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(r.jsx)(dr.a,{size:24}),Object(r.jsx)(U.a,{p:.5}),Object(r.jsx)(St.a,{variant:"body1",children:n["Connecting to peers"]()+"..."})]})),Object(r.jsxs)("div",{children:[Object(r.jsxs)(rn,{children:[Object(r.jsx)(U.a,{pr:1,children:Object(r.jsx)(jt.a,{onClick:function(){return a.goBack()},children:Object(r.jsx)(sn.a,{})})}),Object(r.jsx)(St.a,{noWrap:!0,variant:"h6",children:n["Connected peers posts"]()})]}),!t&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(U.a,{pb:1,children:[Object(r.jsx)($r,{}),Object(r.jsx)(vt.a,{})]}),Object(r.jsx)(vt.a,{})]}),d]})},Ta=new Set,Wa=ve({name:"ipIsoCountryCodeCache",maxSize:2e3}),La=function(){var e=Object($.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wa.get(t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n);case 5:throw Ta.has(t)||(Ta.add(t),Da(t).then((function(e){return Wa.set(t,e)})).catch((function(e){return console.error(e)}))),Error("iso country code for ip '".concat(t,"' not cached yet"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Da=function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de()("string"===typeof t,"invalid ip '".concat(t,"' not a string")),n="https://ipapi.co/".concat(t,"/country/"),e.prev=2,e.next=5,fetch(n);case 5:return a=e.sent,e.next=8,a.text();case 8:a=e.sent,r=a.trim().toUpperCase(),Ka(r),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(2),e.t0.message="failed getting country iso code from '".concat(n,"' response '").concat(a,"': ").concat(e.t0.message),e.t0;case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),Ka=function(e){var t=typeof e;de()(/^[a-z]{2}$/i.test(e),"isoCountryCode must be an ISO 3166-1 alpha-2 string, but got '".concat("string"===t?e:t,"' instead"))},_a={getIsoCountryCodeFromIpCached:La,getIsoCountryCodeFromIp:Da,getIsoCountryCodesFromIps:function(e){var t,n=[],r=Object(te.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(Da(a))}}catch(s){r.e(s)}finally{r.f()}return Promise.all(n)},isoCountryCodeToCountryFlagEmoji:function(e){Ka(e);var t=Object(Y.a)(e.toUpperCase()).map((function(e){return e.charCodeAt()+127397}));return String.fromCodePoint.apply(String,Object(Y.a)(t))}},Ha=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),i=Object(d.a)(s,2),c=i[0],o=i[1];return Object(a.useEffect)((function(){setInterval((function(){o(c+1)}),5e3)}),[]),Object(a.useEffect)((function(){Object($.a)(X.a.mark((function e(){var t,n,a,s,i,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt.getPeersStats();case 2:t=e.sent,n=Object(te.a)(t),e.prev=4,n.s();case 6:if((a=n.n()).done){e.next=26;break}if((s=a.value).ip){e.next=10;break}return e.abrupt("continue",24);case 10:return i=void 0,e.prev=11,e.next=14,_a.getIsoCountryCodeFromIpCached(s.ip);case 14:i=e.sent,e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(11),console.error(e.t0),e.abrupt("continue",24);case 21:c=_a.isoCountryCodeToCountryFlagEmoji(i),s.isoCountryCode=i,s.countryFlagEmoji=c;case 24:e.next=6;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(4),n.e(e.t1);case 31:return e.prev=31,n.f(),e.finish(31);case 34:r(t);case 35:case"end":return e.stop()}}),e,null,[[4,28,31,34],[11,17]])})))()}),[c]),n},qa=n(368),Va=n.n(qa),Ga=Object(l.a)((function(e){return{avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor,backgroundColor:e.palette.background.default},userCid:{wordBreak:"break-all"}}}));var Za=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.peer,n=Ga();return Object(r.jsx)("div",{children:Object(r.jsxs)(U.a,{px:2,py:1.5,display:"flex",children:[Object(r.jsx)(U.a,{pr:1.5,children:Object(r.jsx)(Pt.a,{className:n.avatar,children:t.countryFlagEmoji})}),Object(r.jsxs)(U.a,{width:"100%",children:[Object(r.jsxs)(U.a,{display:"flex",children:[Object(r.jsxs)(U.a,{flexGrow:1,children:[Object(r.jsx)(U.a,{display:"flex",children:Object(r.jsxs)(St.a,{variant:"subtitle2",children:[t.ip,":",t.port]})}),Object(r.jsx)(U.a,{children:Object(r.jsx)(St.a,{variant:"caption",color:"textSecondary",className:n.userCid,children:t.peerCid})})]}),Object(r.jsx)(U.a,{height:48})]}),Object(r.jsxs)(St.a,{variant:"body2",children:["\u2b06\ufe0f",Va()(t.dataSent),"\xa0\xa0\u2b07\ufe0f",Va()(t.dataReceived)]})]})]})})},Xa=ge()("sav3:views:stats");function $a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.peers,n=G();if(!t.length)return Object(r.jsxs)(U.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(r.jsx)(dr.a,{size:24}),Object(r.jsx)(U.a,{p:.5}),Object(r.jsx)(St.a,{variant:"body1",children:n["Connecting to peers"]()+"..."})]});var a,s=[],i=Object(te.a)(t);try{for(i.s();!(a=i.n()).done;){var c=a.value;s.push(Object(r.jsx)(Za,{peer:c},c.peerCid+c.port)),s.push(Object(r.jsx)(vt.a,{},c.peerCid+c.port+"feed divider"))}}catch(o){i.e(o)}finally{i.f()}return Object(r.jsx)("div",{children:s})}var Qa=function(){var e=G(),t=Object(o.f)(),n=Ha();return Xa({peers:n}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(rn,{children:[Object(r.jsx)(U.a,{pr:1,children:Object(r.jsx)(jt.a,{onClick:function(){return t.goBack()},children:Object(r.jsx)(sn.a,{})})}),Object(r.jsx)(St.a,{noWrap:!0,variant:"h6",children:e["Connected peers stats"]()})]}),Object(r.jsx)($a,{peers:n})]})},Ya=Object(l.a)((function(e){return{avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor},userCid:{wordBreak:"break-all",textDecoration:"inherit"},displayName:{color:"inherit",textDecoration:"inherit"}}}));var es=function(e){return de()("string"===typeof e,"forceHttps link '".concat(e,"' not a string")),e=(e=e.trim()).replace(/^http:\/\//,"https://")},ts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,n=Ya(),a=G(),s=zn(t.cid),i=Object(d.a)(s,2),c=i[0],o=i[1],u=Object(r.jsx)(R.a,{variant:"outlined",size:"small",color:"primary",onClick:function(){return o(!0)},children:a.Follow()});c&&(u=Object(r.jsx)(R.a,{variant:"outlined",size:"small",color:"primary",onClick:function(){return o(!1)},children:a.Unfollow()}));var l=Kn(t.cid),p="/profile/".concat(l);return Object(r.jsx)("div",{children:Object(r.jsxs)(U.a,{px:2,py:1.5,display:"flex",children:[Object(r.jsx)(U.a,{pr:1.5,children:Object(r.jsx)(Pt.a,{component:z.b,to:p,src:t.thumbnailUrl&&es(t.thumbnailUrl),className:n.avatar})}),Object(r.jsxs)(U.a,{width:"100%",children:[Object(r.jsxs)(U.a,{display:"flex",children:[Object(r.jsxs)(U.a,{flexGrow:1,children:[Object(r.jsx)(U.a,{display:"flex",children:Object(r.jsx)(St.a,{className:n.displayName,component:z.b,to:p,variant:"subtitle2",children:t.displayName})}),Object(r.jsx)(U.a,{children:Object(r.jsx)(St.a,{component:z.b,to:p,variant:"caption",color:"textSecondary",className:n.userCid,children:t.cid})})]}),Object(r.jsx)(U.a,{height:48,children:u})]}),Object(r.jsx)(St.a,{variant:"body2",children:t.description})]})]})})};var ns=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.users,a=[],s=Object(te.a)(n);try{for(s.s();!(e=s.n()).done;){var i=e.value;a.push(Object(r.jsx)(ts,{user:i},i.cid)),a.push(Object(r.jsx)(vt.a,{},i.cid+"feed divider"))}}catch(c){s.e(c)}finally{s.f()}return Object(r.jsx)("div",{children:a})},rs=ge()("sav3:views:following");var as=function(){var e,t=G(),n=Object(o.f)(),a=Pa(),s=Fr(a),i=[],c=Object(te.a)(a);try{for(c.s();!(e=c.n()).done;){var u=e.value,l=s[u]||{};l.cid=u,i.push(l)}}catch(d){c.e(d)}finally{c.f()}var p=Object(r.jsx)(ns,{users:i});return i.length||(p=Object(r.jsx)(U.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:Object(r.jsx)(St.a,{variant:"body1",children:t["Not following anyone"]()+"..."})})),rs({followingCids:a,profiles:s,users:i}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(rn,{children:[Object(r.jsx)(U.a,{pr:1,children:Object(r.jsx)(jt.a,{onClick:function(){return n.goBack()},children:Object(r.jsx)(sn.a,{})})}),Object(r.jsx)(St.a,{noWrap:!0,variant:"h6",children:t.Following()})]}),p]})},ss=Object(l.a)((function(e){return{message:{overflow:"hidden"},data:{"& textarea":{fontFamily:"Monospace",minHeight:"10vh",maxHeight:"40vh",overflowY:"scroll!important"},"& fieldset":{border:"none"},"& .MuiInputBase-root":{paddingLeft:0,paddingRight:0},marginBottom:e.spacing(1)}}}));var is=function(){var e=G(),t=ss(),n=Object(p.a)(),s=Qr(),i=Object(d.a)(s,2)[1],c=Object(a.useState)(""),o=Object(d.a)(c,2),u=o[0],l=o[1],f=Object(a.useState)(),b=Object(d.a)(f,2),h=b[0],j=b[1],v=Object(a.useState)(),x=Object(d.a)(v,2),g=x[0],O=x[1],m=function(e){try{e.target.setSelectionRange(0,e.target.value.length)}catch(t){}},y=function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l("Exporting..."),j(null),O(null),e.prev=3,e.next=6,Bn.getAllFollowing();case 6:return t=e.sent,e.next=9,lt.getPrivateKey();case 9:n=e.sent,r=JSON.stringify({privateKey:n,following:t}),j(null),l(r),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),j(e.t0.message);case 18:O("Export successful. Copy paste your data somewhere safe.");case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object($.a)(X.a.mark((function e(){var t,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(null),O(null),e.prev=2,t=JSON.parse(u),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(2),j("Invalid JSON: ".concat(e.t0.message)),e.abrupt("return");case 10:if(h===(n="Did you backup your data? Importing will irreversibly delete it. Click import again to confirm.")){e.next=14;break}return j(n),e.abrupt("return");case 14:return e.prev=14,e.next=17,Bn.setAllFollowing(t.following);case 17:i(t.following),e.next=24;break;case 20:return e.prev=20,e.t1=e.catch(14),j("Invalid following: ".concat(e.t1.message)),e.abrupt("return");case 24:return e.prev=24,e.next=27,Bn.setAllFollowing(t.following);case 27:i(t.following),e.next=34;break;case 30:return e.prev=30,e.t2=e.catch(24),j("Invalid privateKey: ".concat(e.t2.message)),e.abrupt("return");case 34:j(null),O("Import successful.");case 36:case"end":return e.stop()}}),e,null,[[2,6],[14,20],[24,30]])})));return function(){return e.apply(this,arguments)}}(),C=Object(r.jsxs)("div",{children:[Object(r.jsx)(U.a,{children:Object(r.jsx)(vt.a,{})}),Object(r.jsxs)(U.a,{alignItems:"center",display:"flex",height:n.sav3.topBar.height,children:[Object(r.jsx)(U.a,{flexGrow:1}),Object(r.jsx)(R.a,{disableElevation:!0,variant:"contained",onClick:w,color:"primary",children:e.Import()}),Object(r.jsx)(U.a,{pr:.5}),Object(r.jsx)(R.a,{disableElevation:!0,variant:"contained",onClick:y,color:"primary",children:e.Export()})]})]});return Object(r.jsx)(U.a,{px:2,display:"flex",children:Object(r.jsxs)(U.a,{pt:0,width:"100%",children:[Object(r.jsx)(Q.a,{onClick:m,onFocus:m,className:t.data,onChange:function(e){var t=e.target.value;l(t)},margin:"dense",id:"data",placeholder:"Paste exported data here...",fullWidth:!0,multiline:!0,variant:"outlined",value:u}),h&&Object(r.jsx)(U.a,{pb:1,children:Object(r.jsx)(pt.a,{classes:{message:t.message},severity:"error",children:h})}),g&&Object(r.jsx)(U.a,{pb:1,children:Object(r.jsx)(pt.a,{classes:{message:t.message},severity:"success",children:g})}),Object(r.jsx)(U.a,{pb:0}),C]})})};var cs=function(){var e=Object(p.a)(),t=Object(xt.a)(e.breakpoints.down("xs")),n=G();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(rn,{children:[t&&Object(r.jsx)(U.a,{pl:2,pr:1,children:Object(r.jsx)(Zr,{})}),Object(r.jsx)(U.a,{pl:2,children:Object(r.jsxs)(St.a,{noWrap:!0,variant:"h6",children:[n.Import()," / ",n.Export()]})})]}),Object(r.jsx)(is,{})]})},os=ge()("sav3:hooks:use-post-with-replies"),us=function(e){de()(!e||"string"===typeof e,"invalid postCid '".concat(JSON.stringify(e),"'"));var t,n=Object(a.useState)(),r=Object(d.a)(n,2),s=r[0],i=r[1],c=Vn(s&&s.cid),o=kr(c),u={},l=Object(te.a)(c);try{for(l.s();!(t=l.n()).done;){var p=t.value;u[p]=o[p]}}catch(f){l.e(f)}finally{l.f()}if(Object(a.useEffect)((function(){s&&i(),e&&"string"===typeof e&&Object($.a)(X.a.mark((function t(){var n,r;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt.getPost(e);case 2:if(n=t.sent,r=n,!n.parentPostCid){t.next=8;break}return t.next=7,lt.getPost(n.parentPostCid);case 7:r=t.sent;case 8:i(r);case 9:case"end":return t.stop()}}),t)})))()}),[e]),os({parentPost:s,repliesCids:c,replies:u}),s)return Object(ee.a)(Object(ee.a)({},s),{},{replies:u})},ls=ge()("sav3:views:post");var ps=function(){var e,t=Object(o.h)().encodedCid,n=t&&_n(t);!n&&t&&(e=Dn(t));var a=us(e),s=Ar(a?[a]:[]),i=Object(o.f)(),c=G(),u=[];if(a)for(var l in u.push(a),a.replies)a.replies[l]&&u.push(a.replies[l]);u.length>1&&(u[0]=Object(ee.a)(Object(ee.a)({},u[0]),{},{isParent:!0})),s[u[0]&&u[0].parentPostCid]&&(u[0]=Object(ee.a)(Object(ee.a)({},u[0]),{},{parentPost:s[u[0].parentPostCid]}));for(var p=new Set,d=0,f=u;d<f.length;d++){var b=f[d];p.add(b.userCid)}for(var h=Fr(Object(Y.a)(p)),j=0,v=u;j<v.length;j++){var x=v[j];x.profile=h[x.userCid]||{}}var g=Object(r.jsx)(fr,{posts:u});return u.length||(g=Object(r.jsxs)(U.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(r.jsx)(dr.a,{size:24}),Object(r.jsx)(U.a,{p:.5}),Object(r.jsx)(St.a,{variant:"body1",children:c["Connecting to peers"]()+"..."})]})),n&&(g=Object(r.jsx)(U.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:Object(r.jsx)(St.a,{variant:"body1",children:c["URL expired"]()+"."})})),ls({postCid:e,postWithReplies:a,posts:u}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(rn,{children:[Object(r.jsx)(U.a,{pr:1,children:Object(r.jsx)(jt.a,{onClick:function(){return i.goBack()},children:Object(r.jsx)(sn.a,{})})}),Object(r.jsx)(St.a,{noWrap:!0,variant:"h6",children:c.Post()})]}),g]})},ds=Object(l.a)((function(e){var t,n,r;return{leftColumn:(t={overflow:"hidden"},Object(c.a)(t,e.breakpoints.down("xs"),{display:"none"}),Object(c.a)(t,e.breakpoints.down("md"),{width:e.sav3.layout.columns.left.width.xs}),Object(c.a)(t,e.breakpoints.down("lg"),{width:e.sav3.layout.columns.left.width.xs}),Object(c.a)(t,e.breakpoints.up("lg"),{width:e.sav3.layout.columns.left.width.md}),t),middleColumn:(n={overflow:"hidden"},Object(c.a)(n,e.breakpoints.down("xs"),{width:"100%"}),Object(c.a)(n,e.breakpoints.up("xs"),{width:e.sav3.layout.columns.middle.width.md}),Object(c.a)(n,"borderLeftWidth",e.sav3.borderWidth),Object(c.a)(n,"borderRightWidth",e.sav3.borderWidth),Object(c.a)(n,"borderTopWidth",0),Object(c.a)(n,"borderBottomWidth",0),Object(c.a)(n,"borderStyle","solid"),Object(c.a)(n,"borderColor",e.sav3.borderColor),n),rightColumn:(r={overflow:"hidden"},Object(c.a)(r,e.breakpoints.down("sm"),{display:"none"}),Object(c.a)(r,e.breakpoints.down("lg"),{width:e.sav3.layout.columns.right.width.md,paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),Object(c.a)(r,e.breakpoints.up("lg"),{width:e.sav3.layout.columns.right.width.lg,paddingLeft:e.spacing(4),paddingRight:e.spacing(4)}),r),bottomMenu:Object(c.a)({},e.breakpoints.up("sm"),{display:"none"}),appBar:{backgroundColor:e.palette.background.default}}}));var fs=function(){var e=ds(),t=Object(p.a)();return window.theme=t,Object(r.jsxs)("div",{children:[Object(r.jsxs)(u.a,{container:!0,justify:"center",children:[Object(r.jsx)(u.a,{item:!0,className:e.leftColumn,children:Object(r.jsx)(Bt,{})}),Object(r.jsx)(u.a,{item:!0,className:e.middleColumn,children:Object(r.jsxs)(o.c,{children:[Object(r.jsx)(o.a,{path:"/",exact:!0,children:Object(r.jsx)(ka,{})}),Object(r.jsx)(o.a,{path:"/feed",exact:!0,children:Object(r.jsx)(Fa,{})}),Object(r.jsx)(o.a,{path:"/profile/:encodedCid?",exact:!0,children:Object(r.jsx)(Kr,{})}),Object(r.jsx)(o.a,{path:"/search",exact:!0,children:Object(r.jsx)(Ba,{})}),Object(r.jsx)(o.a,{path:"/peers",exact:!0,children:Object(r.jsx)(Ea,{})}),Object(r.jsx)(o.a,{path:"/stats",exact:!0,children:Object(r.jsx)(Qa,{})}),Object(r.jsx)(o.a,{path:"/following",exact:!0,children:Object(r.jsx)(as,{})}),Object(r.jsx)(o.a,{path:"/export",exact:!0,children:Object(r.jsx)(cs,{})}),Object(r.jsx)(o.a,{path:"/post/:encodedCid",exact:!0,children:Object(r.jsx)(ps,{})})]})}),Object(r.jsxs)(u.a,{item:!0,className:e.rightColumn,children:[Object(r.jsx)(Qt,{}),Object(r.jsx)(Yt,{})]})]}),Object(r.jsx)(Et,{className:e.bottomMenu})]})},bs=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1421)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),s(e),i(e)}))},hs=n(1410);i.a.render(Object(r.jsx)(z.a,{children:Object(r.jsx)(Zt,{children:Object(r.jsx)(V,{children:Object(r.jsx)(Jn,{children:Object(r.jsxs)(ma,{children:[Object(r.jsx)(hs.a,{}),Object(r.jsx)(fs,{})]})})})})}),document.getElementById("root")),bs()},284:function(e,t){},341:function(e,t){},557:function(e,t,n){"use strict";(function(e){var r=n(365),a=n(16),s=n(1),i=n.n(s),c=n(8),o=n(125),u=n(99),l=n(247),p=n(266),d=n(7),f=n.n(d),b=n(363),h=n.n(b),j=n(45),v=n.n(j),x=n(87),g=n.n(x),O=n(58),m=n.n(O),y=n(173),w=n.n(y),C=n(31),k=n.n(C),P=n(28),S=n.n(P),I=n(88),N=n.n(I),F=n(251),R=n.n(F),U=n(126),B=n(25),A=n.n(B)()("sav3:sav3-ipfs:ipns-client"),J=function(t){Object(l.a)(r,t);var n=Object(p.a)(r);function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.ipfs;return Object(o.a)(this,r),e=n.call(this),f()(a&&"object"===typeof a),e.ipfs=a,e.privateKey=null,e.webSocketClient=null,e.peerCid=null,e.url=U.a.ipnsServer,e.subscriptionIpnsValueCache=new R.a({maxSize:1e4}),e.start(),e}return Object(u.a)(r,[{key:"start",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()(null===this.webSocketClient),this.webSocketClient=h()(this.url),e.next=4,this.ipfs.key.export("self","password");case 4:return t=e.sent,e.next=7,g.a.keys.import(t,"password");case 7:return this.privateKey=e.sent,e.next=10,this.ipfs.id();case 10:this.peerCid=e.sent.id,this.webSocketClient.on("publish",function(){var e=Object(c.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,r);case 2:a=e.sent,n.subscriptionIpnsValueCache.set(t,a),n.emit("publish",t,a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.webSocketClient.close();case 2:this.webSocketClient=null;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isReady",value:function(){return this.webSocketClient&&this.privateKey}},{key:"waitForReady",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isReady()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,w()(10);case 4:return e.next=6,this.waitForReady();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,s,c,o,u,l,p,d,f=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(t),e.next=3,this.waitForReady();case 3:n=!0,r=[],s=Object(a.a)(t);try{for(s.s();!(c=s.n()).done;)o=c.value,u=this.subscriptionIpnsValueCache.get(o),r.push(u),u||(n=!1)}catch(i){s.e(i)}finally{s.f()}if(!n){e.next=10;break}return A("subscribe",{allResultsAreCached:n,ipnsPaths:t,cachedIpnsValues:r}),e.abrupt("return",r);case 10:return e.next=12,new Promise((function(e){return f.webSocketClient.emit("subscribe",t,e)}));case 12:return l=e.sent,e.next=15,M(t,l);case 15:for(d in p=e.sent,t)this.subscriptionIpnsValueCache.set(t[d],p[d]);return A("subscribe",{allResultsAreCached:n,ipnsPaths:t,ipnsValues:p}),e.abrupt("return",p);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(t),e.next=3,this.waitForReady();case 3:return e.next=5,new Promise((function(e){return a.webSocketClient.emit("resolve",t,e)}));case 5:return n=e.sent,e.next=8,T(t,n);case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(t),e.next=3,this.waitForReady();case 3:n=Object(a.a)(t);try{for(n.s();!(r=n.n()).done;)s=r.value,this.subscriptionIpnsValueCache.delete(s)}catch(i){n.e(i)}finally{n.f()}return e.next=7,this.webSocketClient.emit("unsubscribe",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publish",value:function(){var t=Object(c.a)(i.a.mark((function t(){var n,r,a,s,c,o,u,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:{},r=n.value,a=n.sequence,f()("string"===typeof r),f()("number"===typeof a),t.next=5,this.waitForReady();case 5:return r.startsWith("/ipfs/")||(r="/ipfs/".concat(r)),s=31536e7,t.next=9,m.a.create(this.privateKey,r,a,s);case 9:return c=t.sent,t.next=12,m.a.embedPublicKey(this.privateKey.public,c);case 12:return o=e.from(m.a.marshal(c)),u=this.peerCid,t.next=16,this.webSocketClient.emit("publish",u,o);case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),r}(v.a),z=function(e){f()(Array.isArray(e),"ipns paths '".concat(JSON.stringify(e),"' not an array"));var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;f()("string"===typeof r,"ipns paths '".concat(JSON.stringify(e),"' contains non string '").concat(r,"'"))}}catch(s){n.e(s)}finally{n.f()}},M=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f()(Array.isArray(t)),f()(Array.isArray(n)),r=[],e.t0=i.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=16;break}if(a=e.t1.value,null!==n[a]){e.next=9;break}return r.push(null),e.abrupt("continue",4);case 9:return e.t2=r,e.next=12,E(t[a],n[a]);case 12:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=4;break;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()("string"===typeof t),n=new Uint8Array(n),r=m.a.unmarshal(n),a=m.a.extractPublicKey({},r),e.next=6,m.a.validate(a,r);case 6:return e.next=8,S.a.createFromPubKey(a.bytes);case 8:return s=e.sent,f()(s.equals(S.a.createFromB58String(t))),c=k()(r.value),f()(N.a.cid(c.replace(/^\/ipfs\//,""))),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f()(Array.isArray(t)),f()(Array.isArray(n)),r=[],e.t0=i.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=16;break}if(a=e.t1.value,null!==n[a]){e.next=9;break}return r.push(null),e.abrupt("continue",4);case 9:return e.t2=r,e.next=12,W(t[a],n[a]);case 12:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=4;break;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()("string"===typeof t),n=new Uint8Array(n),r=m.a.unmarshal(n),a=m.a.extractPublicKey({},r),e.next=6,m.a.validate(a,r);case 6:return e.next=8,S.a.createFromPubKey(a.bytes);case 8:return s=e.sent,f()(s.equals(S.a.createFromB58String(t))),c=k()(r.value),f()(N.a.cid(c.replace(/^\/ipfs\//,""))),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();window.IpnsClient=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(r.a)(J,t)},window.ipns=m.a,t.a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(r.a)(J,t)}}).call(this,n(24).Buffer)},601:function(e,t){},608:function(e,t){},682:function(e,t){},683:function(e,t){},783:function(e,t){},785:function(e,t){},841:function(e,t){},907:function(e,t){},909:function(e,t){}},[[1344,1,2]]]);
//# sourceMappingURL=main.b339c23f.chunk.js.map